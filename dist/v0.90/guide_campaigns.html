<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>1kFA Campaigns Guide</title>
  <style type="text/css">code{white-space: pre;}</style>
  <link href="data:text/css;charset=utf-8,html%20%7B%0Afont%2Dsize%3A%20100%25%3B%0Aoverflow%2Dy%3A%20scroll%3B%0A%2Dwebkit%2Dtext%2Dsize%2Dadjust%3A%20100%25%3B%0A%2Dms%2Dtext%2Dsize%2Dadjust%3A%20100%25%3B%0A%7D%0Abody%20%7B%0Acolor%3A%20%23444%3B%0Afont%2Dfamily%3A%20Georgia%2C%20Palatino%2C%20%27Palatino%20Linotype%27%2C%20Times%2C%20%27Times%20New%20Roman%27%2C%20serif%3B%0Afont%2Dsize%3A%2012px%3B%0Aline%2Dheight%3A%201%2E5em%3B%0Apadding%3A%201em%3B%0Amargin%3A%20auto%3B%0Amax%2Dwidth%3A%2042em%3B%0Abackground%3A%20%23fefefe%3B%0A%7D%0A%2Ecaption%20%7B%0Afont%2Dfamily%3A%20sans%2Dserif%3B%0Afont%2Dsize%3A%2075%25%3B%0Afont%2Dweight%3A%20lighter%3B%0Amargin%2Dtop%3A%200%2E5em%3B%0Apadding%2Dleft%3A%201em%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230645ad%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%230b0080%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%2306e%3B%0A%7D%0Aa%3Aactive%20%7B%0Acolor%3A%20%23faa700%3B%0A%7D%0Aa%3Afocus%20%7B%0Aoutline%3A%20thin%20dotted%3B%0A%7D%0Aa%3Ahover%2C%0Aa%3Aactive%20%7B%0Aoutline%3A%200%3B%0A%7D%0A%3A%3A%2Dmoz%2Dselection%20%7B%0Abackground%3A%20rgba%28255%2C%20255%2C%200%2C%200%2E3%29%3B%0Acolor%3A%20%23000%3B%0A%7D%0A%3A%3Aselection%20%7B%0Abackground%3A%20rgba%28255%2C%20255%2C%200%2C%200%2E3%29%3B%0Acolor%3A%20%23000%3B%0A%7D%0Aa%3A%3A%2Dmoz%2Dselection%20%7B%0Abackground%3A%20rgba%28255%2C%20255%2C%200%2C%200%2E3%29%3B%0Acolor%3A%20%230645ad%3B%0A%7D%0Aa%3A%3Aselection%20%7B%0Abackground%3A%20rgba%28255%2C%20255%2C%200%2C%200%2E3%29%3B%0Acolor%3A%20%230645ad%3B%0A%7D%0Ap%20%7B%0Amargin%3A%201em%200%3B%0A%7D%0Aimg%20%7B%0Amax%2Dwidth%3A%20100%25%3B%0A%7D%0Ah1%2C%0Ah2%2C%0Ah3%2C%0Ah4%2C%0Ah5%2C%0Ah6%20%7B%0Afont%2Dweight%3A%20normal%3B%0Acolor%3A%20%23111%3B%0Aline%2Dheight%3A%201em%3B%0A%7D%0Ah4%2C%0Ah5%2C%0Ah6%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Ah1%20%7B%0Afont%2Dsize%3A%202%2E5em%3B%0A%7D%0Ah2%20%7B%0Afont%2Dsize%3A%202em%3B%0A%7D%0Ah3%20%7B%0Afont%2Dsize%3A%201%2E5em%3B%0A%7D%0Ah4%20%7B%0Afont%2Dsize%3A%201%2E2em%3B%0A%7D%0Ah5%20%7B%0Afont%2Dsize%3A%201em%3B%0A%7D%0Ah6%20%7B%0Afont%2Dsize%3A%200%2E9em%3B%0A%7D%0Ablockquote%20%7B%0Acolor%3A%20%23666666%3B%0Amargin%3A%200%3B%0Apadding%2Dleft%3A%203em%3B%0Aborder%2Dleft%3A%200%2E5em%20%23eee%20solid%3B%0A%7D%0Ahr%20%7B%0Adisplay%3A%20block%3B%0Aborder%3A%200%3B%0Aborder%2Dtop%3A%201px%20solid%20%23aaa%3B%0Aborder%2Dbottom%3A%201px%20solid%20%23eee%3B%0Amargin%3A%201em%200%3B%0Apadding%3A%200%3B%0A%7D%0Apre%2C%0Acode%2C%0Akbd%2C%0Asamp%20%7B%0Acolor%3A%20%23000%3B%0Afont%2Dfamily%3A%20monospace%2C%20monospace%3B%0A%5Ffont%2Dfamily%3A%20%27courier%20new%27%2C%20monospace%3B%0Afont%2Dsize%3A%200%2E98em%3B%0A%7D%0Apre%20%7B%0Awhite%2Dspace%3A%20pre%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%0Aword%2Dwrap%3A%20break%2Dword%3B%0A%7D%0Ab%2C%0Astrong%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Adfn%20%7B%0Afont%2Dstyle%3A%20italic%3B%0A%7D%0Ains%20%7B%0Abackground%3A%20%23ff9%3B%0Acolor%3A%20%23000%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Amark%20%7B%0Abackground%3A%20%23ff0%3B%0Acolor%3A%20%23000%3B%0Afont%2Dstyle%3A%20italic%3B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Asub%2C%0Asup%20%7B%0Afont%2Dsize%3A%2075%25%3B%0Aline%2Dheight%3A%200%3B%0Aposition%3A%20relative%3B%0Avertical%2Dalign%3A%20baseline%3B%0A%7D%0Asup%20%7B%0Atop%3A%20%2D0%2E5em%3B%0A%7D%0Asub%20%7B%0Abottom%3A%20%2D0%2E25em%3B%0A%7D%0Aul%2C%0Aol%20%7B%0Amargin%3A%201em%200%3B%0Apadding%3A%200%200%200%202em%3B%0A%7D%0Ali%20p%3Alast%2Dchild%20%7B%0Amargin%3A%200%3B%0A%7D%0Add%20%7B%0Amargin%3A%200%200%200%202em%3B%0A%7D%0Aimg%20%7B%0Aborder%3A%200%3B%0A%2Dms%2Dinterpolation%2Dmode%3A%20bicubic%3B%0Avertical%2Dalign%3A%20middle%3B%0A%7D%0Atable%20%7B%0Aborder%2Dcollapse%3A%20collapse%3B%0Aborder%2Dspacing%3A%200%3B%0A%7D%0Ath%20%7B%0Apadding%2Dright%3A%200%2E5em%3B%0Aborder%2Dbottom%3A%20solid%201px%20grey%3B%0A%7D%0Atd%20%7B%0Apadding%2Dright%3A%200%2E8em%3B%0Avertical%2Dalign%3A%20top%3B%0A%7D%0Atr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f0f0f0%3B%0A%7D%0Atr%20%7B%0Aborder%2Dbottom%3A%20solid%201px%20%23CCC%3B%0A%7D%0A%40media%20only%20screen%20and%20%28min%2Dwidth%3A%20480px%29%20%7B%0Abody%20%7B%0Afont%2Dsize%3A%2014px%3B%0A%7D%0A%7D%0A%40media%20only%20screen%20and%20%28min%2Dwidth%3A%20768px%29%20%7B%0Abody%20%7B%0Afont%2Dsize%3A%2016px%3B%0A%7D%0A%7D%0A%40media%20print%20%7B%0A%2A%20%7B%0Abackground%3A%20transparent%20%21important%3B%0Acolor%3A%20black%20%21important%3B%0Afilter%3A%20none%20%21important%3B%0A%2Dms%2Dfilter%3A%20none%20%21important%3B%0A%7D%0Abody%20%7B%0Afont%2Dsize%3A%2012pt%3B%0Amax%2Dwidth%3A%20100%25%3B%0A%7D%0Aa%2C%0Aa%3Avisited%20%7B%0Atext%2Ddecoration%3A%20underline%3B%0A%7D%0Ahr%20%7B%0Aheight%3A%201px%3B%0Aborder%3A%200%3B%0Aborder%2Dbottom%3A%201px%20solid%20black%3B%0A%7D%0Aa%5Bhref%5D%3Aafter%20%7B%0Acontent%3A%20%22%20%28%22%20attr%28href%29%20%22%29%22%3B%0A%7D%0Aabbr%5Btitle%5D%3Aafter%20%7B%0Acontent%3A%20%22%20%28%22%20attr%28title%29%20%22%29%22%3B%0A%7D%0A%2Eir%20a%3Aafter%2C%0Aa%5Bhref%5E%3D%22javascript%3A%22%5D%3Aafter%2C%0Aa%5Bhref%5E%3D%22%23%22%5D%3Aafter%20%7B%0Acontent%3A%20%22%22%3B%0A%7D%0Apre%2C%0Ablockquote%20%7B%0Aborder%3A%201px%20solid%20%23999%3B%0Apadding%2Dright%3A%201em%3B%0Apage%2Dbreak%2Dinside%3A%20avoid%3B%0A%7D%0Atr%2C%0Aimg%20%7B%0Apage%2Dbreak%2Dinside%3A%20avoid%3B%0A%7D%0Aimg%20%7B%0Amax%2Dwidth%3A%20100%25%20%21important%3B%0A%7D%0A%40page%20%3Aleft%20%7B%0Amargin%3A%2015mm%2020mm%2015mm%2010mm%3B%0A%7D%0A%40page%20%3Aright%20%7B%0Amargin%3A%2015mm%2010mm%2015mm%2020mm%3B%0A%7D%0Ap%2C%0Ah2%2C%0Ah3%20%7B%0Aorphans%3A%203%3B%0Awidows%3A%203%3B%0A%7D%0Ah2%2C%0Ah3%20%7B%0Apage%2Dbreak%2Dafter%3A%20avoid%3B%0A%7D%0A%7D%0A" rel="stylesheet" type="text/css" />
  <!-- Global site tag (gtag.js) - Google Analytics -->
    <script src="data:application/javascript; charset=UTF-8;base64,Ci8vIENvcHlyaWdodCAyMDEyIEdvb2dsZSBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCihmdW5jdGlvbigpewoKdmFyIGRhdGEgPSB7CiJyZXNvdXJjZSI6IHsKICAidmVyc2lvbiI6IjEiLAogICJtYWNyb3MiOltdLAogICJ0YWdzIjpbXSwKICAicHJlZGljYXRlcyI6W10sCiAgInJ1bGVzIjpbXQp9LAoicnVudGltZSI6WwpbXSxbXQpdCgoKfTsKdmFyIGRhLGVhPXRoaXMsZmE9L15bXHcrL18tXStbPV17MCwyfSQvLGlhPW51bGwsbGE9ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKCl7fWMucHJvdG90eXBlPWIucHJvdG90eXBlO2EuWGc9Yi5wcm90b3R5cGU7YS5wcm90b3R5cGU9bmV3IGM7YS5wcm90b3R5cGUuY29uc3RydWN0b3I9YTthLkdnPWZ1bmN0aW9uKGEsYyxnKXtmb3IodmFyIGQ9QXJyYXkoYXJndW1lbnRzLmxlbmd0aC0yKSxlPTI7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKylkW2UtMl09YXJndW1lbnRzW2VdO3JldHVybiBiLnByb3RvdHlwZVtjXS5hcHBseShhLGQpfX07dmFyIG1hPWZ1bmN0aW9uKCl7fSxuYT1mdW5jdGlvbihhKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgYX0sZj1mdW5jdGlvbihhKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGF9LG9hPWZ1bmN0aW9uKGEpe3JldHVybiJudW1iZXIiPT10eXBlb2YgYSYmIWlzTmFOKGEpfSxxYT1mdW5jdGlvbihhKXtyZXR1cm4iW29iamVjdCBBcnJheV0iPT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoT2JqZWN0KGEpKX0sbj1mdW5jdGlvbihhLGIpe2lmKEFycmF5LnByb3RvdHlwZS5pbmRleE9mKXt2YXIgYz1hLmluZGV4T2YoYik7cmV0dXJuIm51bWJlciI9PXR5cGVvZiBjP2M6LTF9Zm9yKHZhciBkPTA7ZDxhLmxlbmd0aDtkKyspaWYoYVtkXT09PWIpcmV0dXJuIGQ7cmV0dXJuLTF9LHJhPWZ1bmN0aW9uKGEsYil7aWYoYSYmcWEoYSkpZm9yKHZhciBjPTA7YzxhLmxlbmd0aDtjKyspaWYoYVtjXSYmYihhW2NdKSlyZXR1cm4gYVtjXX0sc2E9ZnVuY3Rpb24oYSxiKXtpZighb2EoYSl8fAohb2EoYil8fGE+YilhPTAsYj0yMTQ3NDgzNjQ3O3JldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqKGItYSsxKSthKX0sdGE9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMgaW4gYSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSxjKSYmYihjLGFbY10pfSx1YT1mdW5jdGlvbihhKXtyZXR1cm4gTWF0aC5yb3VuZChOdW1iZXIoYSkpfHwwfSx2YT1mdW5jdGlvbihhKXtyZXR1cm4iZmFsc2UiPT1TdHJpbmcoYSkudG9Mb3dlckNhc2UoKT8hMTohIWF9LHdhPWZ1bmN0aW9uKGEpe3ZhciBiPVtdO2lmKHFhKGEpKWZvcih2YXIgYz0wO2M8YS5sZW5ndGg7YysrKWIucHVzaChTdHJpbmcoYVtjXSkpO3JldHVybiBifSx4YT1mdW5jdGlvbihhKXtyZXR1cm4gYT9hLnJlcGxhY2UoL15ccyt8XHMrJC9nLCIiKToiIn0seWE9ZnVuY3Rpb24oKXtyZXR1cm4obmV3IERhdGUpLmdldFRpbWUoKX0semE9ZnVuY3Rpb24oKXt0aGlzLnByZWZpeD0iZ3RtLiI7dGhpcy52YWx1ZXM9Cnt9fTt6YS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGEsYil7dGhpcy52YWx1ZXNbdGhpcy5wcmVmaXgrYV09Yn07emEucHJvdG90eXBlLmdldD1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy52YWx1ZXNbdGhpcy5wcmVmaXgrYV19O3phLnByb3RvdHlwZS5jb250YWlucz1mdW5jdGlvbihhKXtyZXR1cm4gdm9pZCAwIT09dGhpcy5nZXQoYSl9Owp2YXIgQmE9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBhJiZhLmhhc093blByb3BlcnR5KGIpP2FbYl06Y30sQ2E9ZnVuY3Rpb24oYSl7dmFyIGI9ITE7cmV0dXJuIGZ1bmN0aW9uKCl7aWYoIWIpdHJ5e2EoKX1jYXRjaChjKXt9Yj0hMH19LERhPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjIGluIGIpYi5oYXNPd25Qcm9wZXJ0eShjKSYmKGFbY109YltjXSl9LEZhPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYiBpbiBhKWlmKGEuaGFzT3duUHJvcGVydHkoYikpcmV0dXJuITA7cmV0dXJuITF9LEdhPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPVtdLGQ9MDtkPGEubGVuZ3RoO2QrKyljLnB1c2goYVtkXSksYy5wdXNoLmFwcGx5KGMsYlthW2RdXXx8W10pO3JldHVybiBjfTsvKgogalF1ZXJ5IHYxLjkuMSAoYykgMjAwNSwgMjAxMiBqUXVlcnkgRm91bmRhdGlvbiwgSW5jLiBqcXVlcnkub3JnL2xpY2Vuc2UuICovCnZhciBIYT0vXFtvYmplY3QgKEJvb2xlYW58TnVtYmVyfFN0cmluZ3xGdW5jdGlvbnxBcnJheXxEYXRlfFJlZ0V4cClcXS8sSWE9ZnVuY3Rpb24oYSl7aWYobnVsbD09YSlyZXR1cm4gU3RyaW5nKGEpO3ZhciBiPUhhLmV4ZWMoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKE9iamVjdChhKSkpO3JldHVybiBiP2JbMV0udG9Mb3dlckNhc2UoKToib2JqZWN0In0sSmE9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKE9iamVjdChhKSxiKX0sS2E9ZnVuY3Rpb24oYSl7aWYoIWF8fCJvYmplY3QiIT1JYShhKXx8YS5ub2RlVHlwZXx8YT09YS53aW5kb3cpcmV0dXJuITE7dHJ5e2lmKGEuY29uc3RydWN0b3ImJiFKYShhLCJjb25zdHJ1Y3RvciIpJiYhSmEoYS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsImlzUHJvdG90eXBlT2YiKSlyZXR1cm4hMX1jYXRjaChjKXtyZXR1cm4hMX1mb3IodmFyIGIgaW4gYSk7cmV0dXJuIHZvaWQgMD09PQpifHxKYShhLGIpfSx0PWZ1bmN0aW9uKGEsYil7dmFyIGM9Ynx8KCJhcnJheSI9PUlhKGEpP1tdOnt9KSxkO2ZvcihkIGluIGEpaWYoSmEoYSxkKSl7dmFyIGU9YVtkXTsiYXJyYXkiPT1JYShlKT8oImFycmF5IiE9SWEoY1tkXSkmJihjW2RdPVtdKSxjW2RdPXQoZSxjW2RdKSk6S2EoZSk/KEthKGNbZF0pfHwoY1tkXT17fSksY1tkXT10KGUsY1tkXSkpOmNbZF09ZX1yZXR1cm4gY307dmFyIHg9d2luZG93LHk9ZG9jdW1lbnQsTGE9bmF2aWdhdG9yLE1hPXkuY3VycmVudFNjcmlwdCYmeS5jdXJyZW50U2NyaXB0LnNyYyxOYT1mdW5jdGlvbihhLGIpe3ZhciBjPXhbYV07eFthXT12b2lkIDA9PT1jP2I6YztyZXR1cm4geFthXX0sT2E9ZnVuY3Rpb24oYSxiKXtiJiYoYS5hZGRFdmVudExpc3RlbmVyP2Eub25sb2FkPWI6YS5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXthLnJlYWR5U3RhdGUgaW57bG9hZGVkOjEsY29tcGxldGU6MX0mJihhLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsLGIoKSl9KX0sUGE9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXkuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7ZC50eXBlPSJ0ZXh0L2phdmFzY3JpcHQiO2QuYXN5bmM9ITA7ZC5zcmM9YTtPYShkLGIpO2MmJihkLm9uZXJyb3I9Yyk7dmFyIGU7aWYobnVsbD09PWlhKWI6e3ZhciBnPWVhLmRvY3VtZW50LGg9Zy5xdWVyeVNlbGVjdG9yJiZnLnF1ZXJ5U2VsZWN0b3IoInNjcmlwdFtub25jZV0iKTsKaWYoaCl7dmFyIGs9aC5ub25jZXx8aC5nZXRBdHRyaWJ1dGUoIm5vbmNlIik7aWYoayYmZmEudGVzdChrKSl7aWE9azticmVhayBifX1pYT0iIn1lPWlhO2UmJmQuc2V0QXR0cmlidXRlKCJub25jZSIsZSk7dmFyIGw9eS5nZXRFbGVtZW50c0J5VGFnTmFtZSgic2NyaXB0IilbMF18fHkuYm9keXx8eS5oZWFkO2wucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZCxsKTtyZXR1cm4gZH0sUWE9ZnVuY3Rpb24oKXtpZihNYSl7dmFyIGE9TWEudG9Mb3dlckNhc2UoKTtpZigwPT09YS5pbmRleE9mKCJodHRwczovLyIpKXJldHVybiAyO2lmKDA9PT1hLmluZGV4T2YoImh0dHA6Ly8iKSlyZXR1cm4gM31yZXR1cm4gMX0sUmE9ZnVuY3Rpb24oYSxiKXt2YXIgYz15LmNyZWF0ZUVsZW1lbnQoImlmcmFtZSIpO2MuaGVpZ2h0PSIwIjtjLndpZHRoPSIwIjtjLnN0eWxlLmRpc3BsYXk9Im5vbmUiO2Muc3R5bGUudmlzaWJpbGl0eT0iaGlkZGVuIjt2YXIgZD15LmJvZHkmJnkuYm9keS5sYXN0Q2hpbGR8fAp5LmJvZHl8fHkuaGVhZDtkLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGMsZCk7T2EoYyxiKTt2b2lkIDAhPT1hJiYoYy5zcmM9YSk7cmV0dXJuIGN9LFNhPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1uZXcgSW1hZ2UoMSwxKTtkLm9ubG9hZD1mdW5jdGlvbigpe2Qub25sb2FkPW51bGw7YiYmYigpfTtkLm9uZXJyb3I9ZnVuY3Rpb24oKXtkLm9uZXJyb3I9bnVsbDtjJiZjKCl9O2Quc3JjPWE7cmV0dXJuIGR9LEE9ZnVuY3Rpb24oYSxiLGMsZCl7YS5hZGRFdmVudExpc3RlbmVyP2EuYWRkRXZlbnRMaXN0ZW5lcihiLGMsISFkKTphLmF0dGFjaEV2ZW50JiZhLmF0dGFjaEV2ZW50KCJvbiIrYixjKX0sVGE9ZnVuY3Rpb24oYSxiLGMpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lcj9hLnJlbW92ZUV2ZW50TGlzdGVuZXIoYixjLCExKTphLmRldGFjaEV2ZW50JiZhLmRldGFjaEV2ZW50KCJvbiIrYixjKX0sQz1mdW5jdGlvbihhKXt4LnNldFRpbWVvdXQoYSwwKX0sVmE9ZnVuY3Rpb24oYSl7dmFyIGI9CnkuZ2V0RWxlbWVudEJ5SWQoYSk7aWYoYiYmVWEoYiwiaWQiKSE9YSlmb3IodmFyIGM9MTtjPGRvY3VtZW50LmFsbFthXS5sZW5ndGg7YysrKWlmKFVhKGRvY3VtZW50LmFsbFthXVtjXSwiaWQiKT09YSlyZXR1cm4gZG9jdW1lbnQuYWxsW2FdW2NdO3JldHVybiBifSxVYT1mdW5jdGlvbihhLGIpe3JldHVybiBhJiZiJiZhLmF0dHJpYnV0ZXMmJmEuYXR0cmlidXRlc1tiXT9hLmF0dHJpYnV0ZXNbYl0udmFsdWU6bnVsbH0sV2E9ZnVuY3Rpb24oYSl7dmFyIGI9YS5pbm5lclRleHR8fGEudGV4dENvbnRlbnR8fCIiO2ImJiIgIiE9YiYmKGI9Yi5yZXBsYWNlKC9eW1xzXHhhMF0rfFtcc1x4YTBdKyQvZywiIikpO2ImJihiPWIucmVwbGFjZSgvKFx4YTArfFxzezIsfXxcbnxcclx0KS9nLCIgIikpO3JldHVybiBifSxYYT1mdW5jdGlvbihhKXt2YXIgYj15LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2IuaW5uZXJIVE1MPSJBPGRpdj4iK2ErIjwvZGl2PiI7Yj1iLmxhc3RDaGlsZDtmb3IodmFyIGM9CltdO2IuZmlyc3RDaGlsZDspYy5wdXNoKGIucmVtb3ZlQ2hpbGQoYi5maXJzdENoaWxkKSk7cmV0dXJuIGN9LFlhPWZ1bmN0aW9uKGEsYixjKXtjPWN8fDEwMDtmb3IodmFyIGQ9e30sZT0wO2U8Yi5sZW5ndGg7ZSsrKWRbYltlXV09ITA7Zm9yKHZhciBnPWEsaD0wO2cmJmg8PWM7aCsrKXtpZihkW1N0cmluZyhnLnRhZ05hbWUpLnRvTG93ZXJDYXNlKCldKXJldHVybiBnO2c9Zy5wYXJlbnRFbGVtZW50fXJldHVybiBudWxsfTt2YXIgWmE9L14oPzooPzpodHRwcz98bWFpbHRvfGZ0cCk6fFteOi8/I10qKD86Wy8/I118JCkpL2k7dmFyICRhPS86WzAtOV0rJC8sY2I9ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD1hLnNwbGl0KCImIiksZT0wO2U8ZC5sZW5ndGg7ZSsrKXt2YXIgZz1kW2VdLnNwbGl0KCI9Iik7aWYoZGVjb2RlVVJJQ29tcG9uZW50KGdbMF0pLnJlcGxhY2UoL1wrL2csIiAiKT09PWIpe3ZhciBoPWcuc2xpY2UoMSkuam9pbigiPSIpO3JldHVybiBjP2g6ZGVjb2RlVVJJQ29tcG9uZW50KGgpLnJlcGxhY2UoL1wrL2csIiAiKX19fSxEPWZ1bmN0aW9uKGEsYixjLGQsZSl7YiYmKGI9U3RyaW5nKGIpLnRvTG93ZXJDYXNlKCkpO2lmKCJwcm90b2NvbCI9PT1ifHwicG9ydCI9PT1iKWEucHJvdG9jb2w9ZGIoYS5wcm90b2NvbCl8fGRiKHgubG9jYXRpb24ucHJvdG9jb2wpOyJwb3J0Ij09PWI/YS5wb3J0PVN0cmluZyhOdW1iZXIoYS5ob3N0bmFtZT9hLnBvcnQ6eC5sb2NhdGlvbi5wb3J0KXx8KCJodHRwIj09YS5wcm90b2NvbD84MDoiaHR0cHMiPT1hLnByb3RvY29sPzQ0MzoiIikpOiJob3N0Ij09PWImJgooYS5ob3N0bmFtZT0oYS5ob3N0bmFtZXx8eC5sb2NhdGlvbi5ob3N0bmFtZSkucmVwbGFjZSgkYSwiIikudG9Mb3dlckNhc2UoKSk7dmFyIGc9YixoLGs9ZGIoYS5wcm90b2NvbCk7ZyYmKGc9U3RyaW5nKGcpLnRvTG93ZXJDYXNlKCkpO3N3aXRjaChnKXtjYXNlICJ1cmxfbm9fZnJhZ21lbnQiOmg9ZWIoYSk7YnJlYWs7Y2FzZSAicHJvdG9jb2wiOmg9azticmVhaztjYXNlICJob3N0IjpoPWEuaG9zdG5hbWUucmVwbGFjZSgkYSwiIikudG9Mb3dlckNhc2UoKTtpZihjKXt2YXIgbD0vXnd3d1xkKlwuLy5leGVjKGgpO2wmJmxbMF0mJihoPWguc3Vic3RyKGxbMF0ubGVuZ3RoKSl9YnJlYWs7Y2FzZSAicG9ydCI6aD1TdHJpbmcoTnVtYmVyKGEucG9ydCl8fCgiaHR0cCI9PWs/ODA6Imh0dHBzIj09az80NDM6IiIpKTticmVhaztjYXNlICJwYXRoIjpoPSIvIj09YS5wYXRobmFtZS5zdWJzdHIoMCwxKT9hLnBhdGhuYW1lOiIvIithLnBhdGhuYW1lO3ZhciBtPWguc3BsaXQoIi8iKTswPD0KbihkfHxbXSxtW20ubGVuZ3RoLTFdKSYmKG1bbS5sZW5ndGgtMV09IiIpO2g9bS5qb2luKCIvIik7YnJlYWs7Y2FzZSAicXVlcnkiOmg9YS5zZWFyY2gucmVwbGFjZSgiPyIsIiIpO2UmJihoPWNiKGgsZSx2b2lkIDApKTticmVhaztjYXNlICJleHRlbnNpb24iOnZhciBwPWEucGF0aG5hbWUuc3BsaXQoIi4iKTtoPTE8cC5sZW5ndGg/cFtwLmxlbmd0aC0xXToiIjtoPWguc3BsaXQoIi8iKVswXTticmVhaztjYXNlICJmcmFnbWVudCI6aD1hLmhhc2gucmVwbGFjZSgiIyIsIiIpO2JyZWFrO2RlZmF1bHQ6aD1hJiZhLmhyZWZ9cmV0dXJuIGh9LGRiPWZ1bmN0aW9uKGEpe3JldHVybiBhP2EucmVwbGFjZSgiOiIsIiIpLnRvTG93ZXJDYXNlKCk6IiJ9LGViPWZ1bmN0aW9uKGEpe3ZhciBiPSIiO2lmKGEmJmEuaHJlZil7dmFyIGM9YS5ocmVmLmluZGV4T2YoIiMiKTtiPTA+Yz9hLmhyZWY6YS5ocmVmLnN1YnN0cigwLGMpfXJldHVybiBifSxmYj1mdW5jdGlvbihhKXt2YXIgYj15LmNyZWF0ZUVsZW1lbnQoImEiKTsKYSYmKGIuaHJlZj1hKTt2YXIgYz1iLnBhdGhuYW1lOyIvIiE9PWNbMF0mJihjPSIvIitjKTt2YXIgZD1iLmhvc3RuYW1lLnJlcGxhY2UoJGEsIiIpO3JldHVybntocmVmOmIuaHJlZixwcm90b2NvbDpiLnByb3RvY29sLGhvc3Q6Yi5ob3N0LGhvc3RuYW1lOmQscGF0aG5hbWU6YyxzZWFyY2g6Yi5zZWFyY2gsaGFzaDpiLmhhc2gscG9ydDpiLnBvcnR9fTt2YXIgZ2I9ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD1bXSxlPVN0cmluZyhifHxkb2N1bWVudC5jb29raWUpLnNwbGl0KCI7IiksZz0wO2c8ZS5sZW5ndGg7ZysrKXt2YXIgaD1lW2ddLnNwbGl0KCI9Iiksaz1oWzBdLnJlcGxhY2UoL15ccyp8XHMqJC9nLCIiKTtpZihrJiZrPT1hKXt2YXIgbD1oLnNsaWNlKDEpLmpvaW4oIj0iKS5yZXBsYWNlKC9eXHMqfFxzKiQvZywiIik7bCYmYyYmKGw9ZGVjb2RlVVJJQ29tcG9uZW50KGwpKTtkLnB1c2gobCl9fXJldHVybiBkfSxqYj1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1oYihhLGQpO2lmKDE9PT1lLmxlbmd0aClyZXR1cm4gZVswXS5pZDtpZigwIT09ZS5sZW5ndGgpe2U9aWIoZSxmdW5jdGlvbihhKXtyZXR1cm4gYS55Yn0sYik7aWYoMT09PWUubGVuZ3RoKXJldHVybiBlWzBdLmlkO2U9aWIoZSxmdW5jdGlvbihhKXtyZXR1cm4gYS5UYX0sYyk7cmV0dXJuIGVbMF0/ZVswXS5pZDp2b2lkIDB9fTsKZnVuY3Rpb24ga2IoYSxiLGMpe3ZhciBkPWRvY3VtZW50LmNvb2tpZTtkb2N1bWVudC5jb29raWU9YTt2YXIgZT1kb2N1bWVudC5jb29raWU7cmV0dXJuIGQhPWV8fHZvaWQgMCE9YyYmMDw9Z2IoYixlKS5pbmRleE9mKGMpfQp2YXIgbmI9ZnVuY3Rpb24oYSxiLGMsZCxlLGcpe2Q9ZHx8ImF1dG8iO3ZhciBoPXtwYXRoOmN8fCIvIn07ZSYmKGguZXhwaXJlcz1lKTsibm9uZSIhPT1kJiYoaC5kb21haW49ZCk7dmFyIGs7YTp7dmFyIGw9YixtO2lmKHZvaWQgMD09bCltPWErIj1kZWxldGVkOyBleHBpcmVzPSIrKG5ldyBEYXRlKDApKS50b1VUQ1N0cmluZygpO2Vsc2V7ZyYmKGw9ZW5jb2RlVVJJQ29tcG9uZW50KGwpKTt2YXIgcD1sO3AmJjEyMDA8cC5sZW5ndGgmJihwPXAuc3Vic3RyaW5nKDAsMTIwMCkpO2w9cDttPWErIj0iK2x9dmFyIHE9dm9pZCAwLHI9dm9pZCAwLHc7Zm9yKHcgaW4gaClpZihoLmhhc093blByb3BlcnR5KHcpKXt2YXIgdj1oW3ddO2lmKG51bGwhPXYpc3dpdGNoKHcpe2Nhc2UgInNlY3VyZSI6diYmKG0rPSI7IHNlY3VyZSIpO2JyZWFrO2Nhc2UgImRvbWFpbiI6cT12O2JyZWFrO2RlZmF1bHQ6InBhdGgiPT13JiYocj12KSwiZXhwaXJlcyI9PXcmJnYgaW5zdGFuY2VvZiBEYXRlJiYodj0Kdi50b1VUQ1N0cmluZygpKSxtKz0iOyAiK3crIj0iK3Z9fWlmKCJhdXRvIj09PXEpe2Zvcih2YXIgdT1sYigpLHo9MDt6PHUubGVuZ3RoOysreil7dmFyIEU9Im5vbmUiIT11W3pdP3Vbel06dm9pZCAwO2lmKCFtYihFLHIpJiZrYihtKyhFPyI7IGRvbWFpbj0iK0U6IiIpLGEsbCkpe2s9ITA7YnJlYWsgYX19az0hMX1lbHNlIHEmJiJub25lIiE9cSYmKG0rPSI7IGRvbWFpbj0iK3EpLGs9IW1iKHEscikmJmtiKG0sYSxsKX1yZXR1cm4ga307ZnVuY3Rpb24gaWIoYSxiLGMpe2Zvcih2YXIgZD1bXSxlPVtdLGcsaD0wO2g8YS5sZW5ndGg7aCsrKXt2YXIgaz1hW2hdLGw9YihrKTtsPT09Yz9kLnB1c2goayk6dm9pZCAwPT09Z3x8bDxnPyhlPVtrXSxnPWwpOmw9PT1nJiZlLnB1c2goayl9cmV0dXJuIDA8ZC5sZW5ndGg/ZDplfQpmdW5jdGlvbiBoYihhLGIpe2Zvcih2YXIgYz1bXSxkPWdiKGEpLGU9MDtlPGQubGVuZ3RoO2UrKyl7dmFyIGc9ZFtlXS5zcGxpdCgiLiIpLGg9Zy5zaGlmdCgpO2lmKCFifHwtMSE9PWIuaW5kZXhPZihoKSl7dmFyIGs9Zy5zaGlmdCgpO2smJihrPWsuc3BsaXQoIi0iKSxjLnB1c2goe2lkOmcuam9pbigiLiIpLHliOjEqa1swXXx8MSxUYToxKmtbMV18fDF9KSl9fXJldHVybiBjfQp2YXIgb2I9L14od3d3XC4pP2dvb2dsZShcLmNvbT8pPyhcLlthLXpdezJ9KT8kLyxwYj0vKF58XC4pZG91YmxlY2xpY2tcLm5ldCQvaSxtYj1mdW5jdGlvbihhLGIpe3JldHVybiBwYi50ZXN0KGRvY3VtZW50LmxvY2F0aW9uLmhvc3RuYW1lKXx8Ii8iPT09YiYmb2IudGVzdChhKX0sbGI9ZnVuY3Rpb24oKXt2YXIgYT1bXSxiPWRvY3VtZW50LmxvY2F0aW9uLmhvc3RuYW1lLnNwbGl0KCIuIik7aWYoND09PWIubGVuZ3RoKXt2YXIgYz1iW2IubGVuZ3RoLTFdO2lmKHBhcnNlSW50KGMsMTApLnRvU3RyaW5nKCk9PT1jKXJldHVyblsibm9uZSJdfWZvcih2YXIgZD1iLmxlbmd0aC0yOzA8PWQ7ZC0tKWEucHVzaChiLnNsaWNlKGQpLmpvaW4oIi4iKSk7YS5wdXNoKCJub25lIik7cmV0dXJuIGF9O3ZhciBMYj1bXSxNYj1bXSxOYj1bXSxPYj1bXSxQYj1bXSxRYj17fSxSYixTYixUYixVYj1mdW5jdGlvbihhLGIpe3ZhciBjPXt9O2NbImZ1bmN0aW9uIl09Il9fIithO2Zvcih2YXIgZCBpbiBiKWIuaGFzT3duUHJvcGVydHkoZCkmJihjWyJ2dHBfIitkXT1iW2RdKTtyZXR1cm4gY30sVmI9ZnVuY3Rpb24oYSxiKXt2YXIgYz1hWyJmdW5jdGlvbiJdO2lmKCFjKXRocm93IEVycm9yKCJFcnJvcjogTm8gZnVuY3Rpb24gbmFtZSBnaXZlbiBmb3IgZnVuY3Rpb24gY2FsbC4iKTt2YXIgZD0hIVFiW2NdLGU9e30sZztmb3IoZyBpbiBhKWEuaGFzT3duUHJvcGVydHkoZykmJjA9PT1nLmluZGV4T2YoInZ0cF8iKSYmKGVbZD9nOmcuc3Vic3RyKDQpXT1hW2ddKTtyZXR1cm4gZD9RYltjXShlKToodm9pZCAwKShjLGUsYil9LFhiPWZ1bmN0aW9uKGEsYixjLGQpe2M9Y3x8W107ZD1kfHxtYTt2YXIgZT17fSxnO2ZvcihnIGluIGEpYS5oYXNPd25Qcm9wZXJ0eShnKSYmKGVbZ109V2IoYVtnXSxiLApjLGQpKTtyZXR1cm4gZX0sWWI9ZnVuY3Rpb24oYSl7dmFyIGI9YVsiZnVuY3Rpb24iXTtpZighYil0aHJvdyJFcnJvcjogTm8gZnVuY3Rpb24gbmFtZSBnaXZlbiBmb3IgZnVuY3Rpb24gY2FsbC4iO3ZhciBjPVFiW2JdO3JldHVybiBjP2MuYnx8MDowfSxXYj1mdW5jdGlvbihhLGIsYyxkKXtpZihxYShhKSl7dmFyIGU7c3dpdGNoKGFbMF0pe2Nhc2UgImZ1bmN0aW9uX2lkIjpyZXR1cm4gYVsxXTtjYXNlICJsaXN0IjplPVtdO2Zvcih2YXIgZz0xO2c8YS5sZW5ndGg7ZysrKWUucHVzaChXYihhW2ddLGIsYyxkKSk7cmV0dXJuIGU7Y2FzZSAibWFjcm8iOnZhciBoPWFbMV07aWYoY1toXSlyZXR1cm47dmFyIGs9TGJbaF07aWYoIWt8fGIoaykpcmV0dXJuO2NbaF09ITA7dHJ5e3ZhciBsPVhiKGssYixjLGQpO2U9VmIobCxkKTtUYiYmKGU9VGIuZmYoZSxsKSl9Y2F0Y2goRSl7ZChFLGgpLGU9ITF9Y1toXT0hMTtyZXR1cm4gZTtjYXNlICJtYXAiOmU9e307Zm9yKHZhciBtPTE7bTxhLmxlbmd0aDttKz0KMillW1diKGFbbV0sYixjLGQpXT1XYihhW20rMV0sYixjLGQpO3JldHVybiBlO2Nhc2UgInRlbXBsYXRlIjplPVtdO2Zvcih2YXIgcD0hMSxxPTE7cTxhLmxlbmd0aDtxKyspe3ZhciByPVdiKGFbcV0sYixjLGQpO1NiJiYocD1wfHxyPT09U2Iub2IpO2UucHVzaChyKX1yZXR1cm4gU2ImJnA/U2Iua2YoZSk6ZS5qb2luKCIiKTtjYXNlICJlc2NhcGUiOmU9V2IoYVsxXSxiLGMsZCk7aWYoU2ImJnFhKGFbMV0pJiYibWFjcm8iPT09YVsxXVswXSYmU2IuTmYoYSkpcmV0dXJuIFNiLllmKGUpO2U9U3RyaW5nKGUpO2Zvcih2YXIgdz0yO3c8YS5sZW5ndGg7dysrKXFiW2Fbd11dJiYoZT1xYlthW3ddXShlKSk7cmV0dXJuIGU7Y2FzZSAidGFnIjp2YXIgdj1hWzFdO2lmKCFPYlt2XSl0aHJvdyBFcnJvcigiVW5hYmxlIHRvIHJlc29sdmUgdGFnIHJlZmVyZW5jZSAiK3YrIi4iKTtyZXR1cm4gZT17d2Q6YVsyXSxpbmRleDp2fTtjYXNlICJ6YiI6dmFyIHU9e2FyZzA6YVsyXSxhcmcxOmFbM10sCmlnbm9yZV9jYXNlOmFbNV19O3VbImZ1bmN0aW9uIl09YVsxXTt2YXIgej1aYih1LGIsYyxkKTthWzRdJiYoej0heik7cmV0dXJuIHo7ZGVmYXVsdDp0aHJvdyBFcnJvcigiQXR0ZW1wdGluZyB0byBleHBhbmQgdW5rbm93biBWYWx1ZSB0eXBlOiAiK2FbMF0rIi4iKTt9fXJldHVybiBhfSxaYj1mdW5jdGlvbihhLGIsYyxkKXt0cnl7cmV0dXJuIFJiKFhiKGEsYixjLGQpKX1jYXRjaChlKXtKU09OLnN0cmluZ2lmeShhKX1yZXR1cm4gbnVsbH07dmFyICRiPW51bGwsY2M9ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEpe2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKWVbYVtiXV09ITB9dmFyIGQ9W10sZT1bXTskYj1hYyhhLGJ8fGZ1bmN0aW9uKCl7fSk7Zm9yKHZhciBnPTA7ZzxNYi5sZW5ndGg7ZysrKXt2YXIgaD1NYltnXSxrPWJjKGgpO2lmKGspe2Zvcih2YXIgbD1oLmFkZHx8W10sbT0wO208bC5sZW5ndGg7bSsrKWRbbFttXV09ITA7YyhoLmJsb2NrfHxbXSl9ZWxzZSBudWxsPT09ayYmYyhoLmJsb2NrfHxbXSl9Zm9yKHZhciBwPVtdLHE9MDtxPE9iLmxlbmd0aDtxKyspZFtxXSYmIWVbcV0mJihwW3FdPSEwKTtyZXR1cm4gcH0sYmM9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPWFbImlmIl18fFtdLGM9MDtjPGIubGVuZ3RoO2MrKyl7dmFyIGQ9JGIoYltjXSk7aWYoIWQpcmV0dXJuIG51bGw9PT1kP251bGw6ITF9Zm9yKHZhciBlPWEudW5sZXNzfHxbXSxnPTA7ZzxlLmxlbmd0aDtnKyspe3ZhciBoPSRiKGVbZ10pO2lmKG51bGw9PT0KaClyZXR1cm4gbnVsbDtpZihoKXJldHVybiExfXJldHVybiEwfSxhYz1mdW5jdGlvbihhLGIpe3ZhciBjPVtdO3JldHVybiBmdW5jdGlvbihkKXt2b2lkIDA9PT1jW2RdJiYoY1tkXT1aYihOYltkXSxhLHZvaWQgMCxiKSk7cmV0dXJuIGNbZF19fTsvKgogQ29weXJpZ2h0IChjKSAyMDE0IERlcmVrIEJyYW5zLCBNSVQgbGljZW5zZSBodHRwczovL2dpdGh1Yi5jb20va3J1eC9wb3N0c2NyaWJlL2Jsb2IvbWFzdGVyL0xJQ0VOU0UuIFBvcnRpb25zIGRlcml2ZWQgZnJvbSBzaW1wbGVodG1scGFyc2VyLCB3aGljaCBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICovCgp2YXIgSD17fSxLPW51bGwscGM9TWF0aC5yYW5kb20oKTtILm09IlVBLTEyMjY4MDQ3NS0xIjtILnNiPSIzYjIiO3ZhciBxYz0id3d3Lmdvb2dsZXRhZ21hbmFnZXIuY29tL2d0bS5qcyI7cWM9Ind3dy5nb29nbGV0YWdtYW5hZ2VyLmNvbS9ndGFnL2pzIjt2YXIgcmM9cWMsc2M9bnVsbCx0Yz1udWxsLHVjPW51bGwsdmM9Ii8vd3d3Lmdvb2dsZXRhZ21hbmFnZXIuY29tL2E/aWQ9IitILm0rIiZjdj0xIix3Yz17fSx4Yz17fSx5Yz1mdW5jdGlvbigpe3ZhciBhPUsuc2VxdWVuY2V8fDA7Sy5zZXF1ZW5jZT1hKzE7cmV0dXJuIGF9O3ZhciBPPWZ1bmN0aW9uKGEsYixjLGQpe3JldHVybigyPT09emMoKXx8ZHx8Imh0dHA6IiE9eC5sb2NhdGlvbi5wcm90b2NvbD9hOmIpK2N9LHpjPWZ1bmN0aW9uKCl7dmFyIGE9UWEoKSxiO2lmKDE9PT1hKWE6e3ZhciBjPXJjO2M9Yy50b0xvd2VyQ2FzZSgpO2Zvcih2YXIgZD0iaHR0cHM6Ly8iK2MsZT0iaHR0cDovLyIrYyxnPTEsaD15LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJzY3JpcHQiKSxrPTA7azxoLmxlbmd0aCYmMTAwPms7aysrKXt2YXIgbD1oW2tdLnNyYztpZihsKXtsPWwudG9Mb3dlckNhc2UoKTtpZigwPT09bC5pbmRleE9mKGUpKXtiPTM7YnJlYWsgYX0xPT09ZyYmMD09PWwuaW5kZXhPZihkKSYmKGc9Mil9fWI9Z31lbHNlIGI9YTtyZXR1cm4gYn07dmFyIEFjPSExOwp2YXIgQmM9ZnVuY3Rpb24oYSxiLGMsZCl7aWYoYyl7ZD1kfHx7fTt2YXIgZT14Ll9nb29nV2NtSW1wbHx8ZnVuY3Rpb24oKXtlLnE9ZS5xfHxbXTtlLnEucHVzaChhcmd1bWVudHMpfTt4Ll9nb29nV2NtSW1wbD1lO3ZvaWQgMD09PXguX2dvb2dXY21BayYmKHguX2dvb2dXY21Baz1hKTtBYz9kLnlhJiZDKGQueWEpOihQYShPKCJodHRwczovLyIsImh0dHA6Ly8iLCJ3d3cuZ3N0YXRpYy5jb20vd2NtL2xvYWRlci5qcyIpLGQueWEsZC5MZCksQWM9ITApO3ZhciBnPXthazphLGNsOmJ9O3ZvaWQgMD09PWQuWWQmJihnLmF1dG9yZXBsYWNlPWMpO2UoMixkLllkLGcsYywwLG5ldyBEYXRlLGQueGcpfX07dmFyIFA9ZnVuY3Rpb24oKXt2YXIgYT1mdW5jdGlvbihhKXtyZXR1cm57dG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gYX19fTtyZXR1cm57VmM6YSgiY29udmVydF9jYXNlX3RvIiksV2M6YSgiY29udmVydF9mYWxzZV90byIpLFhjOmEoImNvbnZlcnRfbnVsbF90byIpLFljOmEoImNvbnZlcnRfdHJ1ZV90byIpLFpjOmEoImNvbnZlcnRfdW5kZWZpbmVkX3RvIikscWE6YSgiZnVuY3Rpb24iKSx5ZTphKCJpbnN0YW5jZV9uYW1lIiksemU6YSgibGl2ZV9vbmx5IiksQWU6YSgibWFsd2FyZV9kaXNhYmxlZCIpLENnOmEoIm9yaWdpbmFsX3ZlbmRvcl90ZW1wbGF0ZV9pZCIpLEJlOmEoIm9uY2VfcGVyX2V2ZW50IiksbWQ6YSgib25jZV9wZXJfbG9hZCIpLG5kOmEoInNldHVwX3RhZ3MiKSxDZTphKCJ0YWdfaWQiKSxvZDphKCJ0ZWFyZG93bl90YWdzIil9fSgpO3ZhciBEYz17fSxFYz1mdW5jdGlvbihhKXtEYy5HVE09RGMuR1RNfHxbXTtEYy5HVE1bYV09ITB9Owp2YXIgRmM9ZnVuY3Rpb24oKXtyZXR1cm4iJnRjPSIrT2IuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBhfSkubGVuZ3RofSxPYz1mdW5jdGlvbigpe0djJiYoeC5jbGVhclRpbWVvdXQoR2MpLEdjPXZvaWQgMCk7dm9pZCAwPT09SGN8fEljW0hjXSYmIUpjfHwoS2NbSGNdfHxMYy5QZigpfHwwPj1NYy0tPyhFYygxKSxLY1tIY109ITApOihMYy5nZygpLFNhKE5jKCkpLEljW0hjXT0hMCxKYz0iIikpfSxOYz1mdW5jdGlvbigpe3ZhciBhPUhjO2lmKHZvaWQgMD09PWEpcmV0dXJuIiI7Zm9yKHZhciBiLGM9W10sZD1EYy5HVE18fFtdLGU9MDtlPGQubGVuZ3RoO2UrKylkW2VdJiYoY1tNYXRoLmZsb29yKGUvNildXj0xPDxlJTYpO2Zvcih2YXIgZz0wO2c8Yy5sZW5ndGg7ZysrKWNbZ109IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5LV8iLmNoYXJBdChjW2ddfHwwKTtiPWMuam9pbigiIik7cmV0dXJuW1BjLEljW2FdPyIiOgoiJmVzPTEiLFFjW2FdLGI/IiZ1PSIrYjoiIixGYygpLEpjLCImej0wIl0uam9pbigiIil9LFJjPWZ1bmN0aW9uKCl7cmV0dXJuW3ZjLCImdj0zJnQ9dCIsIiZwaWQ9IitzYSgpLCImcnY9IitILnNiXS5qb2luKCIiKX0sU2M9IjAuMDA1MDAwIj5NYXRoLnJhbmRvbSgpLFBjPVJjKCksVGM9ZnVuY3Rpb24oKXtQYz1SYygpfSxJYz17fSxKYz0iIixIYz12b2lkIDAsUWM9e30sS2M9e30sR2M9dm9pZCAwLExjPWZ1bmN0aW9uKGEsYil7dmFyIGM9MCxkPTA7cmV0dXJue1BmOmZ1bmN0aW9uKCl7aWYoYzxhKXJldHVybiExO3lhKCktZD49YiYmKGM9MCk7cmV0dXJuIGM+PWF9LGdnOmZ1bmN0aW9uKCl7eWEoKS1kPj1iJiYoYz0wKTtjKys7ZD15YSgpfX19KDIsMUUzKSxNYz0xRTMsVWM9ZnVuY3Rpb24oYSxiKXtpZihTYyYmIUtjW2FdJiZIYyE9PWEpe09jKCk7SGM9YTtKYz0iIjt2YXIgYztjPTA9PT1iLmluZGV4T2YoImd0bS4iKT9lbmNvZGVVUklDb21wb25lbnQoYik6CiIqIjtRY1thXT0iJmU9IitjKyImZWlkPSIrYTtHY3x8KEdjPXguc2V0VGltZW91dChPYyw1MDApKX19LFZjPWZ1bmN0aW9uKGEsYixjKXtpZihTYyYmIUtjW2FdJiZiKXthIT09SGMmJihPYygpLEhjPWEpO3ZhciBkPWMrU3RyaW5nKGJbUC5xYV18fCIiKS5yZXBsYWNlKC9fL2csIiIpO0pjPUpjP0pjKyIuIitkOiImdHI9IitkO0djfHwoR2M9eC5zZXRUaW1lb3V0KE9jLDUwMCkpOzIwMjI8PU5jKCkubGVuZ3RoJiZPYygpfX07dmFyIFdjPW5ldyB6YSxYYz17fSxZYz17fSxiZD17c2V0OmZ1bmN0aW9uKGEsYil7dChaYyhhLGIpLFhjKTskYygpfSxnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGFkKGEsMil9LHJlc2V0OmZ1bmN0aW9uKCl7V2M9bmV3IHphO1hjPXt9OyRjKCl9fSxhZD1mdW5jdGlvbihhLGIpe2lmKDIhPWIpe3ZhciBjPVdjLmdldChhKTtpZihTYyl7dmFyIGQ9Y2QoYSk7YyE9PWQmJkVjKDUpfXJldHVybiBjfXJldHVybiBjZChhKX0sY2Q9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEuc3BsaXQoIi4iKSxlPSExLGc9dm9pZCAwO3ZhciBoPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7dm9pZCAwIT09YSYmYzxkLmxlbmd0aDtjKyspe2lmKG51bGw9PT1hKXJldHVybiExO2E9YVtkW2NdXX1yZXR1cm4gdm9pZCAwIT09YXx8MTxjP2E6Yi5sZW5ndGg/aChkZChiLnBvcCgpKSxiKTplZChkKX07ZT0hMDtnPWgoWGMuZXZlbnRNb2RlbCxbYixjXSk7CnJldHVybiBlP2c6ZWQoZCl9LGVkPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1YYyxjPTA7YzxhLmxlbmd0aDtjKyspe2lmKG51bGw9PT1iKXJldHVybiExO2lmKHZvaWQgMD09PWIpYnJlYWs7Yj1iW2FbY11dfXJldHVybiBifTt2YXIgZmQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gY2QoYSxiLHZvaWQgMCl9LGRkPWZ1bmN0aW9uKGEpe2lmKGEpe3ZhciBiPWVkKFsiZ3RhZyIsInRhcmdldHMiLGFdKTtyZXR1cm4gS2EoYik/Yjp2b2lkIDB9fSxnZD1mdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSl7YSYmdGEoYSxmdW5jdGlvbihhKXtkW2FdPW51bGx9KX12YXIgZD17fTtjKFhjKTtkZWxldGUgZC5ldmVudE1vZGVsO2MoZGQoYSkpO2MoZGQoYikpO2MoWGMuZXZlbnRNb2RlbCk7dmFyIGU9W107dGEoZCxmdW5jdGlvbihhKXtlLnB1c2goYSl9KTtyZXR1cm4gZX07CnZhciBoZD1mdW5jdGlvbihhLGIpe1ljLmhhc093blByb3BlcnR5KGEpfHwoV2Muc2V0KGEsYiksdChaYyhhLGIpLFhjKSwkYygpKX0sWmM9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9e30sZD1jLGU9YS5zcGxpdCgiLiIpLGc9MDtnPGUubGVuZ3RoLTE7ZysrKWQ9ZFtlW2ddXT17fTtkW2VbZS5sZW5ndGgtMV1dPWI7cmV0dXJuIGN9LCRjPWZ1bmN0aW9uKGEpe3RhKFljLGZ1bmN0aW9uKGIsYyl7V2Muc2V0KGIsYyk7dChaYyhiLHZvaWQgMCksWGMpO3QoWmMoYixjKSxYYyk7YSYmZGVsZXRlIFljW2JdfSl9O3ZhciBpZD1uZXcgUmVnRXhwKC9eKC4qXC4pPyhnb29nbGV8eW91dHViZXxibG9nZ2VyfHdpdGhnb29nbGUpKFwuY29tPyk/KFwuW2Etel17Mn0pP1wuPyQvKSxqZD17Y2w6WyJlY2wiXSxjdXN0b21QaXhlbHM6WyJub25Hb29nbGVQaXhlbHMiXSxlY2w6WyJjbCJdLGh0bWw6WyJjdXN0b21TY3JpcHRzIiwiY3VzdG9tUGl4ZWxzIiwibm9uR29vZ2xlUGl4ZWxzIiwibm9uR29vZ2xlU2NyaXB0cyIsIm5vbkdvb2dsZUlmcmFtZXMiXSxjdXN0b21TY3JpcHRzOlsiaHRtbCIsImN1c3RvbVBpeGVscyIsIm5vbkdvb2dsZVBpeGVscyIsIm5vbkdvb2dsZVNjcmlwdHMiLCJub25Hb29nbGVJZnJhbWVzIl0sbm9uR29vZ2xlUGl4ZWxzOltdLG5vbkdvb2dsZVNjcmlwdHM6WyJub25Hb29nbGVQaXhlbHMiXSxub25Hb29nbGVJZnJhbWVzOlsibm9uR29vZ2xlUGl4ZWxzIl19LGtkPXtjbDpbImVjbCJdLGN1c3RvbVBpeGVsczpbImN1c3RvbVNjcmlwdHMiLCJodG1sIl0sZWNsOlsiY2wiXSxodG1sOlsiY3VzdG9tU2NyaXB0cyJdLApjdXN0b21TY3JpcHRzOlsiaHRtbCJdLG5vbkdvb2dsZVBpeGVsczpbImN1c3RvbVBpeGVscyIsImN1c3RvbVNjcmlwdHMiLCJodG1sIiwibm9uR29vZ2xlU2NyaXB0cyIsIm5vbkdvb2dsZUlmcmFtZXMiXSxub25Hb29nbGVTY3JpcHRzOlsiY3VzdG9tU2NyaXB0cyIsImh0bWwiXSxub25Hb29nbGVJZnJhbWVzOlsiY3VzdG9tU2NyaXB0cyIsImh0bWwiLCJub25Hb29nbGVTY3JpcHRzIl19Owp2YXIgbWQ9ZnVuY3Rpb24oYSl7dmFyIGI9YWQoImd0bS53aGl0ZWxpc3QiKTtiJiZFYyg5KTtiPVsiZ29vZ2xlIiwiZ3RhZ2ZsIiwibGNsIiwib2lkIiwib3AiXTt2YXIgYz1iJiZHYSh3YShiKSxqZCksZD1hZCgiZ3RtLmJsYWNrbGlzdCIpO2R8fChkPWFkKCJ0YWdUeXBlQmxhY2tsaXN0IikpJiZFYygzKTtkP0VjKDgpOmQ9W107CmxkKCkmJihkPXdhKGQpLGQucHVzaCgibm9uR29vZ2xlUGl4ZWxzIiwibm9uR29vZ2xlU2NyaXB0cyIpKTswPD1uKHdhKGQpLCJnb29nbGUiKSYmRWMoMik7dmFyIGU9ZCYmR2Eod2EoZCksa2QpLGc9e307cmV0dXJuIGZ1bmN0aW9uKGgpe3ZhciBrPWgmJmhbUC5xYV07aWYoIWt8fCJzdHJpbmciIT10eXBlb2YgaylyZXR1cm4hMDtrPWsucmVwbGFjZSgvXl8qLywiIik7aWYodm9pZCAwIT09Z1trXSlyZXR1cm4gZ1trXTt2YXIgbD14Y1trXXx8W10sbT1hKGspO2lmKGIpe3ZhciBwO2lmKHA9bSlhOntpZigwPm4oYyxrKSlpZihsJiYwPGwubGVuZ3RoKWZvcih2YXIgcT0wO3E8bC5sZW5ndGg7cSsrKXtpZigwPm4oYyxsW3FdKSl7RWMoMTEpO3A9ITE7YnJlYWsgYX19ZWxzZXtwPSExO2JyZWFrIGF9cD0hMH1tPXB9dmFyIHI9ITE7aWYoZCl7dmFyIHc9MDw9bihlLGspOwppZih3KXI9dztlbHNle3ZhciB2O2I6e2Zvcih2YXIgdT1sfHxbXSx6PW5ldyB6YSxFPTA7RTxlLmxlbmd0aDtFKyspei5zZXQoZVtFXSwhMCk7Zm9yKHZhciBCPTA7Qjx1Lmxlbmd0aDtCKyspaWYoei5nZXQodVtCXSkpe3Y9ITA7YnJlYWsgYn12PSExfXZhciBHPXY7RyYmRWMoMTApO3I9R319cmV0dXJuIGdba109IW18fHJ9fSxsZD1mdW5jdGlvbigpe3JldHVybiBpZC50ZXN0KHgubG9jYXRpb24mJngubG9jYXRpb24uaG9zdG5hbWUpfTt2YXIgb2Q9ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7aWYob2EoYykpYShiLGMpO2Vsc2V7YiBpbnN0YW5jZW9mIG5kfHwoYj1uZXcgbmQoYikpO3ZhciBkPWI7YyYmZC5qYy5wdXNoKGMpO3Rocm93IGQ7fX19LG5kPWZ1bmN0aW9uKGEpe3RoaXMuVGY9YTt0aGlzLmpjPVtdfTtsYShuZCxFcnJvcik7dmFyIHBkPXtmZjpmdW5jdGlvbihhLGIpe2JbUC5WY10mJiJzdHJpbmciPT09dHlwZW9mIGEmJihhPTE9PWJbUC5WY10/YS50b0xvd2VyQ2FzZSgpOmEudG9VcHBlckNhc2UoKSk7Yi5oYXNPd25Qcm9wZXJ0eShQLlhjKSYmbnVsbD09PWEmJihhPWJbUC5YY10pO2IuaGFzT3duUHJvcGVydHkoUC5aYykmJnZvaWQgMD09PWEmJihhPWJbUC5aY10pO2IuaGFzT3duUHJvcGVydHkoUC5ZYykmJiEwPT09YSYmKGE9YltQLlljXSk7Yi5oYXNPd25Qcm9wZXJ0eShQLldjKSYmITE9PT1hJiYoYT1iW1AuV2NdKTtyZXR1cm4gYX19O3ZhciBxZD17YWN0aXZlOiEwLGlzV2hpdGVsaXN0ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hMH19LHJkPWZ1bmN0aW9uKGEpe3ZhciBiPUsuem9uZXM7IWImJmEmJihiPUsuem9uZXM9YSgpKTtyZXR1cm4gYn07dmFyIHNkPSExLHRkPTAsdWQ9W107ZnVuY3Rpb24gdmQoYSl7aWYoIXNkKXt2YXIgYj15LmNyZWF0ZUV2ZW50T2JqZWN0LGM9ImNvbXBsZXRlIj09eS5yZWFkeVN0YXRlLGQ9ImludGVyYWN0aXZlIj09eS5yZWFkeVN0YXRlO2lmKCFhfHwicmVhZHlzdGF0ZWNoYW5nZSIhPWEudHlwZXx8Y3x8IWImJmQpe3NkPSEwO2Zvcih2YXIgZT0wO2U8dWQubGVuZ3RoO2UrKylDKHVkW2VdKX11ZC5wdXNoPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTxhcmd1bWVudHMubGVuZ3RoO2ErKylDKGFyZ3VtZW50c1thXSk7cmV0dXJuIDB9fX1mdW5jdGlvbiB3ZCgpe2lmKCFzZCYmMTQwPnRkKXt0ZCsrO3RyeXt5LmRvY3VtZW50RWxlbWVudC5kb1Njcm9sbCgibGVmdCIpLHZkKCl9Y2F0Y2goYSl7eC5zZXRUaW1lb3V0KHdkLDUwKX19fXZhciB4ZD1mdW5jdGlvbihhKXtzZD9hKCk6dWQucHVzaChhKX07dmFyIHlkPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXtyZXR1cm4hb2EoYSl8fDA+YT8wOmF9aWYoIUsuX2xpJiZ4LnBlcmZvcm1hbmNlJiZ4LnBlcmZvcm1hbmNlLnRpbWluZyl7dmFyIGI9eC5wZXJmb3JtYW5jZS50aW1pbmcubmF2aWdhdGlvblN0YXJ0LGM9b2EoYmQuZ2V0KCJndG0uc3RhcnQiKSk/YmQuZ2V0KCJndG0uc3RhcnQiKTowO0suX2xpPXtjc3Q6YShjLWIpLGNidDphKHRjLWIpfX19O3ZhciBDZD0hMSxEZD1mdW5jdGlvbigpe3JldHVybiB4Lkdvb2dsZUFuYWx5dGljc09iamVjdCYmeFt4Lkdvb2dsZUFuYWx5dGljc09iamVjdF19LEVkPSExO3ZhciBGZD1mdW5jdGlvbihhKXt4Lkdvb2dsZUFuYWx5dGljc09iamVjdHx8KHguR29vZ2xlQW5hbHl0aWNzT2JqZWN0PWF8fCJnYSIpO3ZhciBiPXguR29vZ2xlQW5hbHl0aWNzT2JqZWN0O2lmKCF4W2JdKXt2YXIgYz1mdW5jdGlvbigpe2MucT1jLnF8fFtdO2MucS5wdXNoKGFyZ3VtZW50cyl9O2MubD1OdW1iZXIobmV3IERhdGUpO3hbYl09Y315ZCgpO3JldHVybiB4W2JdfSxHZD1mdW5jdGlvbihhLGIsYyxkKXtiPVN0cmluZyhiKS5yZXBsYWNlKC9ccysvZywiIikuc3BsaXQoIiwiKTt2YXIgZT1EZCgpO2UoYSsicmVxdWlyZSIsImxpbmtlciIpO2UoYSsibGlua2VyOmF1dG9MaW5rIixiLGMsZCl9Owp2YXIgSWQ9ZnVuY3Rpb24oKXt9LEhkPWZ1bmN0aW9uKCl7cmV0dXJuIHguR29vZ2xlQW5hbHl0aWNzT2JqZWN0fHwiZ2EifSxKZD0hMTsKdmFyIEtkPWZ1bmN0aW9uKGEsYixjKXtpZihiKXtjPWN8fHt9O3ZhciBkPXguX2dhUGhvbmVJbXBsfHxmdW5jdGlvbigpe2QucT1kLnF8fFtdO2QucS5wdXNoKGFyZ3VtZW50cyl9O3guX2dhUGhvbmVJbXBsPWQ7dm9pZCAwPT09eC5nYV93cGlkJiYoeC5nYV93cGlkPWEpO0pkP2MueWEmJkMoYy55YSk6KFBhKE8oImh0dHBzOi8vIiwiaHR0cDovLyIsInd3dy5nc3RhdGljLmNvbS9nYXBob25lL2xvYWRlci5qcyIpLGMueWEsYy5MZCksSmQ9ITApO3ZhciBlPXt9O3ZvaWQgMCE9PWMuemQ/ZS5yZWNlaXZlcj1jLnpkOmUucmVwbGFjZT1iO2UuZ2Ffd3BpZD1hO2UuZGVzdGluYXRpb249YjtkKDIsbmV3IERhdGUsZSl9fTt2YXIgUWQ9ZnVuY3Rpb24oYSl7fTsKZnVuY3Rpb24gUGQoYSxiKXthLmNvbnRhaW5lcklkPUgubTt2YXIgYz17dHlwZToiR0VORVJJQyIsdmFsdWU6YX07Yi5sZW5ndGgmJihjLnRyYWNlPWIpO3JldHVybiBjfTtmdW5jdGlvbiBSZChhLGIsYyxkLGUpe3ZhciBnPU9iW2FdLGg9U2QoYSxiLGMsZCxlKTtpZighaClyZXR1cm4gbnVsbDt2YXIgaz1XYihnW1AubmRdLGQuZGEsW10sbWEpO2lmKGsmJmsubGVuZ3RoKXt2YXIgbD1rWzBdO2g9UmQobC5pbmRleCxiLHtJOmgsTzoxPT09bC53ZD9jLnRlcm1pbmF0ZTpoLHRlcm1pbmF0ZTpjLnRlcm1pbmF0ZX0sZCxlKX1yZXR1cm4gaH0KZnVuY3Rpb24gU2QoYSxiLGMsZCxlKXtmdW5jdGlvbiBnKCl7aWYoaFtQLkFlXSlsKCk7ZWxzZXt2YXIgYj1YYihoLGQuZGEsW10sb2QoZnVuY3Rpb24oYSl7RWMoNik7UWQoYSl9KSksYz0hMTtiLnZ0cF9ndG1PblN1Y2Nlc3M9ZnVuY3Rpb24oKXtpZighYyl7Yz0hMDtWYyhkLmlkLE9iW2FdLCI1Iik7aygpfX07Yi52dHBfZ3RtT25GYWlsdXJlPWZ1bmN0aW9uKCl7aWYoIWMpe2M9ITA7VmMoZC5pZCxPYlthXSwiNiIpO2woKX19O2IudnRwX2d0bVRhZ0lkPWgudGFnX2lkO1ZjKGQuaWQsaCwiMSIpO3ZhciBlPQohMSxnPWZ1bmN0aW9uKGEsYil7aWYoIWUpe2EgaW5zdGFuY2VvZiBuZHx8KGE9bmV3IG5kKGEpKTt2YXIgZz1hO2ImJmcuamMucHVzaChiKTt0aHJvdyBnO31RZChhKTtWYyhkLmlkLGgsIjciKTtjfHwoYz0hMCxsKCkpfTt0cnl7VmIoYixnKX1jYXRjaChNKXt0cnl7ZT0hMCxnKE0pfWNhdGNoKEYpe319fX0KdmFyIGg9T2JbYV0saz1jLkksbD1jLk8sbT1jLnRlcm1pbmF0ZTtpZihkLmRhKGgpKXJldHVybiBudWxsO3ZhciBwPVdiKGhbUC5vZF0sZC5kYSxbXSxtYSk7aWYocCYmcC5sZW5ndGgpe3ZhciBxPXBbMF0scj1SZChxLmluZGV4LGIse0k6ayxPOmwsdGVybWluYXRlOm19LGQsZSk7aWYoIXIpcmV0dXJuIG51bGw7az1yO2w9Mj09PXEud2Q/bTpyfWlmKGhbUC5tZF18fGhbUC5CZV0pe3ZhciB3PWhbUC5tZF0/UGI6Yix2PWssdT1sO2lmKCF3W2FdKXtnPUNhKGcpO3ZhciB6PVRkKGEsdyxnKTtrPXouSTtsPXouT31yZXR1cm4gZnVuY3Rpb24oKXt3W2FdKHYsdSl9fXJldHVybiBnfWZ1bmN0aW9uIFRkKGEsYixjKXt2YXIgZD1bXSxlPVtdO2JbYV09VWQoZCxlLGMpO3JldHVybntJOmZ1bmN0aW9uKCl7YlthXT1WZDtmb3IodmFyIGM9MDtjPGQubGVuZ3RoO2MrKylkW2NdKCl9LE86ZnVuY3Rpb24oKXtiW2FdPVdkO2Zvcih2YXIgYz0wO2M8ZS5sZW5ndGg7YysrKWVbY10oKX19fQpmdW5jdGlvbiBVZChhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGQsZSl7YS5wdXNoKGQpO2IucHVzaChlKTtjKCl9fWZ1bmN0aW9uIFZkKGEpe2EoKX1mdW5jdGlvbiBXZChhLGIpe2IoKX07ZnVuY3Rpb24gWGQoYSl7dmFyIGI9MCxjPTAsZD0hMTtyZXR1cm57YWRkOmZ1bmN0aW9uKCl7YysrO3JldHVybiBDYShmdW5jdGlvbigpe2IrKztkJiZiPj1jJiZhKCl9KX0sUWU6ZnVuY3Rpb24oKXtkPSEwO2I+PWMmJmEoKX19fXZhciAkZD1mdW5jdGlvbihhKXtmb3IodmFyIGI9WGQoYS5jYWxsYmFjayksYz1bXSxkPVtdLGU9MDtlPE9iLmxlbmd0aDtlKyspaWYoYS5WYVtlXSl7dmFyIGc9T2JbZV07dmFyIGg9Yi5hZGQoKTt0cnl7dmFyIGs9UmQoZSxjLHtJOmgsTzpoLHRlcm1pbmF0ZTpofSxhLGUpO2s/ZC5wdXNoKHtXZDplLGI6WWIoZyksdWY6a30pOihZZChlLGEpLGgoKSl9Y2F0Y2gobSl7aCgpfX1iLlFlKCk7ZC5zb3J0KFpkKTtmb3IodmFyIGw9MDtsPGQubGVuZ3RoO2wrKylkW2xdLnVmKCk7cmV0dXJuIDA8ZC5sZW5ndGh9OwpmdW5jdGlvbiBaZChhLGIpe3ZhciBjLGQ9Yi5iLGU9YS5iO2M9ZD5lPzE6ZDxlPy0xOjA7dmFyIGc7aWYoMCE9PWMpZz1jO2Vsc2V7dmFyIGg9YS5XZCxrPWIuV2Q7Zz1oPms/MTpoPGs/LTE6MH1yZXR1cm4gZ31mdW5jdGlvbiBZZChhLGIpe2lmKCFTYylyZXR1cm47dmFyIGM9ZnVuY3Rpb24oYSl7dmFyIGQ9Yi5kYShPYlthXSk/IjMiOiI0IixnPVdiKE9iW2FdW1AubmRdLGIuZGEsW10sbWEpO2cmJmcubGVuZ3RoJiZjKGdbMF0uaW5kZXgpO1ZjKGIuaWQsT2JbYV0sZCk7dmFyIGg9V2IoT2JbYV1bUC5vZF0sYi5kYSxbXSxtYSk7aCYmaC5sZW5ndGgmJmMoaFswXS5pbmRleCl9O2MoYSk7fQp2YXIgYWU9ITEsYmU9ZnVuY3Rpb24oYSxiLGMsZCl7aWYoImd0bS5qcyI9PWIpe2lmKGFlKXJldHVybiExO2FlPSEwfVVjKGEsYik7dmFyIGU9bWQoYyksZz17aWQ6YSxuYW1lOmIsY2FsbGJhY2s6ZHx8bWEsZGE6ZSxWYTpbXX07Zy5WYT1jYyhlLG9kKGZ1bmN0aW9uKGEpe1FkKGEpfSkpO3ZhciBoPSRkKGcpOyJndG0uanMiIT09YiYmImd0bS5zeW5jIiE9PWJ8fElkKCk7aWYoIWgpcmV0dXJuIGg7Zm9yKHZhciBrPXtfX2NsOiEwLF9fZWNsOiEwLF9fZXZsOiEwLF9fZnNsOiEwLF9faGw6ITAsX19qZWw6ITAsX19sY2w6ITAsX19zZGw6ITAsX190bDohMCxfX3l0bDohMH0sbD0wO2w8Zy5WYS5sZW5ndGg7bCsrKWlmKGcuVmFbbF0pe3ZhciBtPQpPYltsXTtpZihtJiYha1ttW1AucWFdXSlyZXR1cm4hMH1yZXR1cm4hMX07dmFyIGNlPWZ1bmN0aW9uKGEsYil7dmFyIGM9VWIoYSxiKTtPYi5wdXNoKGMpO3JldHVybiBPYi5sZW5ndGgtMX07dmFyIFE9e1BiOiJldmVudF9jYWxsYmFjayIsUmI6ImV2ZW50X3RpbWVvdXQifTsKUS5aPSJndGFnLmNvbmZpZyIsUS5NYj0icGFnZV92aWV3IixRLlpkPSJ1c2VyX2VuZ2FnZW1lbnQiLFEuUj0iYWxsb3dfYWRfcGVyc29uYWxpemF0aW9uX3NpZ25hbHMiLFEuJGQ9ImFsbG93X2N1c3RvbV9zY3JpcHRzIixRLmFlPSJhbGxvd19kaXNwbGF5X2ZlYXR1cmVzIixRLmJlPSJhbGxvd19lbmhhbmNlZF9jb252ZXJzaW9ucyIsUS5hYj0iY2xpZW50X2lkIixRLk49ImNvb2tpZV9kb21haW4iLFEuVD0iY29va2llX2V4cGlyZXMiLFEuY2I9ImNvb2tpZV9uYW1lIixRLm1hPSJjb29raWVfcGF0aCIsUS5kZT0iY29va2llX3VwZGF0ZSIsUS5uYT0iY3VycmVuY3kiLFEuZWI9ImN1c3RvbV9wYXJhbXMiLFEuZmU9ImN1c3RvbV9tYXAiLFEuVGI9Imdyb3VwcyIsUS5IYT0ibGFuZ3VhZ2UiLFEuZWU9ImNvdW50cnkiLFEuQmc9Im5vbl9pbnRlcmFjdGlvbiIsUS5qYj0icGFnZV9sb2NhdGlvbiIsUS5rYj0icGFnZV9yZWZlcnJlciIsUS5oZD0icGFnZV90aXRsZSIsUS5KYT0ic2VuZF9wYWdlX3ZpZXciLApRLm9hPSJzZW5kX3RvIixRLmxiPSJzZXNzaW9uX2R1cmF0aW9uIixRLlhiPSJzZXNzaW9uX2VuZ2FnZWQiLFEubWI9InNlc3Npb25faWQiLFEuWWI9InNlc3Npb25fbnVtYmVyIixRLndlPSJ0cmFja2luZ19pZCIsUS5uYj0idXNlcl9wcm9wZXJ0aWVzIixRLklhPSJsaW5rZXIiLFEuZ2I9ImFjY2VwdF9pbmNvbWluZyIsUS5IPSJkb21haW5zIixRLmliPSJ1cmxfcG9zaXRpb24iLFEuaGI9ImRlY29yYXRlX2Zvcm1zIixRLldiPSJwaG9uZV9jb252ZXJzaW9uX251bWJlciIsUS5VYj0icGhvbmVfY29udmVyc2lvbl9jYWxsYmFjayIsUS5WYj0icGhvbmVfY29udmVyc2lvbl9jc3NfY2xhc3MiLFEuamQ9InBob25lX2NvbnZlcnNpb25fb3B0aW9ucyIsUS4kYz0iYXdfcmVtYXJrZXRpbmciLFEuYWQ9ImF3X3JlbWFya2V0aW5nX29ubHkiLFEuYmE9InZhbHVlIixRLnVlPSJxdWFudGl0eSIsUS5qZT0iYWZmaWxpYXRpb24iLFEub2U9InRheCIsUS5uZT0ic2hpcHBpbmciLFEuT2I9Imxpc3RfbmFtZSIsClEuZ2Q9ImNoZWNrb3V0X3N0ZXAiLFEuZmQ9ImNoZWNrb3V0X29wdGlvbiIsUS5rZT0iY291cG9uIixRLm1lPSJwcm9tb3Rpb25zIixRLkthPSJ0cmFuc2FjdGlvbl9pZCIsUS5hYT0idXNlcl9pZCIsUS5HYT0iY29udmVyc2lvbl9saW5rZXIiLFEuRmE9ImNvbnZlcnNpb25fY29va2llX3ByZWZpeCIsUS5GPSJjb29raWVfcHJlZml4IixRLlM9Iml0ZW1zIixRLk5iPSJhd19tZXJjaGFudF9pZCIsUS5jZD0iYXdfZmVlZF9jb3VudHJ5IixRLmRkPSJhd19mZWVkX2xhbmd1YWdlIixRLmJkPSJkaXNjb3VudCIsUS5lZD0iZGlzYWJsZV9tZXJjaGFudF9yZXBvcnRlZF9wdXJjaGFzZXMiLFEuaWU9ImRjX25hdHVyYWxfc2VhcmNoIixRLmhlPSJkY19jdXN0b21fcGFyYW1zIixRLnhlPSJ0cmlwX3R5cGUiLFEudGU9InBhc3NlbmdlcnMiLFEucWU9Im1ldGhvZCIsUS52ZT0ic2VhcmNoX3Rlcm0iLFEuY2U9ImNvbnRlbnRfdHlwZSIsUS5zZT0ib3B0aW1pemVfaWQiLFEucGU9ImV4cGVyaW1lbnRzIiwKUS5mYj0iZ29vZ2xlX3NpZ25hbHMiLFEuU2I9Imdvb2dsZV90bGQiLFEuUWI9ImV2ZW50X3NldHRpbmdzIixRLmtkPVtRLlIsUS5OLFEuVCxRLmNiLFEubWEsUS5GLFEuZWIsUS5QYixRLlFiLFEuUmIsUS5mYixRLlNiLFEuVGIsUS5vYSxRLkphLFEubGIsUS5hYSxRLm5iXSxRLlVjPVtRLm9hLFEuJGMsUS5hZCxRLmViLFEuSmEsUS5IYSxRLmJhLFEubmEsUS5LYSxRLmFhLFEuR2EsUS5GYSxRLkYsUS5qYixRLmtiLFEuV2IsUS5VYixRLlZiLFEuamQsUS5TLFEuTmIsUS5jZCxRLmRkLFEuYmQsUS5lZCxRLlJdO3ZhciBkZT17fTt2YXIgZWU9L1tBLVpdKy8sZmU9L1xzLyxnZT1mdW5jdGlvbihhKXtpZihmKGEpJiYoYT14YShhKSwhZmUudGVzdChhKSkpe3ZhciBiPWEuaW5kZXhPZigiLSIpO2lmKCEoMD5iKSl7dmFyIGM9YS5zdWJzdHJpbmcoMCxiKTtpZihlZS50ZXN0KGMpKXtmb3IodmFyIGQ9YS5zdWJzdHJpbmcoYisxKS5zcGxpdCgiLyIpLGU9MDtlPGQubGVuZ3RoO2UrKylpZighZFtlXSlyZXR1cm47cmV0dXJue2lkOmEscHJlZml4OmMsY29udGFpbmVySWQ6YysiLSIrZFswXSxjYTpkfX19fX0saWU9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXt9LGM9MDtjPGEubGVuZ3RoOysrYyl7dmFyIGQ9Z2UoYVtjXSk7ZCYmKGJbZC5pZF09ZCl9aGUoYik7dmFyIGU9W107dGEoYixmdW5jdGlvbihhLGIpe2UucHVzaChiKX0pO3JldHVybiBlfTsKZnVuY3Rpb24gaGUoYSl7dmFyIGI9W10sYztmb3IoYyBpbiBhKWlmKGEuaGFzT3duUHJvcGVydHkoYykpe3ZhciBkPWFbY107IkFXIj09PWQucHJlZml4JiZkLmNhWzFdJiZiLnB1c2goZC5jb250YWluZXJJZCl9Zm9yKHZhciBlPTA7ZTxiLmxlbmd0aDsrK2UpZGVsZXRlIGFbYltlXV19O3ZhciBqZT1udWxsLGtlPXt9LGxlPXt9LG1lLG5lPWZ1bmN0aW9uKGEsYil7dmFyIGM9e2V2ZW50OmF9O2ImJihjLmV2ZW50TW9kZWw9dChiKSxiW1EuUGJdJiYoYy5ldmVudENhbGxiYWNrPWJbUS5QYl0pLGJbUS5SYl0mJihjLmV2ZW50VGltZW91dD1iW1EuUmJdKSk7cmV0dXJuIGN9Owp2YXIgb2U9ZnVuY3Rpb24oKXtqZT1qZXx8IUsuZ3RhZ1JlZ2lzdGVyZWQ7Sy5ndGFnUmVnaXN0ZXJlZD0hMDtyZXR1cm4gamV9LHBlPWZ1bmN0aW9uKGEpe2lmKHZvaWQgMD09PWxlW2EuaWRdKXt2YXIgYjtzd2l0Y2goYS5wcmVmaXgpe2Nhc2UgIlVBIjpiPWNlKCJndGFndWEiLHt0cmFja2luZ0lkOmEuaWR9KTticmVhaztjYXNlICJBVyI6Yj1jZSgiZ3RhZ2F3Iix7Y29udmVyc2lvbklkOmF9KTticmVhaztjYXNlICJEQyI6Yj1jZSgiZ3RhZ2ZsIix7dGFyZ2V0SWQ6YS5pZH0pO2JyZWFrO2Nhc2UgIkdGIjpiPWNlKCJndGFnZ2YiLHtjb252ZXJzaW9uSWQ6YX0pO2JyZWFrO2Nhc2UgIkciOmI9Y2UoImdldCIse3RyYWNraW5nSWQ6YS5pZCxpc0F1dG9UYWc6ITB9KTticmVhaztjYXNlICJIQSI6Yj1jZSgiZ3RhZ2hhIix7Y29udmVyc2lvbklkOmF9KTticmVhaztkZWZhdWx0OnJldHVybn1pZighbWUpe3ZhciBjPVViKCJ2Iix7bmFtZToic2VuZF90byIsZGF0YUxheWVyVmVyc2lvbjoyfSk7CkxiLnB1c2goYyk7bWU9WyJtYWNybyIsTGIubGVuZ3RoLTFdfXZhciBkPXthcmcwOm1lLGFyZzE6YS5pZCxpZ25vcmVfY2FzZTohMX07ZFtQLnFhXT0iX2xjIjtOYi5wdXNoKGQpO3ZhciBlPXsiaWYiOltOYi5sZW5ndGgtMV0sYWRkOltiXX07ZVsiaWYiXSYmKGUuYWRkfHxlLmJsb2NrKSYmTWIucHVzaChlKTtsZVthLmlkXT1ifX0scWU9ZnVuY3Rpb24oYSl7dGEoa2UsZnVuY3Rpb24oYixjKXt2YXIgZD1uKGMsYSk7MDw9ZCYmYy5zcGxpY2UoZCwxKX0pfSxyZT1DYShmdW5jdGlvbigpe30pOwp2YXIgc2U9e2NvbmZpZzpmdW5jdGlvbihhKXt2YXIgYj1hWzJdfHx7fTtpZigyPmEubGVuZ3RofHwhZihhWzFdKXx8IUthKGIpKXJldHVybjt2YXIgYz1nZShhWzFdKTtpZighYylyZXR1cm47b2UoKT9wZShjKTpyZSgpO3FlKGMuaWQpO3ZhciBkPWMuaWQsZT1iW1EuVGJdfHwiZGVmYXVsdCI7ZT1lLnRvU3RyaW5nKCkuc3BsaXQoIiwiKTtmb3IodmFyIGc9MDtnPGUubGVuZ3RoO2crKylrZVtlW2ddXT1rZVtlW2ddXXx8W10sa2VbZVtnXV0ucHVzaChkKTtkZWxldGUgYltRLlRiXTtoZCgiZ3RhZy50YXJnZXRzLiIrYy5pZCx2b2lkIDApO2hkKCJndGFnLnRhcmdldHMuIitjLmlkLHQoYikpO3ZhciBoPXt9O2hbUS5vYV09Yy5pZDtyZXR1cm4gbmUoUS5aLGgpO30sZXZlbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9YVsxXTtpZihmKGIpJiYhKDM8YS5sZW5ndGgpKXt2YXIgYztpZigyPGEubGVuZ3RoKXtpZighS2EoYVsyXSkpcmV0dXJuOwpjPWFbMl19dmFyIGQ9bmUoYixjKTt2YXIgZTt2YXIgZz1jLGg9YWQoImd0YWcuZmllbGRzLnNlbmRfdG8iLDIpO2YoaCl8fChoPVEub2EpO3ZhciBrPWcmJmdbaF07dm9pZCAwPT09ayYmKGs9YWQoaCwyKSx2b2lkIDA9PT1rJiYoaz0iZGVmYXVsdCIpKTtpZihmKGspfHxxYShrKSl7Zm9yKHZhciBsPWsudG9TdHJpbmcoKS5yZXBsYWNlKC9ccysvZywiIikuc3BsaXQoIiwiKSxtPVtdLHA9MDtwPGwubGVuZ3RoO3ArKykwPD1sW3BdLmluZGV4T2YoIi0iKT9tLnB1c2gobFtwXSk6bT1tLmNvbmNhdChrZVtsW3BdXXx8W10pO2U9aWUobSl9ZWxzZSBlPXZvaWQgMDt2YXIgcT1lO2lmKCFxKXJldHVybjt2YXIgcj1vZSgpO3J8fHJlKCk7Zm9yKHZhciB3PVtdLHY9MDtyJiZ2PHEubGVuZ3RoO3YrKyl7dmFyIHU9cVt2XTt3LnB1c2godS5pZCk7cGUodSl9ZC5ldmVudE1vZGVsPWQuZXZlbnRNb2RlbHx8e307MDxxLmxlbmd0aD9kLmV2ZW50TW9kZWxbUS5vYV09Cncuam9pbigpOmRlbGV0ZSBkLmV2ZW50TW9kZWxbUS5vYV07cmV0dXJuIGR9fSxqczpmdW5jdGlvbihhKXtpZigyPT1hLmxlbmd0aCYmYVsxXS5nZXRUaW1lKXJldHVybntldmVudDoiZ3RtLmpzIiwiZ3RtLnN0YXJ0IjphWzFdLmdldFRpbWUoKX19LHBvbGljeTpmdW5jdGlvbihhKXtpZigzPT09YS5sZW5ndGgpe3ZhciBiPWFbMV0sYz1hWzJdO2RlW2JdfHwoZGVbYl09W10pO2RlW2JdLnB1c2goYyl9fSxzZXQ6ZnVuY3Rpb24oYSl7dmFyIGI7Mj09YS5sZW5ndGgmJkthKGFbMV0pP2I9dChhWzFdKTozPT1hLmxlbmd0aCYmZihhWzFdKSYmKGI9e30sYlthWzFdXT1hWzJdKTtpZihiKXJldHVybiBiLmV2ZW50TW9kZWw9dChiKSxiLmV2ZW50PSJndGFnLnNldCIsYi5fY2xlYXI9ITAsYn19LHRlPXtwb2xpY3k6ITB9O3ZhciB1ZT1mdW5jdGlvbigpe3JldHVybiExfTt2YXIgemU9ZnVuY3Rpb24oYSl7dGhpcy52Zz1hfTt6ZS5wcm90b3R5cGUuQWY9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52Z307dmFyIEFlPWZ1bmN0aW9uKGEpe3JldHVybiFhfHwib2JqZWN0IiE9PUlhKGEpfHxLYShhKT8hMToiZ2V0VW50cnVzdGVkVXBkYXRlVmFsdWUiaW4gYX07emUucHJvdG90eXBlLmdldFVudHJ1c3RlZFVwZGF0ZVZhbHVlPXplLnByb3RvdHlwZS5BZjt2YXIgQmU9ITEsQ2U9W107ZnVuY3Rpb24gRGUoKXtpZighQmUpe0JlPSEwO2Zvcih2YXIgYT0wO2E8Q2UubGVuZ3RoO2ErKylDKENlW2FdKX19dmFyIEVlPWZ1bmN0aW9uKGEpe0JlP0MoYSk6Q2UucHVzaChhKX07dmFyIEZlPVtdLEdlPSExO2Z1bmN0aW9uIEhlKGEpe3ZhciBiPWEuZXZlbnRDYWxsYmFjayxjPUNhKGZ1bmN0aW9uKCl7bmEoYikmJkMoZnVuY3Rpb24oKXtiKEgubSl9KX0pLGQ9YS5ldmVudFRpbWVvdXQ7ZCYmeC5zZXRUaW1lb3V0KGMsTnVtYmVyKGQpKTtyZXR1cm4gY30KdmFyIEllPWZ1bmN0aW9uKGEpe3JldHVybiB4WyJkYXRhTGF5ZXIiXS5wdXNoKGEpfSxLZT1mdW5jdGlvbihhKXt2YXIgYj1hLl9jbGVhcjt0YShhLGZ1bmN0aW9uKGEsYyl7Il9jbGVhciIhPT1hJiYoYiYmaGQoYSx2b2lkIDApLGhkKGEsYykpfSk7dmFyIGM9YS5ldmVudDtpZighYylyZXR1cm4hMTt2YXIgZD1hWyJndG0udW5pcXVlRXZlbnRJZCJdO2R8fChkPXljKCksYVsiZ3RtLnVuaXF1ZUV2ZW50SWQiXT1kLGhkKCJndG0udW5pcXVlRXZlbnRJZCIsZCkpO3VjPWM7dmFyIGU9SmUoYSk7dWM9bnVsbDtpZighc2Mpe3NjPWFbImd0bS5zdGFydCJdO31yZXR1cm4gZX07CmZ1bmN0aW9uIEplKGEpe3ZhciBiPWEuZXZlbnQsYz1hWyJndG0udW5pcXVlRXZlbnRJZCJdLGQsZT1LLnpvbmVzO2Q9ZT9lLmNoZWNrU3RhdGUoSC5tLGMpOnFkO2lmKCFkLmFjdGl2ZSlyZXR1cm4hMTt2YXIgZz1IZShhKTtyZXR1cm4gYmUoYyxiLGQuaXNXaGl0ZWxpc3RlZCxnKT8hMDohMX0KdmFyIExlPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPSExOyFHZSYmMDxGZS5sZW5ndGg7KXtHZT0hMDtkZWxldGUgWGMuZXZlbnRNb2RlbDskYygpO3ZhciBiPUZlLnNoaWZ0KCk7aWYobnVsbCE9Yil7dmFyIGM9QWUoYik7aWYoYyl7dmFyIGQ9YjtiPUFlKGQpP2QuZ2V0VW50cnVzdGVkVXBkYXRlVmFsdWUoKTp2b2lkIDA7Zm9yKHZhciBlPVsiZ3RtLndoaXRlbGlzdCIsImd0bS5ibGFja2xpc3QiLCJ0YWdUeXBlQmxhY2tsaXN0Il0sZz0wO2c8ZS5sZW5ndGg7ZysrKXt2YXIgaD1lW2ddLGs9YWQoaCwxKTtpZihxYShrKXx8S2Eoaykpaz10KGspO1ljW2hdPWt9fXRyeXtpZihuYShiKSl0cnl7Yi5jYWxsKGJkKX1jYXRjaCh1KXt9ZWxzZSBpZihxYShiKSl7dmFyIGw9YjtpZihmKGxbMF0pKXt2YXIgbT0KbFswXS5zcGxpdCgiLiIpLHA9bS5wb3AoKSxxPWwuc2xpY2UoMSkscj1hZChtLmpvaW4oIi4iKSwyKTtpZih2b2lkIDAhPT1yJiZudWxsIT09cil0cnl7cltwXS5hcHBseShyLHEpfWNhdGNoKHUpe319fWVsc2V7dmFyIHc9YjtpZih3JiYoIltvYmplY3QgQXJndW1lbnRzXSI9PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh3KXx8T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHcsImNhbGxlZSIpKSl7YTp7aWYoYi5sZW5ndGgmJmYoYlswXSkpe3ZhciB2PXNlW2JbMF1dO2lmKHYmJighY3x8IXRlW2JbMF1dKSl7Yj12KGIpO2JyZWFrIGF9fWI9dm9pZCAwfWlmKCFiKXtHZT0hMTtjb250aW51ZX19YT1LZShiKXx8YX19ZmluYWxseXtjJiYkYyghMCl9fUdlPSExfQpyZXR1cm4hYX0sTWU9ZnVuY3Rpb24oKXt2YXIgYT1MZSgpO3RyeXt2YXIgYj1ILm0sYz14WyJkYXRhTGF5ZXIiXS5oaWRlO2lmKGMmJnZvaWQgMCE9PWNbYl0mJmMuZW5kKXtjW2JdPSExO3ZhciBkPSEwLGU7Zm9yKGUgaW4gYylpZihjLmhhc093blByb3BlcnR5KGUpJiYhMD09PWNbZV0pe2Q9ITE7YnJlYWt9ZCYmKGMuZW5kKCksYy5lbmQ9bnVsbCl9fWNhdGNoKGcpe31yZXR1cm4gYX0sTmU9ZnVuY3Rpb24oKXt2YXIgYT1OYSgiZGF0YUxheWVyIixbXSksYj1OYSgiZ29vZ2xlX3RhZ19tYW5hZ2VyIix7fSk7Yj1iWyJkYXRhTGF5ZXIiXT1iWyJkYXRhTGF5ZXIiXXx8e307eGQoZnVuY3Rpb24oKXtiLmd0bURvbXx8KGIuZ3RtRG9tPSEwLGEucHVzaCh7ZXZlbnQ6Imd0bS5kb20ifSkpfSk7RWUoZnVuY3Rpb24oKXtiLmd0bUxvYWR8fChiLmd0bUxvYWQ9ITAsYS5wdXNoKHtldmVudDoiZ3RtLmxvYWQifSkpfSk7dmFyIGM9YS5wdXNoO2EucHVzaD1mdW5jdGlvbigpe3ZhciBiOwppZigwPEsuU0FOREJPWEVEX0pTX1NFTUFQSE9SRSl7Yj1bXTtmb3IodmFyIGU9MDtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKWJbZV09bmV3IHplKGFyZ3VtZW50c1tlXSl9ZWxzZSBiPVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLDApO3ZhciBnPWMuYXBwbHkoYSxiKTtGZS5wdXNoLmFwcGx5KEZlLGIpO2lmKDMwMDx0aGlzLmxlbmd0aClmb3IoRWMoNCk7MzAwPHRoaXMubGVuZ3RoOyl0aGlzLnNoaWZ0KCk7dmFyIGg9ImJvb2xlYW4iIT09dHlwZW9mIGd8fGc7cmV0dXJuIExlKCkmJmh9O0ZlLnB1c2guYXBwbHkoRmUsYS5zbGljZSgwKSk7QyhNZSl9O3ZhciBQZT1mdW5jdGlvbihhKXtyZXR1cm4gT2U/eS5xdWVyeVNlbGVjdG9yQWxsKGEpOm51bGx9LFFlPWZ1bmN0aW9uKGEsYil7aWYoIU9lKXJldHVybiBudWxsO2lmKEVsZW1lbnQucHJvdG90eXBlLmNsb3Nlc3QpdHJ5e3JldHVybiBhLmNsb3Nlc3QoYil9Y2F0Y2goZSl7cmV0dXJuIG51bGx9dmFyIGM9RWxlbWVudC5wcm90b3R5cGUubWF0Y2hlc3x8RWxlbWVudC5wcm90b3R5cGUud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHxFbGVtZW50LnByb3RvdHlwZS5tb3pNYXRjaGVzU2VsZWN0b3J8fEVsZW1lbnQucHJvdG90eXBlLm1zTWF0Y2hlc1NlbGVjdG9yfHxFbGVtZW50LnByb3RvdHlwZS5vTWF0Y2hlc1NlbGVjdG9yLGQ9YTtpZigheS5kb2N1bWVudEVsZW1lbnQuY29udGFpbnMoZCkpcmV0dXJuIG51bGw7ZG97dHJ5e2lmKGMuY2FsbChkLGIpKXJldHVybiBkfWNhdGNoKGUpe2JyZWFrfWQ9ZC5wYXJlbnRFbGVtZW50fHxkLnBhcmVudE5vZGV9d2hpbGUobnVsbCE9PWQmJjE9PT1kLm5vZGVUeXBlKTsKcmV0dXJuIG51bGx9LFJlPSExO2lmKHkucXVlcnlTZWxlY3RvckFsbCl0cnl7dmFyIFNlPXkucXVlcnlTZWxlY3RvckFsbCgiOnJvb3QiKTtTZSYmMT09U2UubGVuZ3RoJiZTZVswXT09eS5kb2N1bWVudEVsZW1lbnQmJihSZT0hMCl9Y2F0Y2goYSl7fXZhciBPZT1SZTt2YXIgVGU7dmFyIHBmPXt9O3BmLm9iPW5ldyBTdHJpbmcoInVuZGVmaW5lZCIpOwp2YXIgcWY9ZnVuY3Rpb24oYSl7dGhpcy5yZXNvbHZlPWZ1bmN0aW9uKGIpe2Zvcih2YXIgYz1bXSxkPTA7ZDxhLmxlbmd0aDtkKyspYy5wdXNoKGFbZF09PT1wZi5vYj9iOmFbZF0pO3JldHVybiBjLmpvaW4oIiIpfX07cWYucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVzb2x2ZSgidW5kZWZpbmVkIil9O3FmLnByb3RvdHlwZS52YWx1ZU9mPXFmLnByb3RvdHlwZS50b1N0cmluZztwZi5EZT1xZjtwZi4kYj17fTtwZi5rZj1mdW5jdGlvbihhKXtyZXR1cm4gbmV3IHFmKGEpfTt2YXIgcmY9e307cGYuaGc9ZnVuY3Rpb24oYSxiKXt2YXIgYz15YygpO3JmW2NdPVthLGJdO3JldHVybiBjfTtwZi50ZD1mdW5jdGlvbihhKXt2YXIgYj1hPzA6MTtyZXR1cm4gZnVuY3Rpb24oYSl7dmFyIGM9cmZbYV07aWYoYyYmImZ1bmN0aW9uIj09PXR5cGVvZiBjW2JdKWNbYl0oKTtyZlthXT12b2lkIDB9fTtwZi5OZj1mdW5jdGlvbihhKXtmb3IodmFyIGI9ITEsYz0hMSwKZD0yO2Q8YS5sZW5ndGg7ZCsrKWI9Ynx8OD09PWFbZF0sYz1jfHwxNj09PWFbZF07cmV0dXJuIGImJmN9O3BmLllmPWZ1bmN0aW9uKGEpe2lmKGE9PT1wZi5vYilyZXR1cm4gYTt2YXIgYj15YygpO3BmLiRiW2JdPWE7cmV0dXJuJ2dvb2dsZV90YWdfbWFuYWdlclsiJytILm0rJyJdLm1hY3JvKCcrYisiKSJ9O3BmLlJmPWZ1bmN0aW9uKGEsYixjKXthIGluc3RhbmNlb2YgcGYuRGUmJihhPWEucmVzb2x2ZShwZi5oZyhiLGMpKSxiPW1hKTtyZXR1cm57b2M6YSxJOmJ9fTt2YXIgc2Y9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXtldmVudDpiLCJndG0uZWxlbWVudCI6YSwiZ3RtLmVsZW1lbnRDbGFzc2VzIjphLmNsYXNzTmFtZSwiZ3RtLmVsZW1lbnRJZCI6YVsiZm9yIl18fFVhKGEsImlkIil8fCIiLCJndG0uZWxlbWVudFRhcmdldCI6YS5mb3JtVGFyZ2V0fHxhLnRhcmdldHx8IiJ9O2MmJihkWyJndG0udHJpZ2dlcnMiXT1jLmpvaW4oIiwiKSk7ZFsiZ3RtLmVsZW1lbnRVcmwiXT0oYS5hdHRyaWJ1dGVzJiZhLmF0dHJpYnV0ZXMuZm9ybWFjdGlvbj9hLmZvcm1BY3Rpb246IiIpfHxhLmFjdGlvbnx8YS5ocmVmfHxhLnNyY3x8YS5jb2RlfHxhLmNvZGViYXNlfHwiIjtyZXR1cm4gZH0sdGY9ZnVuY3Rpb24oYSl7Sy5oYXNPd25Qcm9wZXJ0eSgiYXV0b0V2ZW50c1NldHRpbmdzIil8fChLLmF1dG9FdmVudHNTZXR0aW5ncz17fSk7dmFyIGI9Sy5hdXRvRXZlbnRzU2V0dGluZ3M7Yi5oYXNPd25Qcm9wZXJ0eShhKXx8KGJbYV09e30pO3JldHVybiBiW2FdfSx1Zj0KZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9dGYoYSksZz1CYShlLGIsZCk7ZVtiXT1jKGcpfSx2Zj1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGYoYSk7cmV0dXJuIEJhKGQsYixjKX07dmFyIHdmPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPUxhLnVzZXJBZ2VudCsoeS5jb29raWV8fCIiKSsoeS5yZWZlcnJlcnx8IiIpLGI9YS5sZW5ndGgsYz14Lmhpc3RvcnkubGVuZ3RoOzA8YzspYSs9Yy0tXmIrKzt2YXIgZD0xLGUsZyxoO2lmKGEpZm9yKGQ9MCxnPWEubGVuZ3RoLTE7MDw9ZztnLS0paD1hLmNoYXJDb2RlQXQoZyksZD0oZDw8NiYyNjg0MzU0NTUpK2grKGg8PDE0KSxlPWQmMjY2MzM4MzA0LGQ9MCE9ZT9kXmU+PjIxOmQ7cmV0dXJuW01hdGgucm91bmQoMjE0NzQ4MzY0NypNYXRoLnJhbmRvbSgpKV5kJjIxNDc0ODM2NDcsTWF0aC5yb3VuZCh5YSgpLzFFMyldLmpvaW4oIi4iKX0semY9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9eGYoYik7cmV0dXJuIGpiKGEsZSx5ZihjKSxkKX0seGY9ZnVuY3Rpb24oYSl7aWYoIWEpcmV0dXJuIDE7YT0wPT09YS5pbmRleE9mKCIuIik/YS5zdWJzdHIoMSk6YTtyZXR1cm4gYS5zcGxpdCgiLiIpLmxlbmd0aH0seWY9ZnVuY3Rpb24oYSl7aWYoIWF8fAoiLyI9PT1hKXJldHVybiAxOyIvIiE9PWFbMF0mJihhPSIvIithKTsiLyIhPT1hW2EubGVuZ3RoLTFdJiYoYSs9Ii8iKTtyZXR1cm4gYS5zcGxpdCgiLyIpLmxlbmd0aC0xfTtmdW5jdGlvbiBBZihhLGIpe3ZhciBjPSIiK3hmKGEpLGQ9eWYoYik7MTxkJiYoYys9Ii0iK2QpO3JldHVybiBjfTt2YXIgQmY9WyIxIl0sQ2Y9e30sR2Y9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9RGYoYSk7Q2ZbZV18fEVmKGUsYixjKXx8KEZmKGUsd2YoKSxiLGMsZCksRWYoZSxiLGMpKX07ZnVuY3Rpb24gRmYoYSxiLGMsZCxlKXt2YXIgZztnPVsiMSIsQWYoZCxjKSxiXS5qb2luKCIuIik7bmIoYSxnLGMsZCwwPT1lP3ZvaWQgMDpuZXcgRGF0ZSh5YSgpKzFFMyoodm9pZCAwPT1lPzc3NzZFMzplKSkpfWZ1bmN0aW9uIEVmKGEsYixjKXt2YXIgZD16ZihhLGIsYyxCZik7ZCYmKENmW2FdPWQpO3JldHVybiBkfWZ1bmN0aW9uIERmKGEpe3JldHVybihhfHwiX2djbCIpKyJfYXUifTt2YXIgSGY9ZnVuY3Rpb24oKXtmb3IodmFyIGE9W10sYj15LmNvb2tpZS5zcGxpdCgiOyIpLGM9L15ccypfZ2FjXyhVQS1cZCstXGQrKT1ccyooLis/KVxzKiQvLGQ9MDtkPGIubGVuZ3RoO2QrKyl7dmFyIGU9YltkXS5tYXRjaChjKTtlJiZhLnB1c2goe05jOmVbMV0sdmFsdWU6ZVsyXX0pfXZhciBnPXt9O2lmKCFhfHwhYS5sZW5ndGgpcmV0dXJuIGc7Zm9yKHZhciBoPTA7aDxhLmxlbmd0aDtoKyspe3ZhciBrPWFbaF0udmFsdWUuc3BsaXQoIi4iKTsiMSI9PWtbMF0mJjM9PWsubGVuZ3RoJiZrWzFdJiYoZ1thW2hdLk5jXXx8KGdbYVtoXS5OY109W10pLGdbYVtoXS5OY10ucHVzaCh7dGltZXN0YW1wOmtbMV0seGY6a1syXX0pKX1yZXR1cm4gZ307ZnVuY3Rpb24gSWYoKXtmb3IodmFyIGE9SmYsYj17fSxjPTA7YzxhLmxlbmd0aDsrK2MpYlthW2NdXT1jO3JldHVybiBifWZ1bmN0aW9uIEtmKCl7dmFyIGE9IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaIjthKz1hLnRvTG93ZXJDYXNlKCkrIjAxMjM0NTY3ODktXyI7cmV0dXJuIGErIi4ifQp2YXIgSmYsTGYsTWY9ZnVuY3Rpb24oYSl7SmY9SmZ8fEtmKCk7TGY9TGZ8fElmKCk7Zm9yKHZhciBiPVtdLGM9MDtjPGEubGVuZ3RoO2MrPTMpe3ZhciBkPWMrMTxhLmxlbmd0aCxlPWMrMjxhLmxlbmd0aCxnPWEuY2hhckNvZGVBdChjKSxoPWQ/YS5jaGFyQ29kZUF0KGMrMSk6MCxrPWU/YS5jaGFyQ29kZUF0KGMrMik6MCxsPWc+PjIsbT0oZyYzKTw8NHxoPj40LHA9KGgmMTUpPDwyfGs+PjYscT1rJjYzO2V8fChxPTY0LGR8fChwPTY0KSk7Yi5wdXNoKEpmW2xdLEpmW21dLEpmW3BdLEpmW3FdKX1yZXR1cm4gYi5qb2luKCIiKX0sTmY9ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihiKXtmb3IoO2Q8YS5sZW5ndGg7KXt2YXIgYz1hLmNoYXJBdChkKyspLGU9TGZbY107aWYobnVsbCE9ZSlyZXR1cm4gZTtpZighL15bXHNceGEwXSokLy50ZXN0KGMpKXRocm93IEVycm9yKCJVbmtub3duIGJhc2U2NCBlbmNvZGluZyBhdCBjaGFyOiAiK2MpO31yZXR1cm4gYn1KZj1KZnx8S2YoKTtMZj1MZnx8CklmKCk7Zm9yKHZhciBjPSIiLGQ9MDs7KXt2YXIgZT1iKC0xKSxnPWIoMCksaD1iKDY0KSxrPWIoNjQpO2lmKDY0PT09ayYmLTE9PT1lKXJldHVybiBjO2MrPVN0cmluZy5mcm9tQ2hhckNvZGUoZTw8MnxnPj40KTs2NCE9aCYmKGMrPVN0cmluZy5mcm9tQ2hhckNvZGUoZzw8NCYyNDB8aD4+MiksNjQhPWsmJihjKz1TdHJpbmcuZnJvbUNoYXJDb2RlKGg8PDYmMTkyfGspKSl9fTt2YXIgT2Y7ZnVuY3Rpb24gUGYoYSxiKXtpZighYXx8Yj09PXkubG9jYXRpb24uaG9zdG5hbWUpcmV0dXJuITE7Zm9yKHZhciBjPTA7YzxhLmxlbmd0aDtjKyspaWYoYVtjXWluc3RhbmNlb2YgUmVnRXhwKXtpZihhW2NdLnRlc3QoYikpcmV0dXJuITB9ZWxzZSBpZigwPD1iLmluZGV4T2YoYVtjXSkpcmV0dXJuITA7cmV0dXJuITF9dmFyIFFmPWZ1bmN0aW9uKCl7dmFyIGE9TmEoImdvb2dsZV90YWdfZGF0YSIse30pLGI9YS5nbDtiJiZiLmRlY29yYXRvcnN8fChiPXtkZWNvcmF0b3JzOltdfSxhLmdsPWIpO3JldHVybiBifTt2YXIgUmY9LyguKj8pXCooLio/KVwqKC4qKS8sU2Y9L15odHRwcz86XC9cLyhbXlwvXSo/KVwuP2NkblwuYW1wcHJvamVjdFwub3JnXC8/KC4qKS8sVGY9L14oPzp3d3dcLnxtXC58YW1wXC4pKy8sVWY9LyhbXj8jXSspKFw/W14jXSopPygjLiopPy8sVmY9LyguKj8pKF58JilfZ2w9KFteJl0qKSY/KC4qKS8sWGY9ZnVuY3Rpb24oYSl7dmFyIGI9W10sYztmb3IoYyBpbiBhKWlmKGEuaGFzT3duUHJvcGVydHkoYykpe3ZhciBkPWFbY107dm9pZCAwIT09ZCYmZD09PWQmJm51bGwhPT1kJiYiW29iamVjdCBPYmplY3RdIiE9PWQudG9TdHJpbmcoKSYmKGIucHVzaChjKSxiLnB1c2goTWYoU3RyaW5nKGQpKSkpfXZhciBlPWIuam9pbigiKiIpO3JldHVyblsiMSIsV2YoZSksZV0uam9pbigiKiIpfSxXZj1mdW5jdGlvbihhLGIpe3ZhciBjPVt3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCwobmV3IERhdGUpLmdldFRpbWV6b25lT2Zmc2V0KCksd2luZG93Lm5hdmlnYXRvci51c2VyTGFuZ3VhZ2V8fAp3aW5kb3cubmF2aWdhdG9yLmxhbmd1YWdlLE1hdGguZmxvb3IoKG5ldyBEYXRlKS5nZXRUaW1lKCkvNjAvMUUzKS0odm9pZCAwPT09Yj8wOmIpLGFdLmpvaW4oIioiKSxkO2lmKCEoZD1PZikpe2Zvcih2YXIgZT1BcnJheSgyNTYpLGc9MDsyNTY+ZztnKyspe2Zvcih2YXIgaD1nLGs9MDs4Pms7aysrKWg9aCYxP2g+Pj4xXjM5ODgyOTIzODQ6aD4+PjE7ZVtnXT1ofWQ9ZX1PZj1kO2Zvcih2YXIgbD00Mjk0OTY3Mjk1LG09MDttPGMubGVuZ3RoO20rKylsPWw+Pj44Xk9mWyhsXmMuY2hhckNvZGVBdChtKSkmMjU1XTtyZXR1cm4oKGxeLTEpPj4+MCkudG9TdHJpbmcoMzYpfSxaZj1mdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihhKXt2YXIgYj1mYih4LmxvY2F0aW9uLmhyZWYpLGM9Yi5zZWFyY2gucmVwbGFjZSgiPyIsIiIpLGQ9Y2IoYywiX2dsIiwhMCl8fCIiO2EucXVlcnk9WWYoZCl8fHt9O3ZhciBlPUQoYiwiZnJhZ21lbnQiKS5tYXRjaChWZik7YS5mcmFnbWVudD1ZZihlJiZlWzNdfHwKIiIpfHx7fX19LFlmPWZ1bmN0aW9uKGEpe3ZhciBiO2I9dm9pZCAwPT09Yj8zOmI7dHJ5e2lmKGEpe3ZhciBjO2E6e2Zvcih2YXIgZD1hLGU9MDszPmU7KytlKXt2YXIgZz1SZi5leGVjKGQpO2lmKGcpe2M9ZzticmVhayBhfWQ9ZGVjb2RlVVJJQ29tcG9uZW50KGQpfWM9dm9pZCAwfXZhciBoPWM7aWYoaCYmIjEiPT09aFsxXSl7dmFyIGs9aFszXSxsO2E6e2Zvcih2YXIgbT1oWzJdLHA9MDtwPGI7KytwKWlmKG09PT1XZihrLHApKXtsPSEwO2JyZWFrIGF9bD0hMX1pZihsKXtmb3IodmFyIHE9e30scj1rP2suc3BsaXQoIioiKTpbXSx3PTA7dzxyLmxlbmd0aDt3Kz0yKXFbclt3XV09TmYoclt3KzFdKTtyZXR1cm4gcX19fX1jYXRjaCh2KXt9fTsKZnVuY3Rpb24gJGYoYSxiLGMpe2Z1bmN0aW9uIGQoYSl7dmFyIGI9YSxjPVZmLmV4ZWMoYiksZD1iO2lmKGMpe3ZhciBlPWNbMl0sZz1jWzRdO2Q9Y1sxXTtnJiYoZD1kK2UrZyl9YT1kO3ZhciBoPWEuY2hhckF0KGEubGVuZ3RoLTEpO2EmJiImIiE9PWgmJihhKz0iJiIpO3JldHVybiBhK2x9Yz12b2lkIDA9PT1jPyExOmM7dmFyIGU9VWYuZXhlYyhiKTtpZighZSlyZXR1cm4iIjt2YXIgZz1lWzFdLGg9ZVsyXXx8IiIsaz1lWzNdfHwiIixsPSJfZ2w9IithO2M/az0iIyIrZChrLnN1YnN0cmluZygxKSk6aD0iPyIrZChoLnN1YnN0cmluZygxKSk7cmV0dXJuIiIrZytoK2t9CmZ1bmN0aW9uIGFnKGEsYixjKXtmb3IodmFyIGQ9e30sZT17fSxnPVFmKCkuZGVjb3JhdG9ycyxoPTA7aDxnLmxlbmd0aDsrK2gpe3ZhciBrPWdbaF07KCFjfHxrLmZvcm1zKSYmUGYoay5kb21haW5zLGIpJiYoay5mcmFnbWVudD9EYShlLGsuY2FsbGJhY2soKSk6RGEoZCxrLmNhbGxiYWNrKCkpKX1pZihGYShkKSl7dmFyIGw9WGYoZCk7aWYoYyl7aWYoYSYmYS5hY3Rpb24pe3ZhciBtPShhLm1ldGhvZHx8IiIpLnRvTG93ZXJDYXNlKCk7aWYoImdldCI9PT1tKXtmb3IodmFyIHA9YS5jaGlsZE5vZGVzfHxbXSxxPSExLHI9MDtyPHAubGVuZ3RoO3IrKyl7dmFyIHc9cFtyXTtpZigiX2dsIj09PXcubmFtZSl7dy5zZXRBdHRyaWJ1dGUoInZhbHVlIixsKTtxPSEwO2JyZWFrfX1pZighcSl7dmFyIHY9eS5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO3Yuc2V0QXR0cmlidXRlKCJ0eXBlIiwiaGlkZGVuIik7di5zZXRBdHRyaWJ1dGUoIm5hbWUiLCJfZ2wiKTt2LnNldEF0dHJpYnV0ZSgidmFsdWUiLApsKTthLmFwcGVuZENoaWxkKHYpfX1lbHNlIGlmKCJwb3N0Ij09PW0pe3ZhciB1PSRmKGwsYS5hY3Rpb24pO1phLnRlc3QodSkmJihhLmFjdGlvbj11KX19fWVsc2UgYmcobCxhLCExKX1pZighYyYmRmEoZSkpe3ZhciB6PVhmKGUpO2JnKHosYSwhMCl9fWZ1bmN0aW9uIGJnKGEsYixjKXtpZihiLmhyZWYpe3ZhciBkPSRmKGEsYi5ocmVmLHZvaWQgMD09PWM/ITE6Yyk7WmEudGVzdChkKSYmKGIuaHJlZj1kKX19CnZhciBjZz1mdW5jdGlvbihhKXt0cnl7dmFyIGI7YTp7Zm9yKHZhciBjPWEudGFyZ2V0fHxhLnNyY0VsZW1lbnR8fHt9LGQ9MTAwO2MmJjA8ZDspe2lmKGMuaHJlZiYmYy5ub2RlTmFtZS5tYXRjaCgvXmEoPzpyZWEpPyQvaSkpe2I9YzticmVhayBhfWM9Yy5wYXJlbnROb2RlO2QtLX1iPW51bGx9dmFyIGU9YjtpZihlKXt2YXIgZz1lLnByb3RvY29sOyJodHRwOiIhPT1nJiYiaHR0cHM6IiE9PWd8fGFnKGUsZS5ob3N0bmFtZSwhMSl9fWNhdGNoKGgpe319LGRnPWZ1bmN0aW9uKGEpe3RyeXt2YXIgYj1hLnRhcmdldHx8YS5zcmNFbGVtZW50fHx7fTtpZihiLmFjdGlvbil7dmFyIGM9RChmYihiLmFjdGlvbiksImhvc3QiKTthZyhiLGMsITApfX1jYXRjaChkKXt9fSxlZz1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1RZigpO2UuaW5pdHx8KEEoeSwibW91c2Vkb3duIixjZyksQSh5LCJrZXl1cCIsY2cpLEEoeSwic3VibWl0IixkZyksZS5pbml0PSEwKTt2YXIgZz17Y2FsbGJhY2s6YSxkb21haW5zOmIsCmZyYWdtZW50OiJmcmFnbWVudCI9PT1jLGZvcm1zOiEhZH07UWYoKS5kZWNvcmF0b3JzLnB1c2goZyl9LGZnPWZ1bmN0aW9uKCl7dmFyIGE9eS5sb2NhdGlvbi5ob3N0bmFtZSxiPVNmLmV4ZWMoeS5yZWZlcnJlcik7aWYoIWIpcmV0dXJuITE7dmFyIGM9YlsyXSxkPWJbMV0sZT0iIjtpZihjKXt2YXIgZz1jLnNwbGl0KCIvIiksaD1nWzFdO2U9InMiPT09aD9kZWNvZGVVUklDb21wb25lbnQoZ1syXSk6ZGVjb2RlVVJJQ29tcG9uZW50KGgpfWVsc2UgaWYoZCl7aWYoMD09PWQuaW5kZXhPZigieG4tLSIpKXJldHVybiExO2U9ZC5yZXBsYWNlKC8tL2csIi4iKS5yZXBsYWNlKC9cLlwuL2csIi0iKX1yZXR1cm4gYS5yZXBsYWNlKFRmLCIiKT09PWUucmVwbGFjZShUZiwiIil9LGdnPWZ1bmN0aW9uKGEsYil7cmV0dXJuITE9PT1hPyExOmF8fGJ8fGZnKCl9O3ZhciBoZz0vXlx3KyQvLGlnPS9eW1x3LV0rJC8samc9L15+P1tcdy1dKyQvLGtnPXthdzoiX2F3IixkYzoiX2RjIixnZjoiX2dmIixoYToiX2hhIn07ZnVuY3Rpb24gbGcoYSl7cmV0dXJuIGEmJiJzdHJpbmciPT10eXBlb2YgYSYmYS5tYXRjaChoZyk/YToiX2djbCJ9dmFyIG5nPWZ1bmN0aW9uKCl7dmFyIGE9ZmIoeC5sb2NhdGlvbi5ocmVmKSxiPUQoYSwicXVlcnkiLCExLHZvaWQgMCwiZ2NsaWQiKSxjPUQoYSwicXVlcnkiLCExLHZvaWQgMCwiZ2Nsc3JjIiksZD1EKGEsInF1ZXJ5IiwhMSx2b2lkIDAsImRjbGlkIik7aWYoIWJ8fCFjKXt2YXIgZT1hLmhhc2gucmVwbGFjZSgiIyIsIiIpO2I9Ynx8Y2IoZSwiZ2NsaWQiLHZvaWQgMCk7Yz1jfHxjYihlLCJnY2xzcmMiLHZvaWQgMCl9cmV0dXJuIG1nKGIsYyxkKX07CmZ1bmN0aW9uIG1nKGEsYixjKXt2YXIgZD17fSxlPWZ1bmN0aW9uKGEsYil7ZFtiXXx8KGRbYl09W10pO2RbYl0ucHVzaChhKX07aWYodm9pZCAwIT09YSYmYS5tYXRjaChpZykpc3dpdGNoKGIpe2Nhc2Ugdm9pZCAwOmUoYSwiYXciKTticmVhaztjYXNlICJhdy5kcyI6ZShhLCJhdyIpO2UoYSwiZGMiKTticmVhaztjYXNlICJkcyI6ZShhLCJkYyIpO2JyZWFrO2Nhc2UgImdmIjplKGEsImdmIik7YnJlYWs7Y2FzZSAiaGEiOmUoYSwiaGEiKX1jJiZlKGMsImRjIik7cmV0dXJuIGR9CmZ1bmN0aW9uIG9nKGEsYixjKXtmdW5jdGlvbiBkKGEsYil7dmFyIGM9cGcoYSxlKTtjJiZuYihjLGIsaCxnLGwsITApfWI9Ynx8e307dmFyIGU9bGcoYi5wcmVmaXgpLGc9Yi5kb21haW58fCJhdXRvIixoPWIucGF0aHx8Ii8iLGs9dm9pZCAwPT1iLkpkPzc3NzZFMzpiLkpkO2M9Y3x8eWEoKTt2YXIgbD0wPT1rP3ZvaWQgMDpuZXcgRGF0ZShjKzFFMyprKSxtPU1hdGgucm91bmQoYy8xRTMpLHA9ZnVuY3Rpb24oYSl7cmV0dXJuWyJHQ0wiLG0sYV0uam9pbigiLiIpfTthLmF3JiYoITA9PT1iLmJoP2QoImF3IixwKCJ+IithLmF3WzBdKSk6ZCgiYXciLHAoYS5hd1swXSkpKTthLmRjJiZkKCJkYyIscChhLmRjWzBdKSk7YS5nZiYmZCgiZ2YiLHAoYS5nZlswXSkpO2EuaGEmJmQoImhhIixwKGEuaGFbMF0pKX0KdmFyIHBnPWZ1bmN0aW9uKGEsYil7dmFyIGM9a2dbYV07aWYodm9pZCAwIT09YylyZXR1cm4gYitjfSxxZz1mdW5jdGlvbihhKXt2YXIgYj1hLnNwbGl0KCIuIik7cmV0dXJuIDMhPT1iLmxlbmd0aHx8IkdDTCIhPT1iWzBdPzA6MUUzKihOdW1iZXIoYlsxXSl8fDApfTtmdW5jdGlvbiByZyhhKXt2YXIgYj1hLnNwbGl0KCIuIik7aWYoMz09Yi5sZW5ndGgmJiJHQ0wiPT1iWzBdJiZiWzFdKXJldHVybiBiWzJdfQp2YXIgc2c9ZnVuY3Rpb24oYSxiLGMsZCxlKXtpZihxYShiKSl7dmFyIGc9bGcoZSk7ZWcoZnVuY3Rpb24oKXtmb3IodmFyIGI9e30sYz0wO2M8YS5sZW5ndGg7KytjKXt2YXIgZD1wZyhhW2NdLGcpO2lmKGQpe3ZhciBlPWdiKGQseS5jb29raWUpO2UubGVuZ3RoJiYoYltkXT1lLnNvcnQoKVtlLmxlbmd0aC0xXSl9fXJldHVybiBifSxiLGMsZCl9fSx0Zz1mdW5jdGlvbihhKXtyZXR1cm4gYS5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuIGpnLnRlc3QoYSl9KX0sdWc9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9bGcoYiYmYi5wcmVmaXgpLGQ9e30sZT0wO2U8YS5sZW5ndGg7ZSsrKWtnW2FbZV1dJiYoZFthW2VdXT1rZ1thW2VdXSk7dGEoZCxmdW5jdGlvbihhLGQpe3ZhciBlPWdiKGMrZCx5LmNvb2tpZSk7aWYoZS5sZW5ndGgpe3ZhciBnPWVbMF0saD1xZyhnKSxwPXt9O3BbYV09W3JnKGcpXTtvZyhwLGIsaCl9fSl9O3ZhciB2Zz0vXlxkK1wuZmxzXC5kb3VibGVjbGlja1wubmV0JC87ZnVuY3Rpb24gd2coYSl7dmFyIGI9ZmIoeC5sb2NhdGlvbi5ocmVmKSxjPUQoYiwiaG9zdCIsITEpO2lmKGMmJmMubWF0Y2godmcpKXt2YXIgZD1EKGIsInBhdGgiKS5zcGxpdChhKyI9Iik7aWYoMTxkLmxlbmd0aClyZXR1cm4gZFsxXS5zcGxpdCgiOyIpWzBdLnNwbGl0KCI/IilbMF19fQpmdW5jdGlvbiB4ZyhhLGIpe2lmKCJhdyI9PWF8fCJkYyI9PWEpe3ZhciBjPXdnKCJnY2wiK2EpO2lmKGMpcmV0dXJuIGMuc3BsaXQoIi4iKX12YXIgZD1sZyhiKTtpZigiX2djbCI9PWQpe3ZhciBlO2U9bmcoKVthXXx8W107aWYoMDxlLmxlbmd0aClyZXR1cm4gZX12YXIgZz1wZyhhLGQpLGg7aWYoZyl7dmFyIGs9W107aWYoeS5jb29raWUpe3ZhciBsPWdiKGcseS5jb29raWUpO2lmKGwmJjAhPWwubGVuZ3RoKXtmb3IodmFyIG09MDttPGwubGVuZ3RoO20rKyl7dmFyIHA9cmcobFttXSk7cCYmLTE9PT1uKGsscCkmJmsucHVzaChwKX1oPXRnKGspfWVsc2UgaD1rfWVsc2UgaD1rfWVsc2UgaD1bXTtyZXR1cm4gaH0KdmFyIHlnPWZ1bmN0aW9uKCl7dmFyIGE9d2coImdhYyIpO2lmKGEpcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChhKTt2YXIgYj1IZigpLGM9W107dGEoYixmdW5jdGlvbihhLGIpe2Zvcih2YXIgZD1bXSxlPTA7ZTxiLmxlbmd0aDtlKyspZC5wdXNoKGJbZV0ueGYpO2Q9dGcoZCk7ZC5sZW5ndGgmJmMucHVzaChhKyI6IitkLmpvaW4oIiwiKSl9KTtyZXR1cm4gYy5qb2luKCI7Iil9LHpnPWZ1bmN0aW9uKGEsYixjLGQsZSl7R2YoYixjLGQsZSk7dmFyIGc9Q2ZbRGYoYildLGg9bmcoKS5kY3x8W10saz0hMTtpZihnJiYwPGgubGVuZ3RoKXt2YXIgbD1LLmpvaW5lZF9hdT1LLmpvaW5lZF9hdXx8e30sbT1ifHwiX2djbCI7aWYoIWxbbV0pZm9yKHZhciBwPTA7cDxoLmxlbmd0aDtwKyspe3ZhciBxPSJodHRwczovL2Fkc2VydmljZS5nb29nbGUuY29tL2RkbS9yZWdjbGsiLHI9cT1xKyI/Z2NsaWQ9IitoW3BdKyImYXVpZGRjPSIrZztMYS5zZW5kQmVhY29uJiZMYS5zZW5kQmVhY29uKHIpfHxTYShyKTtrPWxbbV09CiEwfX1rfD1hO2lmKGsmJmcpe3ZhciB3PURmKGIpLHY9Q2Zbd107diYmRmYodyx2LGMsZCxlKX19O3ZhciBBZztpZigzPT09SC5zYi5sZW5ndGgpQWc9ImciO2Vsc2V7dmFyIEJnPSJHIjtCZz0iZyI7QWc9Qmd9CnZhciBDZz17IiI6Im4iLFVBOiJ1IixBVzoiYSIsREM6ImQiLEc6ImUiLEdGOiJmIixIQToiaCIsR1RNOkFnfSxEZz1mdW5jdGlvbihhKXt2YXIgYj1ILm0uc3BsaXQoIi0iKSxjPWJbMF0udG9VcHBlckNhc2UoKSxkPUNnW2NdfHwiaSIsZT1hJiYiR1RNIj09PWM/YlsxXToiIixnO2lmKDM9PT1ILnNiLmxlbmd0aCl7dmFyIGg9dm9pZCAwO2g9aHx8KHVlKCk/InMiOiJvIik7Zz0iMiIrKGh8fCJ3Iil9ZWxzZSBnPSIiO3JldHVybiBnK2QrSC5zYitlfTsKdmFyIEVnPWZ1bmN0aW9uKGEpe3JldHVybiEodm9pZCAwPT09YXx8bnVsbD09PWF8fDA9PT0oYSsiIikubGVuZ3RoKX0sRmc9ZnVuY3Rpb24oYSxiKXt2YXIgYztpZigyPT09Yi5MKXJldHVybiBhKCJvcmQiLHNhKDFFMTEsMUUxMykpLCEwO2lmKDM9PT1iLkwpcmV0dXJuIGEoIm9yZCIsIjEiKSxhKCJudW0iLHNhKDFFMTEsMUUxMykpLCEwO2lmKDQ9PT1iLkwpcmV0dXJuIEVnKGIuc2Vzc2lvbklkKSYmYSgib3JkIixiLnNlc3Npb25JZCksITA7aWYoNT09PWIuTCljPSIxIjtlbHNlIGlmKDY9PT1iLkwpYz1iLkhjO2Vsc2UgcmV0dXJuITE7RWcoYykmJmEoInF0eSIsYyk7RWcoYi52YikmJmEoImNvc3QiLGIudmIpO0VnKGIudHJhbnNhY3Rpb25JZCkmJmEoIm9yZCIsYi50cmFuc2FjdGlvbklkKTtyZXR1cm4hMH0sR2c9ZW5jb2RlVVJJQ29tcG9uZW50LEhnPWZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhLGIsYyl7Zy5oYXNPd25Qcm9wZXJ0eShhKXx8KGIrPSIiLGUrPSI7IithKyI9IisKKGM/YjpHZyhiKSkpfXZhciBkPWEua2MsZT1hLnByb3RvY29sO2UrPWEuRWI/Ii8vIitkKyIuZmxzLmRvdWJsZWNsaWNrLm5ldC9hY3Rpdml0eWkiOiIvL2FkLmRvdWJsZWNsaWNrLm5ldC9hY3Rpdml0eSI7ZSs9IjtzcmM9IitHZyhkKSsoIjt0eXBlPSIrR2coYS5uYykpKygiO2NhdD0iK0dnKGEuTmEpKTt2YXIgZz1hLm5mfHx7fTt0YShnLGZ1bmN0aW9uKGEsYil7ZSs9IjsiK0dnKGEpKyI9IitHZyhiKyIiKX0pO2lmKEZnKGMsYSkpe0VnKGEuS2IpJiZjKCJ1IixhLktiKTtFZyhhLkpiKSYmYygidHJhbiIsYS5KYik7YygiZ3RtIixEZygpKTshMT09PWEuTWUmJmMoIm5wYSIsIjEiKTtpZihhLmhjKXt2YXIgaD14ZygiZGMiLGEudmEpO2gmJmgubGVuZ3RoJiZjKCJnY2xkYyIsaC5qb2luKCIuIikpO3ZhciBrPXhnKCJhdyIsYS52YSk7ayYmay5sZW5ndGgmJmMoImdjbGF3IixrLmpvaW4oIi4iKSk7dmFyIGw9eWcoKTtsJiZjKCJnYWMiLGwpO0dmKGEudmEsdm9pZCAwLGEuaGYsYS5qZik7CnZhciBtPUNmW0RmKGEudmEpXTttJiZjKCJhdWlkZGMiLG0pfUVnKGEuRGMpJiZjKCJwcmQiLGEuRGMsITApO3RhKGEuUWMsZnVuY3Rpb24oYSxiKXtjKGEsYil9KTtlKz1ifHwiIjtFZyhhLkNiKSYmYygifm9yZWYiLGEuQ2IpO2EuRWI/UmEoZSsiPyIsYS5JKTpTYShlKyI/IixhLkksYS5PKX1lbHNlIEMoYS5PKX07dmFyIEpnPWZ1bmN0aW9uKGEpe3ZhciBiPSIvcGFnZWFkL2NvbnZlcnNpb24vIitJZyhhLmNvbnZlcnNpb25faWQpKyIvPyIsYz1JZyhKU09OLnN0cmluZ2lmeShhLmNvbnZlcnNpb25fZGF0YSkpLGQ9Imh0dHBzOi8vd3d3Lmdvb2dsZXRyYXZlbGFkc2VydmljZXMuY29tL3RyYXZlbC9mbGlnaHRzL2NsayIrYisiY29udmVyc2lvbl9kYXRhPSIrYztpZihhLmNvbnZlcnNpb25MaW5rZXJFbmFibGVkKXt2YXIgZT14ZygiZ2YiLGEuY29va2llUHJlZml4KTtpZihlJiZlLmxlbmd0aClmb3IodmFyIGc9MDtnPGUubGVuZ3RoO2crKylkKz0iJmdjbGdmPSIrSWcoZVtnXSl9U2EoZCxhLm9uU3VjY2VzcyxhLm9uRmFpbHVyZSl9LElnPWZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT09YXx8dm9pZCAwPT09YXx8MD09PVN0cmluZyhhKS5sZW5ndGg/IiI6ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhhKSl9Owp2YXIgS2c9ISF4Lk11dGF0aW9uT2JzZXJ2ZXIsTGc9dm9pZCAwLE1nPWZ1bmN0aW9uKGEpe2lmKCFMZyl7dmFyIGI9ZnVuY3Rpb24oKXt2YXIgYT15LmJvZHk7aWYoYSlpZihLZykobmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPExnLmxlbmd0aDthKyspQyhMZ1thXSl9KSkub2JzZXJ2ZShhLHtjaGlsZExpc3Q6ITAsc3VidHJlZTohMH0pO2Vsc2V7dmFyIGI9ITE7QShhLCJET01Ob2RlSW5zZXJ0ZWQiLGZ1bmN0aW9uKCl7Ynx8KGI9ITAsQyhmdW5jdGlvbigpe2I9ITE7Zm9yKHZhciBhPTA7YTxMZy5sZW5ndGg7YSsrKUMoTGdbYV0pfSkpfSl9fTtMZz1bXTt5LmJvZHk/YigpOkMoYil9TGcucHVzaChhKX07dmFyIGRoPXguY2xlYXJUaW1lb3V0LGVoPXguc2V0VGltZW91dCxUPWZ1bmN0aW9uKGEsYixjKXtpZih1ZSgpKXtiJiZDKGIpfWVsc2UgcmV0dXJuIFBhKGEsYixjKX0sZmg9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IERhdGV9LFU9ZnVuY3Rpb24oKXtyZXR1cm4geC5sb2NhdGlvbi5ocmVmfSxnaD1mdW5jdGlvbihhKXtyZXR1cm4gRChmYihhKSwiZnJhZ21lbnQiKX0saGg9ZnVuY3Rpb24oYSl7cmV0dXJuIGViKGZiKGEpKX0sVj1mdW5jdGlvbihhLGIpe3JldHVybiBhZChhLGJ8fDIpfSxpaD1mdW5jdGlvbihhLGIsYyl7YiYmKGEuZXZlbnRDYWxsYmFjaz1iLGMmJihhLmV2ZW50VGltZW91dD1jKSk7cmV0dXJuIEllKGEpfSxqaD1mdW5jdGlvbihhLGIpe3hbYV09Yn0sVz1mdW5jdGlvbihhLGIsYyl7YiYmKHZvaWQgMD09PXhbYV18fGMmJgoheFthXSkmJih4W2FdPWIpO3JldHVybiB4W2FdfSxraD1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGdiKGEsYix2b2lkIDA9PT1jPyEwOiEhYyl9LGxoPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXtwcmVmaXg6YSxwYXRoOmIsZG9tYWluOmMsSmQ6ZH0sZz1uZygpO29nKGcsZSk7dWcoWyJhdyJdLGUpO3VnKFsiZGMiXSxlKTt9LG1oPWZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGc9WmYoKSxoPVFmKCk7aC5kYXRhfHwoaC5kYXRhPQp7cXVlcnk6e30sZnJhZ21lbnQ6e319LGcoaC5kYXRhKSk7dmFyIGs9e30sbD1oLmRhdGE7bCYmKERhKGssbC5xdWVyeSksRGEoayxsLmZyYWdtZW50KSk7Zm9yKHZhciBtPWxnKGIpLHA9MDtwPGEubGVuZ3RoOysrcCl7dmFyIHE9YVtwXTtpZih2b2lkIDAhPT1rZ1txXSl7dmFyIHI9cGcocSxtKSx3PWtbcl07aWYodyl7dmFyIHY9TWF0aC5taW4ocWcodykseWEoKSksdTtiOntmb3IodmFyIHo9dixFPWdiKHIseS5jb29raWUpLEI9MDtCPEUubGVuZ3RoOysrQilpZihxZyhFW0JdKT56KXt1PSEwO2JyZWFrIGJ9dT0hMX11fHxuYihyLHcsYyxkLDA9PWU/dm9pZCAwOm5ldyBEYXRlKHYrMUUzKihudWxsPT1lPzc3NzZFMzplKSksITApfX19dmFyIEc9e3ByZWZpeDpiLHBhdGg6Yyxkb21haW46ZH07b2cobWcoay5nY2xpZCxrLmdjbHNyYyksRyk7fSxuaD1mdW5jdGlvbihhLGIsYyxkLGUpewpzZyhhLGIsYyxkLGUpO30sb2g9ZnVuY3Rpb24oYSxiKXtpZih1ZSgpKXtiJiZDKGIpfWVsc2UgUmEoYSxiKX0scGg9ZnVuY3Rpb24oYSl7cmV0dXJuISF2ZihhLCJpbml0IiwhMSl9LHFoPWZ1bmN0aW9uKGEpe3RmKGEpLmluaXQ9ITB9LHJoPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD0odm9pZCAwPT09Yz8wOmMpPyJ3d3cuZ29vZ2xldGFnbWFuYWdlci5jb20vZ3RhZy9qcyI6cmM7ZCs9Ij9pZD0iK2VuY29kZVVSSUNvbXBvbmVudChhKSsiJmw9ZGF0YUxheWVyIjtiJiZ0YShiLGZ1bmN0aW9uKGEsYil7YiYmKGQrPSImIithKyI9IitlbmNvZGVVUklDb21wb25lbnQoYikpfSk7VChPKCJodHRwczovLyIsImh0dHA6Ly8iLGQpKX07dmFyIHNoPWZ1bmN0aW9uKGEsYixjLGQsZSxnKXt2YXIgaD17Y29uZmlnOmEsZ3RtOkRnKCl9O2MmJihHZihkLHZvaWQgMCxlLGcpLGguYXVpZGRjPUNmW0RmKGQpXSk7YiYmKGgubG9hZEluc2VjdXJlPWIpO1coIl9fZGNfbnNfcHJvY2Vzc29yIixbXSkucHVzaChoKTtUKChiPyJodHRwIjoiaHR0cHMiKSsiOi8vd3d3Lmdvb2dsZXRhZ21hbmFnZXIuY29tL2RjbGsvbnMvdjEuanMiKX07CnZhciB0aD1wZi5SZjsKdmFyIHVoPW5ldyB6YTtmdW5jdGlvbiB2aChhLGIpe2Z1bmN0aW9uIGMoYSl7dmFyIGI9ZmIoYSksYz1EKGIsInByb3RvY29sIiksZD1EKGIsImhvc3QiLCEwKSxlPUQoYiwicG9ydCIpLGc9RChiLCJwYXRoIikudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9cLyQvLCIiKTtpZih2b2lkIDA9PT1jfHwiaHR0cCI9PWMmJiI4MCI9PWV8fCJodHRwcyI9PWMmJiI0NDMiPT1lKWM9IndlYiIsZT0iZGVmYXVsdCI7cmV0dXJuW2MsZCxlLGddfWZvcih2YXIgZD1jKFN0cmluZyhhKSksZT1jKFN0cmluZyhiKSksZz0wO2c8ZC5sZW5ndGg7ZysrKWlmKGRbZ10hPT1lW2ddKXJldHVybiExO3JldHVybiEwfQpmdW5jdGlvbiB3aChhKXt2YXIgYj1hLmFyZzAsYz1hLmFyZzE7aWYoYS5hbnlfb2YmJnFhKGMpKXtmb3IodmFyIGQ9MDtkPGMubGVuZ3RoO2QrKylpZih3aCh7ImZ1bmN0aW9uIjphWyJmdW5jdGlvbiJdLGFyZzA6YixhcmcxOmNbZF19KSlyZXR1cm4hMDtyZXR1cm4hMX1zd2l0Y2goYVsiZnVuY3Rpb24iXSl7Y2FzZSAiX2NuIjpyZXR1cm4gMDw9U3RyaW5nKGIpLmluZGV4T2YoU3RyaW5nKGMpKTtjYXNlICJfY3NzIjp2YXIgZTthOntpZihiKXt2YXIgZz1bIm1hdGNoZXMiLCJ3ZWJraXRNYXRjaGVzU2VsZWN0b3IiLCJtb3pNYXRjaGVzU2VsZWN0b3IiLCJtc01hdGNoZXNTZWxlY3RvciIsIm9NYXRjaGVzU2VsZWN0b3IiXTt0cnl7Zm9yKHZhciBoPTA7aDxnLmxlbmd0aDtoKyspaWYoYltnW2hdXSl7ZT1iW2dbaF1dKGMpO2JyZWFrIGF9fWNhdGNoKHUpe319ZT0hMX1yZXR1cm4gZTtjYXNlICJfZXciOnZhciBrLGw7az1TdHJpbmcoYik7bD1TdHJpbmcoYyk7dmFyIG09ay5sZW5ndGgtCmwubGVuZ3RoO3JldHVybiAwPD1tJiZrLmluZGV4T2YobCxtKT09bTtjYXNlICJfZXEiOnJldHVybiBTdHJpbmcoYik9PVN0cmluZyhjKTtjYXNlICJfZ2UiOnJldHVybiBOdW1iZXIoYik+PU51bWJlcihjKTtjYXNlICJfZ3QiOnJldHVybiBOdW1iZXIoYik+TnVtYmVyKGMpO2Nhc2UgIl9sYyI6dmFyIHA7cD1TdHJpbmcoYikuc3BsaXQoIiwiKTtyZXR1cm4gMDw9bihwLFN0cmluZyhjKSk7Y2FzZSAiX2xlIjpyZXR1cm4gTnVtYmVyKGIpPD1OdW1iZXIoYyk7Y2FzZSAiX2x0IjpyZXR1cm4gTnVtYmVyKGIpPE51bWJlcihjKTtjYXNlICJfcmUiOnZhciBxO3ZhciByPWEuaWdub3JlX2Nhc2U/ImkiOnZvaWQgMDt0cnl7dmFyIHc9U3RyaW5nKGMpK3Isdj11aC5nZXQodyk7dnx8KHY9bmV3IFJlZ0V4cChjLHIpLHVoLnNldCh3LHYpKTtxPXYudGVzdChiKX1jYXRjaCh1KXtxPSExfXJldHVybiBxO2Nhc2UgIl9zdyI6cmV0dXJuIDA9PVN0cmluZyhiKS5pbmRleE9mKFN0cmluZyhjKSk7Y2FzZSAiX3VtIjpyZXR1cm4gdmgoYiwKYyl9cmV0dXJuITF9O3ZhciB5aD1mdW5jdGlvbihhLGIpe3ZhciBjPWZ1bmN0aW9uKCl7fTtjLnByb3RvdHlwZT1hLnByb3RvdHlwZTt2YXIgZD1uZXcgYzthLmFwcGx5KGQsQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpKTtyZXR1cm4gZH07dmFyIHpoPXt9LEFoPWVuY29kZVVSSSxYPWVuY29kZVVSSUNvbXBvbmVudCxCaD1TYTt2YXIgQ2g9ZnVuY3Rpb24oYSxiKXtpZighYSlyZXR1cm4hMTt2YXIgYz1EKGZiKGEpLCJob3N0Iik7aWYoIWMpcmV0dXJuITE7Zm9yKHZhciBkPTA7YiYmZDxiLmxlbmd0aDtkKyspe3ZhciBlPWJbZF0mJmJbZF0udG9Mb3dlckNhc2UoKTtpZihlKXt2YXIgZz1jLmxlbmd0aC1lLmxlbmd0aDswPGcmJiIuIiE9ZS5jaGFyQXQoMCkmJihnLS0sZT0iLiIrZSk7aWYoMDw9ZyYmYy5pbmRleE9mKGUsZyk9PWcpcmV0dXJuITB9fXJldHVybiExfTsKdmFyIFk9ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD17fSxlPSExLGc9MDthJiZnPGEubGVuZ3RoO2crKylhW2ddJiZhW2ddLmhhc093blByb3BlcnR5KGIpJiZhW2ddLmhhc093blByb3BlcnR5KGMpJiYoZFthW2ddW2JdXT1hW2ddW2NdLGU9ITApO3JldHVybiBlP2Q6bnVsbH07emguT2Y9ZnVuY3Rpb24oKXt2YXIgYT0hMTtyZXR1cm4gYX07dmFyIGxpPWZ1bmN0aW9uKGEsYixjLGQpe3RoaXMubj1hO3RoaXMudD1iO3RoaXMucD1jO3RoaXMuZD1kfSxtaT1mdW5jdGlvbigpe3RoaXMuYz0xO3RoaXMuZT1bXTt0aGlzLnA9bnVsbH07ZnVuY3Rpb24gbmkoYSl7dmFyIGI9SyxjPWIuZ3NzPWIuZ3NzfHx7fTtyZXR1cm4gY1thXT1jW2FdfHxuZXcgbWl9dmFyIG9pPWZ1bmN0aW9uKGEsYil7bmkoYSkucD1ifSxwaT1mdW5jdGlvbihhKXt2YXIgYj1uaShhKSxjPWIucDtpZihjKXt2YXIgZD1iLmUsZT1bXTtiLmU9W107dmFyIGc9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspdHJ5e3ZhciBkPWFbYl07ZC5kPyhkLmQ9ITEsZS5wdXNoKGQpKTpjKGQubixkLnQsZC5wKX1jYXRjaChtKXt9fTtnKGQpO2coZSl9fTt2YXIgcmk9ZnVuY3Rpb24oKXt2YXIgYT14LmdhR2xvYmFsPXguZ2FHbG9iYWx8fHt9O2EuaGlkPWEuaGlkfHxzYSgpO3JldHVybiBhLmhpZH07dmFyIEdpPXdpbmRvdyxIaT1kb2N1bWVudCxJaT1mdW5jdGlvbihhKXt2YXIgYj1HaS5fZ2FVc2VyUHJlZnM7aWYoYiYmYi5pb28mJmIuaW9vKCl8fGEmJiEwPT09R2lbImdhLWRpc2FibGUtIithXSlyZXR1cm4hMDt0cnl7dmFyIGM9R2kuZXh0ZXJuYWw7aWYoYyYmYy5fZ2FVc2VyUHJlZnMmJiJvbyI9PWMuX2dhVXNlclByZWZzKXJldHVybiEwfWNhdGNoKGcpe31mb3IodmFyIGQ9Z2IoIkFNUF9UT0tFTiIsSGkuY29va2llLCEwKSxlPTA7ZTxkLmxlbmd0aDtlKyspaWYoIiRPUFRfT1VUIj09ZFtlXSlyZXR1cm4hMDtyZXR1cm4gSGkuZ2V0RWxlbWVudEJ5SWQoIl9fZ2FPcHRPdXRFeHRlbnNpb24iKT8hMDohMX07dmFyIE9pPWZ1bmN0aW9uKGEsYixjKXtOaShhKTt2YXIgZD1NYXRoLmZsb29yKHlhKCkvMUUzKTtuaShhKS5lLnB1c2gobmV3IGxpKGIsZCxjLHZvaWQgMCkpO3BpKGEpfSxRaT1mdW5jdGlvbihhLGIsYyl7TmkoYSk7dmFyIGQ9TWF0aC5mbG9vcih5YSgpLzFFMyk7bmkoYSkuZS5wdXNoKG5ldyBsaShiLGQsYywhMCkpfSxOaT1mdW5jdGlvbihhKXtpZigxPT09bmkoYSkuYyl7bmkoYSkuYz0yO3ZhciBiPWVuY29kZVVSSUNvbXBvbmVudChhKTtQYSgoImh0dHA6IiE9eC5sb2NhdGlvbi5wcm90b2NvbD8iaHR0cHM6IjoiaHR0cDoiKSsoIi8vd3d3Lmdvb2dsZXRhZ21hbmFnZXIuY29tL2d0YWcvanM/aWQ9IitiKyImbD1kYXRhTGF5ZXImY3g9YyIpKX19LFNpPWZ1bmN0aW9uKGEsYil7fSxSaT1mdW5jdGlvbihhLGIpe307dmFyIFo9e2E6e319OwpaLmEuZ3RhZ2hhPVsiZ29vZ2xlIl0sZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe2Z1bmN0aW9uIGIoYSxiKXt2b2lkIDAhPT1iJiZjLnB1c2goYSsiPSIrYil9aWYodm9pZCAwPT09YSlyZXR1cm4iIjt2YXIgYz1bXTtiKCJoY3RfYmFzZV9wcmljZSIsYS5DZCk7YigiaGN0X2Jvb2tpbmdfeHJlZiIsYS5EZCk7YigiaGN0X2NoZWNraW5fZGF0ZSIsYS5EZik7YigiaGN0X2NoZWNrb3V0X2RhdGUiLGEuRWYpO2IoImhjdF9jdXJyZW5jeV9jb2RlIixhLkZmKTtiKCJoY3RfcGFydG5lcl9ob3RlbF9pZCIsYS5FZCk7YigiaGN0X3RvdGFsX3ByaWNlIixhLkZkKTtyZXR1cm4gYy5qb2luKCI7Iil9ZnVuY3Rpb24gYihiLGMsZCxlKXt2YXIgZz1YKGIpLGg9WChhKGMpKSxrPSJodHRwczovL3d3dy5nb29nbGV0cmF2ZWxhZHNlcnZpY2VzLmNvbS90cmF2ZWwvY2xrL3BhZ2VhZC9jb252ZXJzaW9uLyIrZysiLz9kYXRhPSIraDtkJiYoays9eGcoImhhIixlKS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIiZnY2xoYT0iKwpYKGEpfSkuam9pbigiIikpO3JldHVybiBrfWZ1bmN0aW9uIGMoYSxjLGQsZSxnLHEpey9eXGQrJC8udGVzdChhKT9CaChiKGEsYyxkLGUpLGcscSk6QyhxKX1mdW5jdGlvbiBkKGEsYixjLGQpe3ZhciBlPXt9O2YoYSk/ZS5EZD1hOiJudW1iZXIiPT09dHlwZW9mIGEmJihlLkRkPVN0cmluZyhhKSk7ZihjKSYmKGUuRmY9Yyk7ZihiKT9lLkZkPWUuQ2Q9YjoibnVtYmVyIj09PXR5cGVvZiBiJiYoZS5GZD1lLkNkPVN0cmluZyhiKSk7aWYoIXFhKGQpfHwwPT1kLmxlbmd0aClyZXR1cm4gZTt2YXIgZz1kWzBdO2lmKCFLYShnKSlyZXR1cm4gZTtmKGcuaWQpP2UuRWQ9Zy5pZDoibnVtYmVyIj09PXR5cGVvZiBnLmlkJiYoZS5FZD1TdHJpbmcoZy5pZCkpO2YoZy5zdGFydF9kYXRlKSYmKGUuRGY9Zy5zdGFydF9kYXRlKTtmKGcuZW5kX2RhdGUpJiYoZS5FZj1nLmVuZF9kYXRlKTtyZXR1cm4gZX1mdW5jdGlvbiBlKGEpe3ZhciBiPXVjLGU9YS52dHBfZ3RtT25TdWNjZXNzLGg9YS52dHBfZ3RtT25GYWlsdXJlLApwPWEudnRwX2NvbnZlcnNpb25JZCxxPXAuY29udGFpbmVySWQscj1mdW5jdGlvbihhKXtyZXR1cm4gY2QoYSxxLHAuaWQpfSx3PSExIT09cihRLkdhKSx2PXIoUS5GYSl8fHIoUS5GKSx1PXIoUS5OKSx6PXIoUS5UKTtpZihiPT09US5aKXt2YXIgRT1yKFEuSWEpfHx7fTt3JiYoZ2coRVtRLmdiXSwhIUVbUS5IXSkmJm1oKGcsdix2b2lkIDAsdSx6KSxsaCh2LHZvaWQgMCx1LHopKTtFW1EuSF0mJm5oKGcsRVtRLkhdLEVbUS5pYl0sISFFW1EuaGJdLHYpO0MoZSl9ZWxzZSBpZigicHVyY2hhc2UiPT09Yil7dmFyIEI9ZChyKFEuS2EpLHIoUS5iYSkscihRLm5hKSxyKFEuUykpO2MocC5jYVswXSxCLHcsdixlLGgpfWVsc2UgQyhoKX12YXIgZz1bImhhIl07Wi5fX2d0YWdoYT1lO1ouX19ndGFnaGEuZz0iZ3RhZ2hhIjtaLl9fZ3RhZ2hhLmg9ITA7Wi5fX2d0YWdoYS5iPTA7fSgpOwpaLmEuZT1bImdvb2dsZSJdLGZ1bmN0aW9uKCl7KGZ1bmN0aW9uKGEpe1ouX19lPWE7Wi5fX2UuZz0iZSI7Wi5fX2UuaD0hMDtaLl9fZS5iPTB9KShmdW5jdGlvbigpe3JldHVybiB1Y30pfSgpOwoKWi5hLnY9WyJnb29nbGUiXSxmdW5jdGlvbigpeyhmdW5jdGlvbihhKXtaLl9fdj1hO1ouX192Lmc9InYiO1ouX192Lmg9ITA7Wi5fX3YuYj0wfSkoZnVuY3Rpb24oYSl7dmFyIGI9YS52dHBfbmFtZTtpZighYnx8IWIucmVwbGFjZSlyZXR1cm4hMTt2YXIgYz1WKGIucmVwbGFjZSgvXFxcLi9nLCIuIiksYS52dHBfZGF0YUxheWVyVmVyc2lvbnx8MSk7cmV0dXJuIHZvaWQgMCE9PWM/YzphLnZ0cF9kZWZhdWx0VmFsdWV9KX0oKTsKCgoKCgoKWi5hLmd0YWdhdz1bImdvb2dsZSJdLGZ1bmN0aW9uKCl7dmFyIGE9ITEsYj1bXSxjPVsiYXciLCJkYyJdLGQ9ZnVuY3Rpb24oYSl7dmFyIGI9VygiZ29vZ2xlX3RyYWNrQ29udmVyc2lvbiIpLGM9YS5ndG1fb25GYWlsdXJlOyJmdW5jdGlvbiI9PXR5cGVvZiBiP2IoYSl8fGMoKTpjKCl9LGU9ZnVuY3Rpb24oKXtmb3IoOzA8Yi5sZW5ndGg7KWQoYi5zaGlmdCgpKX0sZz1mdW5jdGlvbigpe2F8fChhPSEwLHlkKCksVChPKCJodHRwczovLyIsImh0dHA6Ly8iLCJ3d3cuZ29vZ2xlYWRzZXJ2aWNlcy5jb20vcGFnZWFkL2NvbnZlcnNpb25fYXN5bmMuanMiKSxmdW5jdGlvbigpe2UoKTtiPXtwdXNoOmR9fSxmdW5jdGlvbigpe2UoKTthPSExfSkpfSxoPWZ1bmN0aW9uKGEsYixjLGQpe2lmKHVlKCkpe31lbHNle3FhKGIpfHwoYj1bYl0pO2Zvcih2YXIgZT0KMDtlPGIubGVuZ3RoO2UrKykxPmUmJkJjKGEuY2FbMF0sYS5jYVsxXSxiW2VdLHtZZDpjLHhnOmR9KX19LGs9ZnVuY3Rpb24oYSl7aWYoYSl7Zm9yKHZhciBiPVtdLGM9MDtjPGEubGVuZ3RoOysrYyl7dmFyIGQ9YVtjXTtkJiZiLnB1c2goe2l0ZW1faWQ6ZC5pZCxxdWFudGl0eTpkLnF1YW50aXR5LHZhbHVlOmQucHJpY2Usc3RhcnRfZGF0ZTpkLnN0YXJ0X2RhdGUsZW5kX2RhdGU6ZC5lbmRfZGF0ZX0pfXJldHVybiBifX0sbD1mdW5jdGlvbihhKXt2YXIgZD1hLnZ0cF9jb252ZXJzaW9uSWQsZT11YyxsPWU9PVEuWixtPWQuY2FbMF0sdj1kLmNhWzFdLHU9dm9pZCAwIT09dix6PWQuY29udGFpbmVySWQsRT11P2QuaWQ6dm9pZCAwLEI9ZnVuY3Rpb24oYSl7cmV0dXJuIGNkKGEseixFKX0sRz0hMSE9PUIoUS5HYSksUj1CKFEuRmEpfHxCKFEuRiksTT1CKFEuTiksRj1CKFEuVCk7aWYobCl7dmFyIE49QihRLklhKXx8e307RyYmKGdnKE5bUS5nYl0sISFOW1EuSF0pJiZtaChjLFIsdm9pZCAwLApNLEYpLGxoKFIsdm9pZCAwLE0sRikpO05bUS5IXSYmbmgoYyxOW1EuSF0sTltRLmliXSwhIU5bUS5oYl0sUik7aWYodSl7dmFyIFM9QihRLldiKSxKPUIoUS5VYiksYWE9QihRLlZiKSxoYT1CKFEuamQpO2goZCxTLEp8fGFhLGhhKX19dmFyIEw9ITE9PT1CKFEuJGMpfHwhMT09PUIoUS5KYSk7aWYoIWx8fCF1JiYhTClpZighMD09PUIoUS5hZCkmJih1PSExKSwhMSE9PUIoUS5SKXx8dSl7dmFyIEk9e2dvb2dsZV9jb252ZXJzaW9uX2lkOm0sZ29vZ2xlX3JlbWFya2V0aW5nX29ubHk6IXUsb25sb2FkX2NhbGxiYWNrOmEudnRwX2d0bU9uU3VjY2VzcyxndG1fb25GYWlsdXJlOmEudnRwX2d0bU9uRmFpbHVyZSxnb29nbGVfY29udmVyc2lvbl9mb3JtYXQ6IjMiLGdvb2dsZV9jb252ZXJzaW9uX2NvbG9yOiJmZmZmZmYiLGdvb2dsZV9jb252ZXJzaW9uX2RvbWFpbjoiIixnb29nbGVfY29udmVyc2lvbl9sYWJlbDp2LGdvb2dsZV9jb252ZXJzaW9uX2xhbmd1YWdlOkIoUS5IYSksZ29vZ2xlX2NvbnZlcnNpb25fdmFsdWU6QihRLmJhKSwKZ29vZ2xlX2NvbnZlcnNpb25fY3VycmVuY3k6QihRLm5hKSxnb29nbGVfY29udmVyc2lvbl9vcmRlcl9pZDpCKFEuS2EpLGdvb2dsZV91c2VyX2lkOkIoUS5hYSksZ29vZ2xlX2NvbnZlcnNpb25fcGFnZV91cmw6QihRLmpiKSxnb29nbGVfY29udmVyc2lvbl9yZWZlcnJlcl91cmw6QihRLmtiKSxnb29nbGVfZ3RtOkRnKCl9OyExPT09QihRLlIpJiYoSS5nb29nbGVfYWxsb3dfYWRfcGVyc29uYWxpemF0aW9uX3NpZ25hbHM9ITEpO0kuZ29vZ2xlX3JlYWRfZ2NsX2Nvb2tpZV9vcHRfb3V0PSFHO0cmJlImJihJLmdvb2dsZV9nY2xfY29va2llX3ByZWZpeD1SKTt2YXIgamE9ZnVuY3Rpb24oKXt2YXIgYT1CKFEuZWIpLGI9e2V2ZW50OmV9O2lmKHFhKGEpKXtmb3IodmFyIGM9MDtjPGEubGVuZ3RoOysrYyl7dmFyIGQ9YVtjXSxnPUIoZCk7dm9pZCAwIT09ZyYmKGJbZF09Zyl9cmV0dXJuIGJ9dmFyIGg9QigiZXZlbnRNb2RlbCIpO2lmKCFoKXJldHVybiBudWxsO3QoaCxiKTtmb3IodmFyIGs9CjA7azxRLlVjLmxlbmd0aDsrK2spZGVsZXRlIGJbUS5VY1trXV07cmV0dXJuIGJ9KCk7amEmJihJLmdvb2dsZV9jdXN0b21fcGFyYW1zPWphKTshdSYmQihRLlMpJiYoSS5nb29nbGVfZ3RhZ19ldmVudF9kYXRhPXtpdGVtczpCKFEuUyksdmFsdWU6QihRLmJhKX0pO2lmKHUmJiJwdXJjaGFzZSI9PWUpe0IoUS5OYikmJihJLmdvb2dsZV9jb252ZXJzaW9uX21lcmNoYW50X2lkPUIoUS5OYiksSS5nb29nbGVfYmFza2V0X2ZlZWRfY291bnRyeT1CKFEuY2QpLEkuZ29vZ2xlX2Jhc2tldF9mZWVkX2xhbmd1YWdlPUIoUS5kZCksSS5nb29nbGVfYmFza2V0X2Rpc2NvdW50PUIoUS5iZCksSS5nb29nbGVfYmFza2V0X3RyYW5zYWN0aW9uX3R5cGU9ZSxJLmdvb2dsZV9kaXNhYmxlX21lcmNoYW50X3JlcG9ydGVkX2NvbnZlcnNpb25zPSEwPT09QihRLmVkKSx1ZSgpJiYoSS5nb29nbGVfZGlzYWJsZV9tZXJjaGFudF9yZXBvcnRlZF9jb252ZXJzaW9ucz0hMCkpO3ZhciBiYT1rKEIoUS5TKSk7YmEmJgooSS5nb29nbGVfY29udmVyc2lvbl9pdGVtcz1iYSl9dmFyIEFhPSEwO0FhJiZiLnB1c2goSSl9ZygpfTtaLl9fZ3RhZ2F3PWw7Wi5fX2d0YWdhdy5nPSJndGFnYXciO1ouX19ndGFnYXcuaD0hMDtaLl9fZ3RhZ2F3LmI9MH0oKTsKWi5hLmdldD1bImdvb2dsZSJdLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGMpe3RhKGMsZnVuY3Rpb24oYSl7Il8iPT09YS5jaGFyQXQoMCkmJmRlbGV0ZSBjW2FdfSk7dmFyIGI9Y1tRLm5iXXx8e307dGEoYixmdW5jdGlvbihhKXsiXyI9PT1hLmNoYXJBdCgwKSYmZGVsZXRlIGJbYV19KX0oZnVuY3Rpb24oYSl7Wi5fX2dldD1hO1ouX19nZXQuZz0iZ2V0IjtaLl9fZ2V0Lmg9ITA7Wi5fX2dldC5iPTB9KShmdW5jdGlvbihiKXtpZihiLnZ0cF9pc0F1dG9UYWcpe2Zvcih2YXIgYz1TdHJpbmcoYi52dHBfdHJhY2tpbmdJZCksZD11Y3x8IiIsZT17fSxnPVEua2QsaD0wO2g8Zy5sZW5ndGg7aCsrKXt2YXIgaz1mZChnW2hdLGMpO3ZvaWQgMCE9PWsmJihlW2dbaF1dPWspfXZhciBsPWZkKFEuZWIsYyk7aWYocWEobCkpZm9yKHZhciBtPTA7bTxsLmxlbmd0aDttKyspe3ZhciBwPWxbbV0scT1mZChwLGMpO3ZvaWQgMCE9PXEmJihlW3BdPXEpfWVsc2V7dmFyIHI9VigiZXZlbnRNb2RlbCIpOwp0KHIsZSl9aWYoIl8iPT09ZC5jaGFyQXQoMCkpcmV0dXJuO2EoZCxlKTtPaShjLGQsdChlKSl9ZWxzZXt2YXIgdz1iLnZ0cF9zZXR0aW5ncyx2PXcuZXZlbnRQYXJhbWV0ZXJzLHU9dy51c2VyUHJvcGVydGllczt0KFkoYi52dHBfZXZlbnRQYXJhbWV0ZXJzLCJuYW1lIiwidmFsdWUiKSx2KTt0KFkoYi52dHBfdXNlclByb3BlcnRpZXMsIm5hbWUiLCJ2YWx1ZSIpLHUpO3ZbUS5uYl09dTt2YXIgej1TdHJpbmcoYi52dHBfZXZlbnROYW1lKSxFPWIudnRwX2FsbG93U3lzdGVtTmFtZXM7aWYoIUUmJiJfIj09PXouY2hhckF0KDApKXJldHVybjtFfHxhKHosdik7KGIudnRwX2RlZmVycmFibGU/UWk6T2kpKFN0cmluZyh3LnN0cmVhbUlkKSx6LHYpfWIudnRwX2d0bU9uU3VjY2VzcygpfSl9KCk7CgoKClouYS5ndGFnZmw9W10sZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe3ZhciBiPS9eREMtKFxkKykoXC8oW1x3LV0rKVwvKFtcdy1dKylcKyhcdyspKT8kLy5leGVjKGEpO2lmKGIpe3ZhciBjPXtzdGFuZGFyZDoyLHVuaXF1ZTozLHBlcl9zZXNzaW9uOjQsdHJhbnNhY3Rpb25zOjUsaXRlbXNfc29sZDo2LCIiOjF9WyhiWzVdfHwiIikudG9Mb3dlckNhc2UoKV07aWYoYylyZXR1cm57Y29udGFpbmVySWQ6IkRDLSIrYlsxXSxYZDpiWzNdP2E6IiIsR2U6YlsxXSxGZTpiWzNdfHwiIixOYTpiWzRdfHwiIixMOmN9fX1mdW5jdGlvbiBiKGEsYil7ZnVuY3Rpb24gYyhiLGMsZSl7dm9pZCAwIT09ZSYmMCE9PShlKyIiKS5sZW5ndGgmJmQucHVzaChiK2MrIjoiK2EoZSsiIikpfXZhciBkPVtdLGU9YihRLlMpfHxbXTtpZihxYShlKSlmb3IodmFyIGc9MDtnPGUubGVuZ3RoO2crKyl7dmFyIHA9ZVtnXSxxPWcrMTtjKCJpIixxLHAuaWQpO2MoInAiLHEscC5wcmljZSk7YygicSIscSxwLnF1YW50aXR5KTsKYygiYyIscSxiKFEuZWUpKTtjKCJsIixxLGIoUS5IYSkpfXJldHVybiBkLmpvaW4oInwiKX1mdW5jdGlvbiBjKGEsYixjKXt2YXIgZD0vXnUoWzEtOV1cZD98MTAwKSQvLGU9YShRLmZlKXx8e30sZz1nZChiLGMpLGg9e30scT17fTtpZihLYShlKSlmb3IodmFyIHIgaW4gZSlpZihlLmhhc093blByb3BlcnR5KHIpJiZkLnRlc3Qocikpe3ZhciB3PWVbcl07Zih3KSYmKGhbcl09dyl9Zm9yKHZhciB2PTA7djxnLmxlbmd0aDt2Kyspe3ZhciB1PWdbdl07ZC50ZXN0KHUpJiYoaFt1XT11KX1mb3IodmFyIHogaW4gaCloLmhhc093blByb3BlcnR5KHopJiYocVt6XT1hKGhbel0pKTtyZXR1cm4gcX12YXIgZD1bImF3IiwiZGMiXTsoZnVuY3Rpb24oYSl7Wi5fX2d0YWdmbD1hO1ouX19ndGFnZmwuZz0iZ3RhZ2ZsIjtaLl9fZ3RhZ2ZsLmg9ITA7Wi5fX2d0YWdmbC5iPTB9KShmdW5jdGlvbihlKXt2YXIgZz1lLnZ0cF9ndG1PblN1Y2Nlc3MsaD1lLnZ0cF9ndG1PbkZhaWx1cmUsaz1hKGUudnRwX3RhcmdldElkKTsKaWYoayl7dmFyIGw9ZnVuY3Rpb24oYSl7cmV0dXJuIGNkKGEsay5jb250YWluZXJJZCxrLlhkfHx2b2lkIDApfSxtPSExIT09bChRLkdhKSxwPWwoUS5GYSl8fGwoUS5GKSxxPWwoUS5OKSxyPWwoUS5UKSx3PWwoUS5pZSksdj0zPT09emMoKTtpZih1Yz09PVEuWil7dmFyIHU9bChRLklhKXx8e30sej1sKFEuZGUpLEU9dm9pZCAwPT09ej8hMDohIXo7bSYmKGdnKHVbUS5nYl0sISF1W1EuSF0pJiZtaChkLHAsdm9pZCAwLHEsciksbGgocCx2b2lkIDAscSxyKSx6ZyhFLHAsdm9pZCAwLHEscikpO3VbUS5IXSYmbmgoZCx1W1EuSF0sdVtRLmliXSwhIXVbUS5oYl0scCk7aWYodyYmdy5leGNsdXNpb25fcGFyYW1ldGVycyYmdy5lbmdpbmVzKXt9QyhnKX1lbHNle3ZhciBCPXt9LEc9bChRLmhlKTsKaWYoS2EoRykpZm9yKHZhciBSIGluIEcpaWYoRy5oYXNPd25Qcm9wZXJ0eShSKSl7dmFyIE09R1tSXTt2b2lkIDAhPT1NJiZudWxsIT09TSYmKEJbUl09TSl9dmFyIEY9IiI7aWYoNT09PWsuTHx8Nj09PWsuTClGPWIoWCxsKTt2YXIgTj1jKGwsay5jb250YWluZXJJZCxrLlhkKSxTPSEwPT09bChRLiRkKTtpZih1ZSgpJiZTKXtTPSExfXZhciBKPXtOYTprLk5hLGhjOm0saGY6cSxqZjpyLHZhOnAsdmI6bChRLmJhKSxMOmsuTCxuZjpCLGtjOmsuR2UsbmM6ay5GZSxPOmgsSTpnLENiOmhoKFUoKSksRGM6Rixwcm90b2NvbDp2PyJodHRwOiI6Imh0dHBzOiIsSGM6bChRLnVlKSxFYjpTLHNlc3Npb25JZDpsKFEubWIpLEpiOnZvaWQgMCx0cmFuc2FjdGlvbklkOmwoUS5LYSksS2I6dm9pZCAwLFFjOk4sTWU6ITEhPT1sKFEuUil9O0hnKEopfX1lbHNlIEMoaCl9KX0oKTsKClouYS5ndGFnZ2Y9WyJnb29nbGUiXSxmdW5jdGlvbigpe3ZhciBhPS8uKlwuZ29vZ2xlXC5jb20oOlxkKyk/XC9ib29raW5nXC9mbGlnaHRzLiovLGI9ZnVuY3Rpb24oYSl7aWYoYSl7Zm9yKHZhciBiPVtdLGM9MCxnPTA7ZzxhLmxlbmd0aDsrK2cpe3ZhciBoPWFbZ107IWh8fHZvaWQgMCE9PWguY2F0ZWdvcnkmJiIiIT09aC5jYXRlZ29yeSYmIkZsaWdodFNlZ21lbnQiIT09aC5jYXRlZ29yeXx8KGJbY109e2NhYmluOmgudHJhdmVsX2NsYXNzLGZhcmVfcHJvZHVjdDpoLmZhcmVfcHJvZHVjdCxib29raW5nX2NvZGU6aC5ib29raW5nX2NvZGUsZmxpZ2h0X251bWJlcjpoLmZsaWdodF9udW1iZXIsb3JpZ2luOmgub3JpZ2luLGRlc3RpbmF0aW9uOmguZGVzdGluYXRpb24sZGVwYXJ0dXJlX2RhdGU6aC5zdGFydF9kYXRlfSxjKyspfXJldHVybiBifX07KGZ1bmN0aW9uKGEpe1ouX19ndGFnZ2Y9YTtaLl9fZ3RhZ2dmLmc9Imd0YWdnZiI7Wi5fX2d0YWdnZi5oPSEwO1ouX19ndGFnZ2YuYj0KMH0pKGZ1bmN0aW9uKGMpe3ZhciBkPXVjLGU9Yy52dHBfZ3RtT25TdWNjZXNzLGc9Yy52dHBfZ3RtT25GYWlsdXJlLGg9Yy52dHBfY29udmVyc2lvbklkLGs9aC5jYVswXSxsPWguY29udGFpbmVySWQsbT1mdW5jdGlvbihhKXtyZXR1cm4gY2QoYSxsLGguaWQpfSxwPSExIT09bShRLkdhKSxxPW0oUS5GYSl8fG0oUS5GKSxyPW0oUS5OKSx3PW0oUS5UKTtpZihkPT09US5aKXAmJmxoKHEsdm9pZCAwLHIsdyksQyhlKTtlbHNle3ZhciB2PXtjb252ZXJzaW9uX2lkOmssb25GYWlsdXJlOmcsb25TdWNjZXNzOmUsY29udmVyc2lvbkxpbmtlckVuYWJsZWQ6cCxjb29raWVQcmVmaXg6cX07aWYoInB1cmNoYXNlIj09PWQpe3ZhciB1PWEudGVzdChVKCkpLHo9e3BhcnRuZXJfaWQ6ayx0cmlwX3R5cGU6bShRLnhlKSx0b3RhbF9wcmljZTptKFEuYmEpLGN1cnJlbmN5Om0oUS5uYSksaXNfZGlyZWN0X2Jvb2tpbmc6dSxmbGlnaHRfc2VnbWVudDpiKG0oUS5TKSl9LEU9bShRLnRlKTtFJiYib2JqZWN0Ij09PQp0eXBlb2YgRSYmKHoucGFzc2VuZ2Vyc190b3RhbD1FLnRvdGFsLHoucGFzc2VuZ2Vyc19hZHVsdD1FLmFkdWx0LHoucGFzc2VuZ2Vyc19jaGlsZD1FLmNoaWxkLHoucGFzc2VuZ2Vyc19pbmZhbnRfaW5fc2VhdD1FLmluZmFudF9pbl9zZWF0LHoucGFzc2VuZ2Vyc19pbmZhbnRfaW5fbGFwPUUuaW5mYW50X2luX2xhcCk7di5jb252ZXJzaW9uX2RhdGE9en1KZyh2KX19KX0oKTsKCgpaLmEuZ3RhZ3VhPVsiZ29vZ2xlIl0sZnVuY3Rpb24oKXt2YXIgYSxiPXtjbGllbnRfaWQ6MSxjbGllbnRfc3RvcmFnZToic3RvcmFnZSIsY29va2llX25hbWU6MSxjb29raWVfZG9tYWluOjEsY29va2llX2V4cGlyZXM6MSxjb29raWVfcGF0aDoxLGNvb2tpZV91cGRhdGU6MSxzYW1wbGVfcmF0ZToxLHNpdGVfc3BlZWRfc2FtcGxlX3JhdGU6MSx1c2VfYW1wX2NsaWVudF9pZDoxLHN0b3JlX2dhYzoxLGNvbnZlcnNpb25fbGlua2VyOiJzdG9yZUdhYyJ9LGM9e2Fub255bWl6ZV9pcDoxLGFwcF9pZDoxLGFwcF9pbnN0YWxsZXJfaWQ6MSxhcHBfbmFtZToxLGFwcF92ZXJzaW9uOjEsY2FtcGFpZ246e25hbWU6ImNhbXBhaWduTmFtZSIsc291cmNlOiJjYW1wYWlnblNvdXJjZSIsbWVkaXVtOiJjYW1wYWlnbk1lZGl1bSIsdGVybToiY2FtcGFpZ25UZXJtIixjb250ZW50OiJjYW1wYWlnbkNvbnRlbnQiLGlkOiJjYW1wYWlnbklkIn0sY3VycmVuY3k6ImN1cnJlbmN5Q29kZSIsZGVzY3JpcHRpb246ImV4RGVzY3JpcHRpb24iLApmYXRhbDoiZXhGYXRhbCIsbGFuZ3VhZ2U6MSxub25faW50ZXJhY3Rpb246MSxwYWdlX2hvc3RuYW1lOiJob3N0bmFtZSIscGFnZV9yZWZlcnJlcjoicmVmZXJyZXIiLHBhZ2VfcGF0aDoicGFnZSIscGFnZV9sb2NhdGlvbjoibG9jYXRpb24iLHBhZ2VfdGl0bGU6InRpdGxlIixzY3JlZW5fbmFtZToxLHRyYW5zcG9ydF90eXBlOiJ0cmFuc3BvcnQiLHVzZXJfaWQ6MX0sZD17Y29udGVudF9pZDoxLGV2ZW50X2NhdGVnb3J5OjEsZXZlbnRfYWN0aW9uOjEsZXZlbnRfbGFiZWw6MSxsaW5rX2F0dHJpYnV0aW9uOjEsbGlua2VyOjEsbWV0aG9kOjEsbmFtZToxLHNlbmRfcGFnZV92aWV3OjEsdmFsdWU6MX0sZT17Y29va2llX25hbWU6MSxjb29raWVfZXhwaXJlczoiZHVyYXRpb24iLGxldmVsczoxfSxnPXthbm9ueW1pemVfaXA6MSxmYXRhbDoxLG5vbl9pbnRlcmFjdGlvbjoxLHVzZV9hbXBfY2xpZW50X2lkOjEsc2VuZF9wYWdlX3ZpZXc6MSxzdG9yZV9nYWM6MSxjb252ZXJzaW9uX2xpbmtlcjoxfSwKaD1mdW5jdGlvbihhLGIsYyxkKXtpZih2b2lkIDAhPT1jKWlmKGdbYl0mJihjPXZhKGMpKSwiYW5vbnltaXplX2lwIiE9Ynx8Y3x8KGM9dm9pZCAwKSwxPT09YSlkW2soYildPWM7ZWxzZSBpZihmKGEpKWRbYV09YztlbHNlIGZvcih2YXIgZSBpbiBhKWEuaGFzT3duUHJvcGVydHkoZSkmJnZvaWQgMCE9PWNbZV0mJihkW2FbZV1dPWNbZV0pfSxrPWZ1bmN0aW9uKGEpe3JldHVybiBhJiZmKGEpP2EucmVwbGFjZSgvKF9bYS16XSkvZyxmdW5jdGlvbihhKXtyZXR1cm4gYVsxXS50b1VwcGVyQ2FzZSgpfSk6YX0sbD1mdW5jdGlvbihhLGIsYyl7YS5oYXNPd25Qcm9wZXJ0eShiKXx8KGFbYl09Yyl9LG09ZnVuY3Rpb24oYSxlLGcpe3ZhciBrPXt9LG09e30scD17fSxxO3ZhciByPWZkKFEucGUsYSk7aWYocWEocikpe2Zvcih2YXIgdT1bXSx2PTA7djxyLmxlbmd0aDt2Kyspe3ZhciB3PXJbdl07aWYodm9pZCAwIT13KXt2YXIgej13LmlkLGFhPXcudmFyaWFudDt2b2lkIDAhPXomJnZvaWQgMCE9CmFhJiZ1LnB1c2goU3RyaW5nKHopKyIuIitTdHJpbmcoYWEpKX19cT0wPHUubGVuZ3RoP3Uuam9pbigiISIpOnZvaWQgMH1lbHNlIHE9dm9pZCAwO3ZhciBoYT1xO2hhJiZsKG0sImV4cCIsaGEpO3ZhciBMPWZkKCJjdXN0b21fbWFwIixhKTtpZihLYShMKSlmb3IodmFyIEkgaW4gTClpZihMLmhhc093blByb3BlcnR5KEkpJiYvXihkaW1lbnNpb258bWV0cmljKVxkKyQvLnRlc3QoSSkmJnZvaWQgMCE9TFtJXSl7dmFyIGphPWZkKFN0cmluZyhMW0ldKSxhKTt2b2lkIDAhPT1qYSYmbChtLEksamEpfWZvcih2YXIgYmE9Z2QoYSksQWE9MDtBYTxiYS5sZW5ndGg7KytBYSl7dmFyIGNhPWJhW0FhXSxwYT1mZChjYSxhKTtkLmhhc093blByb3BlcnR5KGNhKT9oKGRbY2FdLGNhLHBhLGspOmMuaGFzT3duUHJvcGVydHkoY2EpP2goY1tjYV0sY2EscGEsbSk6Yi5oYXNPd25Qcm9wZXJ0eShjYSk/aChiW2NhXSxjYSxwYSxwKTovXihkaW1lbnNpb258bWV0cmljfGNvbnRlbnRfZ3JvdXApXGQrJC8udGVzdChjYSk/CmgoMSxjYSxwYSxtKTpjYT09PVEuRiYmMD5uKGJhLFEuY2IpJiYocC5jb29raWVOYW1lPXBhKyJfZ2EiKX12YXIga2E9U3RyaW5nKHVjKTtsKHAsImNvb2tpZURvbWFpbiIsImF1dG8iKTtsKG0sImZvcmNlU1NMIiwhMCk7dmFyIEVhPSJnZW5lcmFsIjswPD1uKCJhZGRfcGF5bWVudF9pbmZvIGFkZF90b19jYXJ0IGFkZF90b193aXNobGlzdCBiZWdpbl9jaGVja291dCBjaGVja291dF9wcm9ncmVzcyBwdXJjaGFzZSByZWZ1bmQgcmVtb3ZlX2Zyb21fY2FydCBzZXRfY2hlY2tvdXRfb3B0aW9uIi5zcGxpdCgiICIpLGthKT9FYT0iZWNvbW1lcmNlIjowPD1uKCJnZW5lcmF0ZV9sZWFkIGxvZ2luIHNlYXJjaCBzZWxlY3RfY29udGVudCBzaGFyZSBzaWduX3VwIHZpZXdfaXRlbSB2aWV3X2l0ZW1fbGlzdCB2aWV3X3Byb21vdGlvbiB2aWV3X3NlYXJjaF9yZXN1bHRzIi5zcGxpdCgiICIpLGthKT9FYT0iZW5nYWdlbWVudCI6ImV4Y2VwdGlvbiI9PWthJiYoRWE9ImVycm9yIik7bChrLCJldmVudENhdGVnb3J5IiwKRWEpOzA8PW4oWyJ2aWV3X2l0ZW0iLCJ2aWV3X2l0ZW1fbGlzdCIsInZpZXdfcHJvbW90aW9uIiwidmlld19zZWFyY2hfcmVzdWx0cyJdLGthKSYmbChtLCJub25JbnRlcmFjdGlvbiIsITApOyJsb2dpbiI9PWthfHwic2lnbl91cCI9PWthfHwic2hhcmUiPT1rYT9sKGssImV2ZW50TGFiZWwiLGZkKFEucWUsYSkpOiJzZWFyY2giPT1rYXx8InZpZXdfc2VhcmNoX3Jlc3VsdHMiPT1rYT9sKGssImV2ZW50TGFiZWwiLGZkKFEudmUsYSkpOiJzZWxlY3RfY29udGVudCI9PWthJiZsKGssImV2ZW50TGFiZWwiLGZkKFEuY2UsYSkpO3ZhciBhYj1rW1EuSWFdfHx7fSxiYj1hYltRLmdiXTtiYnx8MCE9YmImJmFiW1EuSF0/cC5hbGxvd0xpbmtlcj0hMDohMT09PWJiJiZsKHAsInVzZUFtcENsaWVudElkIiwhMSk7aWYoITE9PT1mZChRLmFlLGEpfHwhMT09PWZkKFEuUixhKSltLmFsbG93QWRGZWF0dXJlcz0hMTtwLm5hbWU9ZTttWyImZ3RtIl09RGcoITApO20uaGl0Q2FsbGJhY2s9ZztrLlc9Cm07ay51ZD1wO3JldHVybiBrfSxwPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7dmFyIGI9dChhKTtiLmxpc3Q9YS5saXN0X25hbWU7Yi5saXN0UG9zaXRpb249YS5saXN0X3Bvc2l0aW9uO2IucG9zaXRpb249YS5saXN0X3Bvc2l0aW9ufHxhLmNyZWF0aXZlX3Nsb3Q7Yi5jcmVhdGl2ZT1hLmNyZWF0aXZlX25hbWU7cmV0dXJuIGJ9ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGM9W10sZD0wO2EmJmQ8YS5sZW5ndGg7ZCsrKWFbZF0mJmMucHVzaChiKGFbZF0pKTtyZXR1cm4gYy5sZW5ndGg/Yzp2b2lkIDB9ZnVuY3Rpb24gZChhKXtyZXR1cm57aWQ6ZyhlLkthKSxhZmZpbGlhdGlvbjpnKGUuamUpLHJldmVudWU6ZyhlLmJhKSx0YXg6ZyhlLm9lKSxzaGlwcGluZzpnKGUubmUpLGNvdXBvbjpnKGUua2UpLGxpc3Q6ZyhlLk9iKXx8YX19Zm9yKHZhciBlPVEsZz1mdW5jdGlvbihiKXtyZXR1cm4gY2QoYixhLHZvaWQgMCl9LGg9ZyhlLlMpLGssbT0wO2gmJm08aC5sZW5ndGgmJiEoaz1oW21dW2UuT2JdKTttKyspOwp2YXIgcD1nKCJjdXN0b21fbWFwIik7aWYoS2EocCkpZm9yKHZhciBxPTA7aCYmcTxoLmxlbmd0aDsrK3Epe3ZhciByPWhbcV0sdztmb3IodyBpbiBwKXAuaGFzT3duUHJvcGVydHkodykmJi9eKGRpbWVuc2lvbnxtZXRyaWMpXGQrJC8udGVzdCh3KSYmdm9pZCAwIT1wW3ddJiZsKHIsdyxyW3Bbd11dKX12YXIgdj1udWxsLEw9dWMsST1nKGUubWUpOyJwdXJjaGFzZSI9PUx8fCJyZWZ1bmQiPT1MP3Y9e2FjdGlvbjpMLE1hOmQoKSxBYTpjKGgpfToiYWRkX3RvX2NhcnQiPT1MP3Y9e2FjdGlvbjoiYWRkIixBYTpjKGgpfToicmVtb3ZlX2Zyb21fY2FydCI9PUw/dj17YWN0aW9uOiJyZW1vdmUiLEFhOmMoaCl9OiJ2aWV3X2l0ZW0iPT1MP3Y9e2FjdGlvbjoiZGV0YWlsIixNYTpkKGspLEFhOmMoaCl9OiJ2aWV3X2l0ZW1fbGlzdCI9PUw/dj17YWN0aW9uOiJpbXByZXNzaW9ucyIsSWY6YyhoKX06InZpZXdfcHJvbW90aW9uIj09TD92PXthY3Rpb246InByb21vX3ZpZXciLEVjOmMoSSl9OiJzZWxlY3RfY29udGVudCI9PQpMJiZJJiYwPEkubGVuZ3RoP3Y9e2FjdGlvbjoicHJvbW9fY2xpY2siLEVjOmMoSSl9OiJzZWxlY3RfY29udGVudCI9PUw/dj17YWN0aW9uOiJjbGljayIsTWE6e2xpc3Q6ZyhlLk9iKXx8a30sQWE6YyhoKX06ImJlZ2luX2NoZWNrb3V0Ij09THx8ImNoZWNrb3V0X3Byb2dyZXNzIj09TD92PXthY3Rpb246ImNoZWNrb3V0IixBYTpjKGgpLE1hOntzdGVwOiJiZWdpbl9jaGVja291dCI9PUw/MTpnKGUuZ2QpLG9wdGlvbjpnKGUuZmQpfX06InNldF9jaGVja291dF9vcHRpb24iPT1MJiYodj17YWN0aW9uOiJjaGVja291dF9vcHRpb24iLE1hOntzdGVwOmcoZS5nZCksb3B0aW9uOmcoZS5mZCl9fSk7diYmKHYuSmc9ZyhlLm5hKSk7cmV0dXJuIHZ9LHE9e30scj1mdW5jdGlvbihhLGIpe3ZhciBjPXFbYV07cVthXT10KGIpO2lmKCFjKXJldHVybiExO2Zvcih2YXIgZCBpbiBiKWlmKGIuaGFzT3duUHJvcGVydHkoZCkmJmJbZF0hPT1jW2RdKXJldHVybiEwO2Zvcih2YXIgZSBpbiBjKWlmKGMuaGFzT3duUHJvcGVydHkoZSkmJgpjW2VdIT09YltlXSlyZXR1cm4hMDtyZXR1cm4hMX0sdz1mdW5jdGlvbihiKXt2YXIgYz1iLnZ0cF90cmFja2luZ0lkLGQ9RmQoKTtpZihuYShkKSl7dmFyIGc9Imd0YWdfIitjLnNwbGl0KCItIikuam9pbigiXyIpLHE9ZnVuY3Rpb24oYSl7dmFyIGI9W10uc2xpY2UuY2FsbChhcmd1bWVudHMsMCk7YlswXT1nKyIuIitiWzBdO2QuYXBwbHkod2luZG93LGIpfSx3PWZ1bmN0aW9uKCl7dmFyIGE9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MDtiJiZjPGIubGVuZ3RoO2MrKylxKGEsYltjXSl9LGI9cChjKTtpZihiKXt2YXIgZD1iLmFjdGlvbjtpZigiaW1wcmVzc2lvbnMiPT1kKWEoImVjOmFkZEltcHJlc3Npb24iLGIuSWYpO2Vsc2UgaWYoInByb21vX2NsaWNrIj09ZHx8InByb21vX3ZpZXciPT1kKXt2YXIgZT1iLkVjO2EoImVjOmFkZFByb21vIixiLkVjKTtlJiYwPGUubGVuZ3RoJiYicHJvbW9fY2xpY2siPT1kJiZxKCJlYzpzZXRBY3Rpb24iLGQpfWVsc2UgYSgiZWM6YWRkUHJvZHVjdCIsCmIuQWEpLHEoImVjOnNldEFjdGlvbiIsZCxiLk1hKX19LHY9ZnVuY3Rpb24oKXtpZih1ZSgpKXt9ZWxzZXt2YXIgYT1mZChRLnNlLGMpO2EmJihxKCJyZXF1aXJlIixhLHtkYXRhTGF5ZXI6ImRhdGFMYXllciJ9KSxxKCJyZXF1aXJlIiwicmVuZGVyIikpfX0sTT1mdW5jdGlvbigpe2lmKHVlKCkpe31lbHNle319LEY9bShjLGcsYi52dHBfZ3RtT25TdWNjZXNzKTtyKGcsRi51ZCkmJmQoZnVuY3Rpb24oKXtEZCgpJiZEZCgpLnJlbW92ZShnKX0pO2QoImNyZWF0ZSIsYyxGLnVkKTsoZnVuY3Rpb24oKXt2YXIgYT1mZCgiY3VzdG9tX21hcCIsYyk7ZChmdW5jdGlvbigpe2lmKEthKGEpKXt2YXIgYj1GLlcsYz1EZCgpLmdldEJ5TmFtZShnKSxkO2ZvcihkIGluIGEpaWYoYS5oYXNPd25Qcm9wZXJ0eShkKSYmL14oZGltZW5zaW9ufG1ldHJpYylcZCskLy50ZXN0KGQpJiZ2b2lkIDAhPWFbZF0pe3ZhciBlPWMuZ2V0KGsoYVtkXSkpO2woYixkLGUpfX19KX0pKCk7KGZ1bmN0aW9uKGEpe2lmKGEpe3ZhciBiPXt9O2lmKEthKGEpKWZvcih2YXIgYyBpbiBlKWUuaGFzT3duUHJvcGVydHkoYykmJmgoZVtjXSxjLGFbY10sYik7cSgicmVxdWlyZSIsImxpbmtpZCIsYil9fSkoRi5saW5rQXR0cmlidXRpb24pO3ZhciBOPQpGW1EuSWFdO2lmKE4mJk5bUS5IXSl7dmFyIFM9TltRLmliXTtHZChnKyIuIixOW1EuSF0sdm9pZCAwPT09Uz8hIU4udXNlX2FuY2hvcjoiZnJhZ21lbnQiPT09UywhIU5bUS5oYl0pfXZhciBKPWZ1bmN0aW9uKGEsYixjKXtjJiYoYj0iIitiKTtGLldbYV09Yn0sYWE9dWM7YWE9PVEuTWI/KHYoKSxxKCJzZW5kIiwicGFnZXZpZXciLEYuVykpOmFhPT1RLlo/KHYoKSxNKCksMCE9Ri5zZW5kUGFnZVZpZXcmJnEoInNlbmQiLCJwYWdldmlldyIsRi5XKSk6InNjcmVlbl92aWV3Ij09YWE/cSgic2VuZCIsInNjcmVlbnZpZXciLEYuVyk6InRpbWluZ19jb21wbGV0ZSI9PWFhPyhKKCJ0aW1pbmdDYXRlZ29yeSIsRi5ldmVudENhdGVnb3J5LCEwKSxKKCJ0aW1pbmdWYXIiLEYubmFtZSwhMCksSigidGltaW5nVmFsdWUiLHVhKEYudmFsdWUpKSx2b2lkIDAhPT1GLmV2ZW50TGFiZWwmJkooInRpbWluZ0xhYmVsIixGLmV2ZW50TGFiZWwsITApLHEoInNlbmQiLCJ0aW1pbmciLEYuVykpOiJleGNlcHRpb24iPT0KYWE/cSgic2VuZCIsImV4Y2VwdGlvbiIsRi5XKToib3B0aW1pemUuY2FsbGJhY2siIT1hYSYmKDA8PW4oInZpZXdfaXRlbV9saXN0IHNlbGVjdF9jb250ZW50IHZpZXdfaXRlbSBhZGRfdG9fY2FydCByZW1vdmVfZnJvbV9jYXJ0IGJlZ2luX2NoZWNrb3V0IHNldF9jaGVja291dF9vcHRpb24gcHVyY2hhc2UgcmVmdW5kIHZpZXdfcHJvbW90aW9uIGNoZWNrb3V0X3Byb2dyZXNzIi5zcGxpdCgiICIpLGFhKSYmKHEoInJlcXVpcmUiLCJlYyIsImVjLmpzIiksdygpKSxKKCJldmVudENhdGVnb3J5IixGLmV2ZW50Q2F0ZWdvcnksITApLEooImV2ZW50QWN0aW9uIixGLmV2ZW50QWN0aW9ufHxhYSwhMCksdm9pZCAwIT09Ri5ldmVudExhYmVsJiZKKCJldmVudExhYmVsIixGLmV2ZW50TGFiZWwsITApLHZvaWQgMCE9PUYudmFsdWUmJkooImV2ZW50VmFsdWUiLHVhKEYudmFsdWUpKSxxKCJzZW5kIiwiZXZlbnQiLEYuVykpO2F8fChhPSEwLHlkKCksVCgiaHR0cHM6Ly93d3cuZ29vZ2xlLWFuYWx5dGljcy5jb20vYW5hbHl0aWNzLmpzIiwKZnVuY3Rpb24oKXtEZCgpLmxvYWRlZHx8Yi52dHBfZ3RtT25GYWlsdXJlKCl9LGIudnRwX2d0bU9uRmFpbHVyZSkpfWVsc2UgQyhiLnZ0cF9ndG1PbkZhaWx1cmUpfTtaLl9fZ3RhZ3VhPXc7Wi5fX2d0YWd1YS5nPSJndGFndWEiO1ouX19ndGFndWEuaD0hMDtaLl9fZ3RhZ3VhLmI9MH0oKTsKCnZhciBUaT17fTtUaS5tYWNybz1mdW5jdGlvbihhKXtpZihwZi4kYi5oYXNPd25Qcm9wZXJ0eShhKSlyZXR1cm4gcGYuJGJbYV19LFRpLm9uSHRtbFN1Y2Nlc3M9cGYudGQoITApLFRpLm9uSHRtbEZhaWx1cmU9cGYudGQoITEpO1RpLmRhdGFMYXllcj1iZDtUaS5jYWxsYmFjaz1mdW5jdGlvbihhKXt3Yy5oYXNPd25Qcm9wZXJ0eShhKSYmbmEod2NbYV0pJiZ3Y1thXSgpO2RlbGV0ZSB3Y1thXX07VGkuVmU9ZnVuY3Rpb24oKXtLW0gubV09VGk7eGM9Wi5hO1NiPVNifHxwZjtUYj1wZH07ClRpLkpmPWZ1bmN0aW9uKCl7Sz14Lmdvb2dsZV90YWdfbWFuYWdlcj14Lmdvb2dsZV90YWdfbWFuYWdlcnx8e307aWYoS1tILm1dKXt2YXIgYT1LLnpvbmVzO2EmJmEudW5yZWdpc3RlckNoaWxkKEgubSl9ZWxzZXtmb3IodmFyIGI9ZGF0YS5yZXNvdXJjZXx8e30sYz1iLm1hY3Jvc3x8W10sZD0wO2Q8Yy5sZW5ndGg7ZCsrKUxiLnB1c2goY1tkXSk7Zm9yKHZhciBlPWIudGFnc3x8W10sZz0wO2c8ZS5sZW5ndGg7ZysrKU9iLnB1c2goZVtnXSk7Zm9yKHZhciBoPWIucHJlZGljYXRlc3x8W10saz0wO2s8aC5sZW5ndGg7aysrKU5iLnB1c2goaFtrXSk7Zm9yKHZhciBsPWIucnVsZXN8fFtdLG09MDttPGwubGVuZ3RoO20rKyl7Zm9yKHZhciBwPWxbbV0scT17fSxyPTA7cjxwLmxlbmd0aDtyKyspcVtwW3JdWzBdXT0KQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwocFtyXSwxKTtNYi5wdXNoKHEpfVFiPVo7UmI9d2g7VGkuVmUoKTtOZSgpO3NkPSExO3RkPTA7aWYoImludGVyYWN0aXZlIj09eS5yZWFkeVN0YXRlJiYheS5jcmVhdGVFdmVudE9iamVjdHx8ImNvbXBsZXRlIj09eS5yZWFkeVN0YXRlKXZkKCk7ZWxzZXtBKHksIkRPTUNvbnRlbnRMb2FkZWQiLHZkKTtBKHksInJlYWR5c3RhdGVjaGFuZ2UiLHZkKTtpZih5LmNyZWF0ZUV2ZW50T2JqZWN0JiZ5LmRvY3VtZW50RWxlbWVudC5kb1Njcm9sbCl7dmFyIHc9ITA7dHJ5e3c9IXguZnJhbWVFbGVtZW50fWNhdGNoKEUpe313JiZ3ZCgpfUEoeCwibG9hZCIsdmQpfUJlPSExOyJjb21wbGV0ZSI9PT15LnJlYWR5U3RhdGU/RGUoKTpBKHgsImxvYWQiLERlKTthOntpZighU2MpYnJlYWsgYTt4LnNldEludGVydmFsKFRjLDg2NEU1KTt9dGM9KG5ldyBEYXRlKS5nZXRUaW1lKCk7fX07KDAsVGkuSmYpKCk7Cgp9KSgpCg==" async></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-122680475-1');
    </script>
  <!-- End Google Analytics -->
</head>
<body>
<div id="TOC">
<ul>
<li><a href="#gm-guide---campaigns">GM Guide - Campaigns</a></li>
<li><a href="#its-ok-to-skip-it">It's ok to skip it</a></li>
<li><a href="#its-ok-to-end-it">It's ok to end it</a></li>
<li><a href="#its-ok-to-blend-it">It's ok to blend it</a></li>
<li><a href="#the-lengths-vary">The lengths vary</a></li>
<li><a href="#one-shot-campaign">One-Shot Campaign</a><ul>
<li><a href="#chapter-1-start-in-a-place-of-normalcy-comfort">Chapter 1: Start in a place of normalcy / comfort</a></li>
<li><a href="#chapter-2-cross-a-threshold-with-a-true-choice">Chapter 2: Cross a threshold with a true choice</a><ul>
<li><a href="#hooks">Hooks</a></li>
</ul></li>
<li><a href="#chapter-3-take-a-thing-and-pay-its-mortal-price">Chapter 3: Take a thing and pay its (mortal?) price</a><ul>
<li><a href="#allot-challenge-points">Allot Challenge Points</a></li>
<li><a href="#death-is-real-here">Death Is Real Here</a></li>
<li><a href="#the-prize">The Prize</a></li>
</ul></li>
<li><a href="#chapter-4-return-to-the-surface-changed.">Chapter 4: Return to the surface, changed.</a></li>
</ul></li>
<li><a href="#hour-campaign">9-hour Campaign</a><ul>
<li><a href="#chapter-1-you">Chapter 1: You</a></li>
<li><a href="#chapter-2-need">Chapter 2: Need</a></li>
<li><a href="#chapter-3-go">Chapter 3: Go</a></li>
<li><a href="#chapter-4-search">Chapter 4: Search</a><ul>
<li><a href="#allot-challenge-points-1">Allot Challenge Points</a></li>
<li><a href="#new-problems-new-solutions">New Problems, New Solutions</a></li>
<li><a href="#the-power-and-magic-of-the-mysterious-world">The Power and Magic of the Mysterious World</a></li>
<li><a href="#finishing-the-search">Finishing the Search</a></li>
</ul></li>
<li><a href="#chapter-5-find">Chapter 5: Find</a></li>
<li><a href="#chapter-6-take-pay">Chapter 6: Take &amp; Pay</a><ul>
<li><a href="#allot-challenge-points-2">Allot Challenge Points</a></li>
<li><a href="#death-is-real-here-1">Death Is Real Here</a></li>
</ul></li>
<li><a href="#chapter-7-return">Chapter 7: Return</a></li>
<li><a href="#chapter-8-change">Chapter 8: Change</a><ul>
<li><a href="#the-chapter-8-move">The Chapter 8 Move</a></li>
</ul></li>
</ul></li>
<li><a href="#hour-campaign-1">30-hour Campaign</a></li>
<li><a href="#the-real-juice">The real juice</a></li>
</ul>
</div>
<h1 id="gm-guide---campaigns">GM Guide - Campaigns</h1>
<p>In A Thousand Faces of Adventure (hereafter abbreviated to 1kFA), there are 3 different kinds of Campaigns:</p>
<ul>
<li>One-shot (usually 3 hours)</li>
<li>9-hour</li>
<li>30-hour</li>
</ul>
<p>The stories you will tell by playing 1kFA are told in 3 parts: beginning, middle, and end.</p>
<p>If you've played other RPGs that <em>don't have endings</em>, ones that go on for months or even years, this might seem weird to you. Don't worry, try out a 9-hour campaign and see the results. You may find your doubts erased.</p>
<p>1kFA is designed to tell a particular kind of story. It's called <em>The Hero's Journey</em>.</p>
<p><em>The Hero's Journey</em> is a skeleton upon which many successful and popular movies and books are arranged: Star Wars, Lord of the Rings, The Breakfast Club, Die Hard, Beowulf, Forgetting Sarah Marshall, the list goes on. To help you execute a successful and popular <em>campaign</em>, 1kFA gives the GM <em>Journey points</em> and <em>Challenge points</em> and specific rules for using them.</p>
<p>The main premise of <em>The Hero's Journey</em> is, characters start out in a figurative &quot;ordinary world&quot;, they go to a &quot;mysterious world&quot;, and finally, they return.</p>
<p>As you and your players create the narrative, you will have opportunities to shape events. You decide how the world and the NPCs react to the actions of the PCs, and you have the freedom to describe the &quot;meanwhile&quot; -- all the goings-on &quot;off-screen&quot;. Use these powers to pull the narrative into a multi-chapter structure, and in each chapter, try to earn <em>Journey points</em>.</p>
<p>The players may just be along for the ride, or they may also want to delve into <em>The Hero's Journey</em>. Be on the lookout for how they signal that they're into this kind of fun, and use what they express about themes, relationships, emotional tone, conflicts, and backstory to co-create the journey.</p>
<h1 id="its-ok-to-skip-it">It's ok to skip it</h1>
<p>You don't need to get every available <em>Journey point</em>. You should especially not try to force it if doing so would sacrifice fun for the players. Remember, you're not the only author of this story, and while earning points feels nice, you've got other jobs too, like paying attention to the signals the players give you about the kind of fun they want to have.</p>
<h1 id="its-ok-to-end-it">It's ok to end it</h1>
<p>You may find that you and the players have collectively gone as far as you can. Maybe you've reached the deepest, darkest part of the adventure, and the characters decide to stay and call it their new home. Maybe they find a way to destroy something you thought would be permanent, or make permanent something you thought would be temporary, and that changes the whole conflict structure of the story. Maybe they found a shortcut or outsmarted the Oracle.</p>
<p>Maybe they all died.</p>
<p>Take a break and ponder. Sometimes you can think of a way to reinterpret events or move forward with themes while abandoning specifics. Sometimes you can take a subplot and move it to the forefront.</p>
<p>But sometimes the choice that provides the most fun for everyone is to just admit that it's over.</p>
<p>Getting <em>Journey points</em> is great, but the reason everyone is here sitting around the table is to <em>have fun</em>.</p>
<h1 id="its-ok-to-blend-it">It's ok to blend it</h1>
<p>The boundaries between chapters do not need to be strict, explicitly defined lines. There may be a natural blending between two adjacent chapters as you and the players set forth the narrative.</p>
<p>For example, It's common for the 9-hour Campaign to blend chapters 5 and 6. Maybe the treasure of the dungeon is glimpsed, then the ordeal begins, then the ordeal gets really serious, and that's the point to really plumb down to the &quot;dark night of the soul&quot;, fully reveal the treasure, and then emerge to complete the ordeal.</p>
<p>Even when there is a threshold, as in chapters 3 and 7, the different players' characters might cross over at different times.</p>
<h1 id="the-lengths-vary">The lengths vary</h1>
<p>The final chapter might go very fast, or it might be a long journey home. The first threshold might be crossed so fast that you only notice after the fact. Taking the prize might involve a twisting road of trials, or it might be one explosive boss battle.</p>
<p>Let the story be what it must be, and <em>play</em> to find out the details of what happens, but also take your opportunities to earn <em>Journey points</em> when they arise.</p>
<h1 id="one-shot-campaign">One-Shot Campaign</h1>
<ul>
<li>Start in a place of normalcy / comfort</li>
<li>Cross a threshold with a true choice</li>
<li>Take a thing and pay its (mortal?) price</li>
<li>Return to the surface, changed.</li>
</ul>
<p>In a One-Shot campaign, there are 4 potential <em>Journey points</em> to earn.</p>
<h2 id="chapter-1-start-in-a-place-of-normalcy-comfort">Chapter 1: Start in a place of normalcy / comfort</h2>
<p>The first <em>Journey point</em> is a &quot;gimmie&quot;: If you can think of a way to start all of the PCs in their place of normalcy or comfort, gain a <em>Journey point</em>. You <em>did</em> remember to follow the rules in the Character Creation chapter and ask the players about The Hearth, right?</p>
<p>Give the players a chance to establish what normal is for their characters. This is an environment that they can manage. They know what to expect here, and to survive here requires no fundamental change on their part.</p>
<p>Here, the players can get a feel for taking actions and having some dialogue in-character. Perhaps they have some interactions with NPCs familiar to them. Perhaps they describe their character moving through the environment and pointing out specific details. Perhaps the characters get into conflict: social, or physical.</p>
<p>As you are playing this out, you should be looking out for two things:</p>
<ol style="list-style-type: decimal">
<li>Opportunities to establish a need that will move the story to Chapter 2</li>
</ol>
<ul>
<li>signs of an approaching threat</li>
<li>what about their home annoys, frustrates, or threatens them?</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>A premise. Listen for a statement or action that asserts a fundamental truth</li>
</ol>
<ul>
<li>&quot;Nobody bakes a pie like Herbert&quot;</li>
<li>&quot;Shelbyville thinks they're so great, but really, they stink&quot;</li>
<li>&quot;I'm just a Hobbit, I can't steal from a dragon&quot;</li>
<li>&quot;Things will go on like this forever&quot;</li>
<li>&quot;As long as there's a tree to climb, I don't have to worry about wolves&quot;</li>
<li>&quot;If only you could see things from my perspective&quot;</li>
</ul>
<p>You should make a note of any premise, so you can use it later when creating puzzles, monsters and villains.</p>
<h2 id="chapter-2-cross-a-threshold-with-a-true-choice">Chapter 2: Cross a threshold with a true choice</h2>
<p>As the game progresses, the conversation at the table will start establishing details about the world and about relationships between characters. Look for areas of tension and try to develop it. Push characters into discomfort. Raise the stakes. Then look for a <em>threshold</em>. Look for some line that once crossed, they can't simply turn around and go back. They might enthusiastically seek it out, they might even cross over before you've even figured out what it should be (if so, all that's left for you is to mark yourself a <em>Journey point</em>). But you might also need to increase the pressures in their &quot;home&quot; to gently nudge the characters up against that threshold.</p>
<p>But, if you want that point, <strong>don't push them through.</strong></p>
<p>See if the players choose to step their characters through the threshold. If all of them cross the threshold and step away from their ordinary world into a mysterious world of danger and adventure, gain a <em>Journey point</em>.</p>
<h3 id="hooks">Hooks</h3>
<p>A common way to get players to choose to go through the threshold is to create a &quot;hook&quot;. Here are some things to think about to help you invent a hook:</p>
<ul>
<li>Capture, Obstruct, Prevent
<ul>
<li>What is &quot;loose&quot; and causing trouble?</li>
<li>What is in the wrong hands or needs to be brought back into the fold?</li>
</ul></li>
<li>Chase or Race
<ul>
<li>Who else has already begun seeking out the prize?</li>
<li>How long until a threat arrives here?</li>
<li>How might the hunter become the hunted?</li>
</ul></li>
<li>Rescue or Regain
<ul>
<li>Who or what was taken, and where does it rightfully belong?</li>
<li>What power does the precious thing posses?</li>
</ul></li>
<li>Re-order, Rearrange, Fortify
<ul>
<li>What is unbalanced, and what effect does that have on the world?</li>
<li>Who is not doing their job?</li>
</ul></li>
<li>Forbidden Act
<ul>
<li>What is the rule that must not be broken?</li>
<li>Who forbids it?</li>
<li>What power structure does the rule support?</li>
</ul></li>
</ul>
<h2 id="chapter-3-take-a-thing-and-pay-its-mortal-price">Chapter 3: Take a thing and pay its (mortal?) price</h2>
<p>Give the players an opportunity to earn something <em>epic</em> for their characters. It can be a great treasure, it can be fame and renown, it can be weaponry, a magical boon, the elusive respect of an NPC, it can even be self confidence. It can be an appreciation for the power of friendship. (Pixar and Disney have some <em>incredibly</em> well-done Hero's Journey stories. Don't discount them because they're animated.)</p>
<p>It's important not to create a prize that just seems cool to you, the GM. The prize should follow from the fiction. It should be something that is actually wanted or needed by the players' characters. Pay attention to them, they are the protagonists in an odyssey. What would be miraculous for them to receive?</p>
<p>Maybe you don't have to <em>create</em> the prize at all. What have the players been talking about, is there already a specific goal? What themes have already emerged through the action, dialogue, and relationships?</p>
<p>Put that prize in a terribly difficult location.</p>
<p>It could be at the end of a road of trials, or inside the cave where they must conquer their greatest fear, or in the clutches of their most powerful adversary.</p>
<h3 id="allot-challenge-points">Allot Challenge Points</h3>
<p>Whatever the fictional set-up, when you're ready, set up a challenge in the narrative, then draw a circle around <strong>all</strong> of the <em>Challenge points</em> and use them all before the characters get a chance to Rest.</p>
<p>If you can do this, when they complete the challenge that used up the last of the set-aside <em>Challenge points</em>, give them the prize of this mysterious world and gain a <em>Journey point</em> for yourself.</p>
<h3 id="death-is-real-here">Death Is Real Here</h3>
<p>This is the chapter of the game where characters are most at risk to lose all of their Stamina points. In other chapters of the story, the GM may choose to narrate this as unconsciousness, imprisonment, or something else that the character will naturally recover from.</p>
<p>But not in this chapter.</p>
<p>If the character loses all their Stamina in this chapter of the story, the GM should represent this as &quot;death&quot;. Sell it as a permanent removal of the character, and by extension, the player from being able to impact the events of the story.</p>
<p>Don't make this a downer for the player though. Make the death epic. Give the character a final stand that saves the day, or gives the other party members a chance to survive an enormous threat. A moment of tremendous, meaningful sacrifice. Look for what the character symbolized, or what niche they filled in the party's personality, and amplify that symbol or personality aspect to be everyone's salvation.</p>
<p>Also realize you can give them a second chance at life. If you don't want a gritty, hardcore vibe in your campaign, you don't have to let the death stand. For rules on ressurection, see <a href="#using-journey-points">Using Journey Points</a>.</p>
<h3 id="the-prize">The Prize</h3>
<p>The &quot;prize&quot; can be something completely related to the narrative, or it can invoke the mechanisms of the game, or both. If the characters receive something related to game mechanisms, you may remove one cost or condition for any move.</p>
<p>So, for example, you may declare that the characters do not have to be &quot;in a town&quot; to execute the Study Under a Master move.</p>
<p>This relaxation of the rules only applies to Chapter 3, and should be narratively justified.</p>
<h2 id="chapter-4-return-to-the-surface-changed.">Chapter 4: Return to the surface, changed.</h2>
<p>In the final chapter, find a way to return the characters &quot;home&quot;. It need not be their literal home, nor does it need to be where the adventure started, geographically. Go back to that original statement the players made about their character's place of comfort, and tease apart what makes that feel like &quot;home&quot; for them. Guide them back into a situation that has the same feeling at its core.</p>
<p>But they are changed. They have been on an adventure, they've seen things, done things. They are now masters of a new way of existing, unafraid of crossing into the previously alien world beyond their &quot;home&quot;.</p>
<p>By dialogue or action, each player character should exhibit their change.</p>
<p>This can play out in many ways:</p>
<ul>
<li>by using their newfound power to deal with the bullies that previously tormented them</li>
<li>though they dutifully swore to their holy order to keep this quest secret, when they travel back through the badlands, they share the seeds of the foreverfruit with the impoverished village that showed them hospitality</li>
<li>by not screwing up for once in the eyes of their family, and delivering the elves' ointment to cure their grandfather of Medusa's curse</li>
<li>by re-igniting the war as they were bade, like a good soldier, but then returning to challenge their clan-lord for leadership</li>
<li>by being cast out of yet another city, but this time they're on the road with mirth in their step and a horse pulling sixteen barrels of mead</li>
</ul>
<p>Gain your final <em>Journey point</em> if you can hit this note.</p>
<h1 id="hour-campaign">9-hour Campaign</h1>
<p>The 9-hour Campaign is a bit more complicated. Committing these 8 points to memory will make it go a little easier:</p>
<ol style="list-style-type: decimal">
<li>You</li>
<li>Need</li>
<li>Go</li>
<li>Search</li>
<li>Find</li>
<li>Take &amp; Pay</li>
<li>Return</li>
<li>Change</li>
</ol>
<p>(this compact formulation is inspired by Dan Harmon's &quot;Story Circle&quot;)</p>
<h2 id="chapter-1-you">Chapter 1: You</h2>
<p><strong>AKA: Start in a place of normalcy / comfort</strong></p>
<p>In the 9-hour campaign, start the game just like you would in the One-shot campaign.</p>
<h2 id="chapter-2-need">Chapter 2: Need</h2>
<p><strong>AKA: Call to adventure</strong></p>
<p><code>TODO</code></p>
<ul>
<li>Provide a sandbox to play in, let the players establish what their characters value here in the sandbox</li>
<li><p>It could be a thing, but it could also be a theme - freedom, progress, peace, etc</p></li>
<li><p>Show something valuable is threatened (maybe the known world)</p></li>
<li><p>Herald or Message - the mysterious world threatens something valuable.</p></li>
<li>Show a threat or challenge that they cannot <em>yet</em> overcome</li>
<li>That may mean they are defeated by it
<ul>
<li>They <strong>need</strong> more power</li>
</ul></li>
<li>Maybe a spell or skill is needed
<ul>
<li>They <strong>need</strong> more power</li>
</ul></li>
<li>Maybe knowledge is needed
<ul>
<li>They <strong>need</strong> information from the mysterious world</li>
</ul></li>
<li>Maybe their place of comfort is exposed as insufficient
<ul>
<li>They <strong>need</strong> a place to grow / explore / stretch their legs</li>
</ul></li>
<li><p>Be honest about this threat. If they fight something they cannot defeat and don't retreat, incapacitation, even death† is an option.</p></li>
<li>Impossible threat comes alongside a suggestion of hope</li>
<li>&quot;Maybe the oracle will know&quot;</li>
<li>&quot;Great Hero perished in the badlands, but maybe his sword survived&quot;</li>
<li>Herald makes a promise</li>
<li><p>You can be a small part of the solution if you come with me</p></li>
<li><p>This threatening force will progress no matter the characters' choices and will pervade the story as a &quot;front&quot;.</p></li>
<li><p>This is important: <em>the characters <em>need</em> the things they will get when the players <em>play</em> the game</em></p></li>
</ul>
<h2 id="chapter-3-go">Chapter 3: Go</h2>
<p><strong>AKA: Threshold and Threshold Guardian</strong></p>
<ul>
<li>Same as One-shot campaign &quot;Go&quot;</li>
</ul>
<p><code>TODO</code></p>
<ul>
<li>The amount of contrast between the ordinary and special worlds</li>
</ul>
<h2 id="chapter-4-search">Chapter 4: Search</h2>
<p><strong>AKA: Road of Trials</strong></p>
<p><strong>AKA: Fun &amp; Games</strong></p>
<p>The characters have now entered a situation that is not ordinary, not comfortable. There is mystery here, unknowns, new people, new territory. Their old coping mechanisms and skills will not have the same effectiveness as before. Consequences will change and heighten. New skills will be learned, new friendships established. New enemies will emerge.</p>
<p>The <strong>Search</strong> should deliver &quot;the promise of the premise&quot;. Go back to your Touchstone List and ask yourself some questions. What is the &quot;juice&quot; here? What spectacle, what adventure might the players have been fantasizing about when they chose the titles you see on this list? Don't be shy about copying.</p>
<h3 id="allot-challenge-points-1">Allot Challenge Points</h3>
<p>To begin the <strong>Search</strong> chapter of the story, circle <strong>half</strong> of your <em>Challenge points</em>.</p>
<p>This new mysterious is dangerous. The circled <em>Challenge points</em> represent this. Show the players that they might need to be smarter now. Problems are not solved here as easily as in the place of comfort.</p>
<h3 id="new-problems-new-solutions">New Problems, New Solutions</h3>
<p>At least once during the <strong>Search</strong>, give each player a chance to use the Study Under a Master or Shop / Procure moves and give each player a chance to use the skill or item they chose.</p>
<h3 id="the-power-and-magic-of-the-mysterious-world">The Power and Magic of the Mysterious World</h3>
<p>Make an exhibition of how this world has power unlike their place of comfort. There are forces here that aren't understood. Those forces can be scary, yes, but they can also be miraculous.</p>
<p>Use one of your <em>Journey points</em> to make this exhibition.</p>
<h3 id="finishing-the-search">Finishing the Search</h3>
<p>You achieve your GM goal in the <strong>Search</strong> phase if</p>
<ul>
<li>you gave each player a chance to &quot;level up&quot; their character and use their new skills or items</li>
<li>and you used at least one <em>Journey point</em></li>
<li>and you used all the circled <em>Challenge points</em> you circled at the beginning</li>
</ul>
<p>If you do this, gain a <em>Journey point</em> and aim to move the plot to the next phase.</p>
<h2 id="chapter-5-find">Chapter 5: Find</h2>
<p><strong>AKA: Dark night of the soul</strong></p>
<p><strong>AKA: Find the Hero within</strong></p>
<p>When the narrative arrives at a point of relative quiet or peace, maybe during a Seek Help or Rest move, have an honest conversation with your players.</p>
<p>This is a time for total vulnerability, weightlessness, and revelation. It is a time for the entire identity of the protagonists to &quot;hang in the balance. Using dreamlike and mystical imagery in your exposition can be a great way to dress the stage.</p>
<p>Taking a moment to change the background music can be especially effective in Chapter 5.</p>
<p>Tell your players how you interpret the plot so far. Revisit where they've been, reinforce where they've arrived and say what it all means to you. Not as the sole author of a story, but as an interpreter of your shared authorship. Tell them how you see their characters, what they value, what they might represent metaphorically.</p>
<p>Go around to each player and ask them</p>
<ul>
<li>What direction forward does your character see as possible from here, or does your character want to just stay right where they are?</li>
<li>Will your character sacrifice their life for something valuable in the plot? If so, what, and why?</li>
<li>Have the events of this journey caused your character to give up a &quot;premise&quot; -- a <em>fundamental</em> belief or relationship they held at the beginning of the game?</li>
</ul>
<p>Make a note of all the answers.</p>
<p>Next, ask any players still using the &quot;Lucky&quot; Stamina system if they're ready to switch over to the &quot;Heroic&quot; Stamina system. This is an opportunity for a player to gain more control in exchange for higher difficulty. If they say yes, make a note of it.</p>
<p>If each character answered &quot;stay&quot;, &quot;sacrifice&quot;, or &quot;abandon&quot; to any of the questions above, or if any player switched from &quot;Lucky&quot; to &quot;Heroic&quot;, gain a <em>Journey point</em>.</p>
<h2 id="chapter-6-take-pay">Chapter 6: Take &amp; Pay</h2>
<p><strong>AKA: The Ordeal</strong></p>
<p>Just before this chapter, if you can give the players an opportunity to gain new skills or equipment for their characters, you should. They're going to need it.</p>
<p>The characters have learned something in this mysterious place that is the key to both worlds. Maybe they learned something about themselves, maybe they received a great boon or symbol. Maybe they met a goddess that whispered a secret of the universe. Maybe they met their father. It could be something very literal, like the skill they just learned or a spear enchanted to pass through dragon's hide.</p>
<p>This is the thing that will answer the <strong>Need</strong>.</p>
<h3 id="allot-challenge-points-2">Allot Challenge Points</h3>
<p>When you're ready, set up a challenge in the narrative, then draw a circle around <strong>all</strong> of the unused <em>Challenge points</em> on your GM sheet. To earn the <em>Journey point</em> of this chapter, use all the circled points before the characters get a chance to Rest.</p>
<h3 id="death-is-real-here-1">Death Is Real Here</h3>
<p>Just as in the One-Shot campaign's Chapter 3, in this Chapter, the consequence for full Stamina loss is death.</p>
<h2 id="chapter-7-return">Chapter 7: Return</h2>
<p>Start a conversation.</p>
<p>This is a time to consider grief and acceptance.</p>
<p>Ask the players what their characters will miss most about the world they're leaving behind. NPCs left behind? A fellow PC that died? It can be anything.</p>
<p>Then ask the players how their characters will be received when they return. Was a <strong>Need</strong> established in Chapter 2, and if so, will the characters be able to answer it? Will the people of the ordinary world accept the characters back? Will they accept whatever treasure might have been found in Chapter 6? Will the dragon-piercing spear actually work against the dragon?</p>
<p>What changes have happened in the familiar world, with our heroes being gone so long?</p>
<p>Did a player's character die in an earlier chapter? Will their friends and family accept the survivors?</p>
<p>Maybe the answers aren't clear, and you need to set up scenes and get everyone to flesh them out.</p>
<p>Bring the story to a threshold. A doorway that will seal shut once crossed. A monster that once slain, will change everything forever. A volcano that must be extinguished or exploded.</p>
<p>Build one final challenge for your players, a &quot;Threshold Guardian&quot;. This can be a mob of villagers whose minds must be changed, it can be their cleverest adversary, or it can be that invulnerable dragon.</p>
<p>Gain a <em>Journey point</em> if you confront the PCs with a monster, challenge, or obstacle that embodies:</p>
<ul>
<li>grief: anger, bargaining, depression, denial</li>
<li>rejection of how the characters have changed</li>
<li>rejection of emotional growth</li>
<li>rejection that this story must end</li>
</ul>
<h2 id="chapter-8-change">Chapter 8: Change</h2>
<p><strong>AKA: Freedom from the fear of death</strong></p>
<p>When the characters return back to the ordinary world, they will have to defeat the Threshold Guardian, or if that chapter was skipped, they will have to come to terms with where they've been and who they are now.</p>
<p>A game of 1kFA can resolve in many ways. Where does their new power lie? Game mechanisms? Relationships? Knowledge? Something else?</p>
<h3 id="the-chapter-8-move">The Chapter 8 Move</h3>
<p>The first time any PC:</p>
<ul>
<li>employs skills or treasures the they attained during their adventure to defeat the Threshold Guardian</li>
<li>attempts to banish something alien that came through the threshold by using a gift they attained in the mysterious world</li>
<li>inspires an NPC from the ordinary world to be something more, to cast away who they've been historically and to change.</li>
<li>wishes for something left behind on the other side of the threshold</li>
<li>presumes they are doomed, but chooses to defy death and struggle on</li>
</ul>
<p>Use a <em>Journey point</em> to Reveal The Hearth. The Hearth was the specific people, food, song, environmental feature, ritual or festival, or group activity that was identified at the beginning of the game.</p>
<p>Describe how The Hearth which has been inaccessible, snuffed out, or hidden since the characters crossed the first threshold is now rekindled, reborn, re-imagined or its inheritor is revealed. All the PCs now have a chance to heal their wounds.</p>
<p>For every wound healed, gain another <em>Journey point</em>.</p>
<h1 id="hour-campaign-1">30-hour Campaign</h1>
<p><code>TODO</code></p>
<p>An &quot;arc&quot; of 3 9-hour campaigns</p>
<ul>
<li>First Book - just the same as the 9-Hour Campaign</li>
<li>Second Book - Carry over all <em>Journey points</em> and <em>Challenge points</em></li>
<li>Chapter 7 should return them to a different &quot;world&quot;</li>
<li>Third Book - Start with 0 <em>Journey points</em>, carry over the <em>Challenge points</em></li>
<li><em>Challenge points</em> grow at double the rate:
<ul>
<li>✅︎ gains you 2 <em>Challenge points</em></li>
<li>on IMMEDIATE moves, ✗ gains you 4 <em>Challenge points</em></li>
</ul></li>
<li>Challenge the narrative character changes made earlier - will the characters give up their earlier accomplishments or boons to attempt for even greater ones?</li>
</ul>
<h1 id="the-real-juice">The real juice</h1>
<p>When you gather with friends you care about, sit around a table, and tell stories, you are sharing in a great power.</p>
<p>There is a second journey that happens during play, and that is the journey that the players are on. Not the <em>characters</em>. The <em>players</em>.</p>
<p>Every thought, idea, action expressed in the narrative came from a player, one of your friends. Even the most ephemeral or small contribution is special because it was unique to that person in that context.</p>
<p>If you want to make a game of 1kFA really great, pay attention to <em>who</em> your friends are and guess at <em>why</em> they are expressing their character the way they do. Then use those guesses in the story.</p>
<p>This power, this &quot;juice&quot;, this &quot;second journey&quot;, is difficult to fully express in words. The narrative you create together is a means to explore <em>the human experience</em>. To exist <em>in the moment</em>. Create a model of reality, drop an avatar for yourself into it, distance your &quot;real&quot; self from it, and <strong>play</strong> at being different. Be free to express anger, affection, pain, the whole field of emotion, even that territory that is kept walled-off to cope with everyday life and behave harmoniously in society.</p>
<p>Just like the fictional characters who cross over to a mysterious world, face the unknown, and return to the ordinary world, we players can choose to cross over and <strong>play</strong>, explore our unconsciousness, and find ourselves changed by what we confronted, unchained, poked, or set free down there.</p>
</body>
</html>
